var y={version:"0.5.0",ready:!1,components:[],signals:{},extraCommandbarEntries:[],activeDraggable:null};function g(e,t,s){return Math.min(Math.max(e,t),s)}function f(e,t){return 0==t?Math.floor(e):+e.toFixed(t??2).replace(/([0-9]+(\.[0-9]+[1-9])?)(\.?0+$)/,"$1")}function h(e,t,s,a,n){return(e-t)*(n-a)/(s-t)+a}y.MOUSE_LEFT_CLICK=0,y.MOUSE_MIDDLE_CLICK=1,y.MOUSE_RIGHT_CLICK=2,y.MOUSE_DOUBLE_CLICK=2,y.MOUSE_TRIPLE_CLICK=3,y.CURVE_MOVEOUT_CLAMP=0,y.CURVE_MOVEOUT_DELETE=1,y.DRAGGABLE_Z_INDEX=101,y.clamp=g,y.round=f,y.remapRange=h,"undefined"!=typeof performance?y.getTime=performance.now.bind(performance):"undefined"!=typeof Date&&Date.now?y.getTime=Date.now.bind(Date):"undefined"!=typeof process?y.getTime=function(){var e=process.hrtime();return.001*e[0]+1e-6*e[1]}:y.getTime=function(){return(new Date).getTime()};function b(e,t){setTimeout(e,t??0)}function d(e){return e.replace(/\s/g,"").replaceAll("@","_").replaceAll("+","_plus_").replaceAll(".","")}function c(e){return e.includes(".")?e.split(".").pop():null}function v(e){return JSON.parse(JSON.stringify(e))}function o(e){return[parseInt(e.substring(1,3),16)/255,parseInt(e.substring(3,5),16)/255,parseInt(e.substring(5,7),16)/255]}function s(e){let t="#";for(var s of e)s=Math.floor(255*s),t+=s.toString(16);return t}function u(e,t=8){var s=document.createElement("span"),e=(s.className="lexinputmeasure",s.innerHTML=e,document.body.appendChild(s),s.getBoundingClientRect());return y.UTILS.deleteElement(s),e.width+t}function E(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+"-"+e()+"-"+e()}function p(i,t={}){let l=0,r=0,a=null,s=t.targetClass,o=t.dragMargin??3,n=(e,t,s)=>{var a=i.parentElement?i.parentElement.getBoundingClientRect():{x:0,y:0,width:0,height:0},n="fixed"==i.style.position?new y.vec2(a.x,a.y):new y.vec2;s=s??e.clientX-l-a.x,t=t??e.clientY-r-a.y,i.style.left=g(s,o+n.x,n.x+a.width-i.offsetWidth-o)+"px",i.style.top=g(t,o+n.y,n.y+a.height-i.offsetHeight-o)+"px",i.style.translate="none"};t.autoAdjust&&n(null,parseInt(i.style.left),parseInt(i.style.top));var e=y.UTILS.uidGenerator();i["draggable-id"]=e;let c=t.onMove?e=>{a&&t.onMove&&t.onMove(a)}:e=>{a&&n(e)},d=t.onDragStart;i.setAttribute("draggable",!0),i.addEventListener("mousedown",function(e){a=e.target.classList.contains(s)||!s?e.target:null}),i.addEventListener("dragstart",function(e){var t,s;e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),a&&((t=new Image).src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.effectAllowed="move",t=e.target.getBoundingClientRect(),s=a.parentElement.getBoundingClientRect(),s="fixed"==a.style.position?new y.vec2(s.x,s.y):new y.vec2,l=e.clientX-t.x-s.x,r=e.clientY-t.y-s.y,document.addEventListener("mousemove",c),a.eventCatched=!0,y.activeDraggable&&(y.activeDraggable.style.zIndex=y.DRAGGABLE_Z_INDEX),y.activeDraggable=i,y.activeDraggable.style.zIndex=y.DRAGGABLE_Z_INDEX+1,d)&&d(a,e)},!1),document.addEventListener("mouseup",e=>{a&&(a=null,document.removeEventListener("mousemove",c))})}y.doAsync=b,y.getSupportedDOMName=d,y.has=function(e){return-1<y.components.indexOf(e)},y.getExtension=c,y.deepCopy=v,y.setTheme=function(e){e="light"==e?"light":"dark",document.documentElement.setAttribute("data-theme",e),y.emit("@on_new_color_scheme",e)},y.setThemeColor=function(e,t){document.querySelector(":root").style.setProperty("--"+e,t)},y.getThemeColor=function(e){var t=getComputedStyle(document.querySelector(":root"));return(e=t.getPropertyValue("--"+e)).includes("light-dark")?("light"==t.getPropertyValue("color-scheme")?e.substring(e.indexOf("(")+1,e.indexOf(",")):e.substring(e.indexOf(",")+1,e.indexOf(")"))).replace(/\s/g,""):e},y.getBase64Image=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png")},y.hexToRgb=o,y.rgbToHex=s,y.measureRealWidth=u,y.guidGenerator=E,y.buildTextPattern=function(e={}){var t=[],s=(e.lowercase&&t.push("(?=.*[a-z])"),e.uppercase&&t.push("(?=.*[A-Z])"),e.digit&&t.push("(?=.*\\d)"),e.specialChar&&t.push("(?=.*[@#$%^&+=!])"),e.noSpaces&&t.push("(?!.*\\s)"),e.minLength||0),a=e.maxLength||"",t=`^${t.join("")}.{${s},${a}}$`;return e.asRegExp?new RegExp(t):t},y.makeDraggable=p,y.makeCollapsible=function(e,t,s,a={}){e.classList.add("collapsible");var a=a.collapsed??!0,n=y.makeIcon("right");n.classList.add("collapser"),n.dataset.collapsed=a,n.style.marginLeft="auto",n.style.marginRight="0.2rem",n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),this.dataset.collapsed?(delete this.dataset.collapsed,t.style.display="block"):(this.dataset.collapsed=!0,t.style.display="none")}),e.appendChild(n),(s=s??e.parentElement).appendChild(t)},y.makeCodeSnippet=function(e,t,s={}){if(y.has("CodeEditor")){var a,n,i,l=document.createElement("div"),t=(l.className="lexcodesnippet",l.style.width=t?t[0]:"auto",l.style.height=t?t[1]:"auto",new x({noAppend:!0})),r=new y.CodeEditor(t,{skipInfo:!0,disableEdition:!0,allowAddScripts:!1,name:s.tabName});if(r.setText(e,s.language??"Plain Text"),s.linesAdded){let t=r.root.querySelector(".code");for(var o of s.linesAdded)if(o.constructor==Number)t.childNodes[o-1].classList.add("added");else if(o.constructor==Array)for(let e=o[0]-1;e<=o[1]-1;e++)t.childNodes[e].classList.add("added")}if(s.linesRemoved){let t=r.root.querySelector(".code");for(var c of s.linesRemoved)if(c.constructor==Number)t.childNodes[c-1].classList.add("removed");else if(c.constructor==Array)for(let e=c[0]-1;e<=c[1]-1;e++)t.childNodes[e].classList.add("removed")}return s.windowMode&&((e=document.createElement("div")).className="lexwindowbuttons",(a=document.createElement("span")).style.background="#ee4f50",(n=document.createElement("span")).style.background="#f5b720",(i=document.createElement("span")).style.background="#53ca29",e.appendChild(a),e.appendChild(n),e.appendChild(i),r.root.querySelector(".lexareatabs").prepend(e)),(s.lineNumbers??!0)||r.root.classList.add("no-gutter"),l.appendChild(t.root),l}console.error("Import the CodeEditor component to create snippets!")},y.makeIcon=function(e,t,s=""){let a=y.ICONS[e],n=(console.assert(a,`No icon named _${e}_`),a.constructor==String&&(a=y.ICONS[a]),(e=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("viewBox",`0 0 ${a[0]} `+a[1]),s&&e.classList.add(s),a[5]&&(i=a[5].split("="),e.setAttribute(i[0],i[1])),document.createElement("path"));n.setAttribute("fill","var(--color)"),n.setAttribute("d",a[4]),e.appendChild(n),a[6]&&a[6].split(" ").forEach(e=>{e=e.split("=");n.setAttribute(e[0],e[1])}),e.innerHTML+="\x3c!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e";var i=document.createElement("a");return i.title=t??"",i.className="lexicon "+s,i.appendChild(e),i},y.registerCommandbarEntry=function(e,t){y.extraCommandbarEntries.push({name:e,callback:t})};y.vec2=class R{constructor(e,t){this.x=e??0,this.y=t??e??0}get xy(){return[this.x,this.y]}get yx(){return[this.y,this.x]}set(e,t){this.x=e,this.y=t}add(e,t=new R){return t.set(this.x+e.x,this.y+e.y),t}sub(e,t=new R){return t.set(this.x-e.x,this.y-e.y),t}mul(e,t=new R){return e.constructor==Number&&(e=new R(e)),t.set(this.x*e.x,this.y*e.y),t}div(e,t=new R){return e.constructor==Number&&(e=new R(e)),t.set(this.x/e.x,this.y/e.y),t}abs(e=new R){return e.set(Math.abs(this.x),Math.abs(this.y)),e}dot(e){return this.x*e.x+this.y*e.y}len2(){return this.dot(this)}len(){return Math.sqrt(this.len2())}nrm(e=new R){return e.set(this.x,this.y),e.mul(1/this.len(),e)}dst(e){return e.sub(this).len()}clp(e,t,s=new R){return s.set(g(this.x,e,t),g(this.y,e,t)),s}},y.init=function(e={}){var t,s;return this.ready||((s=document.createElement("div")).id="lexroot",s.tabIndex=-1,(t=document.createElement("div")).id="modal",this.modal=t,this.root=s,this.container=document.body,this.modal.classList.add("hiddenOpacity"),this.modal.toggle=function(e){this.classList.toggle("hiddenOpacity",e)},e.container&&(this.container=document.getElementById(e.container)),this.usingStrictViewport=e.strictViewport??!0,document.documentElement.setAttribute("data-strictVP",this.usingStrictViewport?"true":"false"),this.usingStrictViewport||document.addEventListener("scroll",e=>{document.body.querySelectorAll(".lexmenubox").forEach(e=>{e._updatePosition()})}),this.commandbar=(e=>{let l=document.createElement("dialog"),r=(l.className="commandbar",l.tabIndex=-1,e.appendChild(l),[]),o=null;l.addEventListener("keydown",function(e){var t,s;e.stopPropagation(),e.stopImmediatePropagation(),o=o??-1,"Escape"==e.key?(this.close(),h(!0)):"Enter"==e.key?(t=r[o])&&(s=t.item.type&&"checkbox"===t.item.type,this.close(),s?(t.item.checked=!t.item.checked,t.callback.call(window,t.item.checked,t.entry_name)):t.callback.call(window,t.entry_name)):"ArrowDown"==e.key&&o<r.length-1?(o++,l.querySelectorAll(".hovered").forEach(e=>e.classList.remove("hovered")),r[o].classList.add("hovered"),0<(s=r[o].offsetHeight*(o+1)-c.offsetHeight)&&c.scrollTo({top:s,behavior:"smooth"})):"ArrowUp"==e.key&&0<o&&(o--,l.querySelectorAll(".hovered").forEach(e=>e.classList.remove("hovered")),r[o].classList.add("hovered"))}),l.addEventListener("focusout",function(e){e.relatedTarget!=e.currentTarget&&(e.stopPropagation(),e.stopImmediatePropagation(),this.close(),h(!0))}),e.addEventListener("keydown",e=>{if(" "==e.key&&e.ctrlKey)e.stopImmediatePropagation(),e.stopPropagation(),y.setCommandbarState(!0);else for(var t of y.components){var s;if(y[t]&&y[t].prototype.onKeyPressed)for(s of y.CodeEditor.getInstances())s.onKeyPressed(e)}}),(e=document.createElement("div")).className="gs-header";var t=document.createElement("a");t.className="fa-solid fa-magnifying-glass",e.appendChild(t);let s=document.createElement("input");s.placeholder="Search...",s.value="",e.appendChild(s);var a=(t=new x({width:"100%",skipAppend:!0,className:"gs-tabs"})).addTabs();let n,c=(a.add("All",document.createElement("div"),{selected:!0,onSelect:(e,t)=>{n=t}}),document.createElement("div")),d=(c.className="searchitembox",null),h=e=>{c.innerHTML="",r.length=0,o=null,e&&(s.value="")},u=(e,t,s,a)=>{var n,i;e.length&&(d&&d.classList.remove("last"),(n=document.createElement("div")).className="searchitem last",i=a&&a.type&&"checkbox"===a.type,n.innerHTML=i?"<a class='fa fa-check'></a><span>"+(s+e)+"</span>":s+e,n.entry_name=e,n.callback=t,n.item=a,n.addEventListener("click",function(e){this.callback.call(window,this.entry_name),y.setCommandbarState(!1),h(!0)}),n.addEventListener("mouseenter",function(e){l.querySelectorAll(".hovered").forEach(e=>e.classList.remove("hovered")),this.classList.add("hovered"),o=r.indexOf(this)}),n.addEventListener("mouseleave",function(e){this.classList.remove("hovered")}),r.push(n),c.appendChild(n),d=n)},p=(e,t,s)=>{var a=Object.keys(e)[0],n=e.name??s+a;if(n.toLowerCase().includes(t)&&e.callback&&u(e.name??a,e.callback,s,e),!e.name){s+=a+" > ";for(var i of e[a])p(i,t,s)}};return l._addElements=e=>{h();for(var t of y.menubars)for(var s of t.items)p(s,e,"");for(var a of y.extraCommandbarEntries){var n=a.name;n.toLowerCase().includes(e)&&u(n,a.callback,"",{})}if(y.has("CodeEditor")){let s=y.CodeEditor.getInstances();if(s.length){var i=s[0].languages;for(let t of Object.keys(i)){var l="Language: "+t,r=s[0]._getFileIcon(null,i[t].ext),r=r.includes("fa-")?"<i class='"+r+"'></i>":"<img src='https://raw.githubusercontent.com/jxarco/lexgui.js/master/"+r+"'>";r+=l+" <span class='lang-ext'>("+i[t].ext+")</span>",l.toLowerCase().includes(e)&&u(r,()=>{for(var e of s)e._changeLanguage(t)},"",{})}}}},s.addEventListener("input",function(e){l._addElements(this.value.toLowerCase())}),l.appendChild(e),l.appendChild(t.root),l.appendChild(c),l})(this.container),this.container.appendChild(t),e.skipRoot?this.root=document.body:this.container.appendChild(s),(t=document.createElement("section")).className="notifications",this.notifications=document.createElement("ol"),this.notifications.className="",this.notifications.iWidth=0,t.appendChild(this.notifications),this.container.appendChild(t),this.notifications.addEventListener("mouseenter",()=>{this.notifications.classList.add("list")}),this.notifications.addEventListener("mouseleave",()=>{this.notifications.classList.remove("list")}),s.addEventListener("dragover",function(e){e.preventDefault()},!1),document.addEventListener("contextmenu",function(e){e.preventDefault()},!1),t=document.getElementsByTagName("HEAD")[0],(s=document.createElement("link")).rel="stylesheet",s.type="text/css",s.crossOrigin="anonymous",s.href="https://use.fontawesome.com/releases/v6.7.2/css/all.css",t.appendChild(s),this.DEFAULT_NAME_WIDTH="30%",this.DEFAULT_SPLITBAR_SIZE=4,this.OPEN_CONTEXTMENU_ENTRY="click",this.ready=!0,this.menubars=[],e.skipRoot||e.skipDefaultArea||(this.main_area=new x({id:e.id??"mainarea"})),(e.autoTheme??!0)&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches&&(y.setTheme("light"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{y.setTheme(e.matches?"dark":"light")}))),this.main_area},y.setCommandbarState=function(e,t=!0){var s=this.commandbar;e?(s.show(),s.querySelector("input").focus(),t&&s._addElements(void 0)):s.close()},y.message=function(t,e,s={}){if(t)return s.modal=!0,new D(e,e=>{e.addTextArea(null,t,null,{disabled:!0,fitHeight:!0})},s);throw"No message to show"},y.popup=function(t,e,s={}){if(!t)throw"No message to show";s.size=s.size??["max-content","auto"],s.class="lexpopup";var a=s.timeout||3e3;let n=new D(e,e=>{e.addTextArea(null,t,null,{disabled:!0,fitHeight:!0})},s);return setTimeout(()=>{n.close()},Math.max(a,150)),n},y.prompt=function t(s,a,n,i={}){i.modal=!0,i.className="prompt";let l="",r=new D(a,e=>{e.addTextArea(null,s,null,{disabled:!0,fitHeight:!0}),(i.input??!0)&&e.addText(null,i.input||l,e=>l=e,{placeholder:"..."}),e.sameLine(2),e.addButton(null,"Cancel",()=>{i.on_cancel&&i.on_cancel(),r.close()}),e.addButton(null,i.accept||"Continue",()=>{i.required&&""===l?(s+=s.includes("You must fill the input text.")?"":"\nYou must fill the input text.",r.close(),t(s,a,n,i)):(n&&n.call(this,l),r.close())},{buttonClass:"primary"})},i);return(i.input??!0)&&r.root.querySelector("input").focus(),r},y.toast=function(e,t,s={}){if(!e)throw"The toast needs at least a title!";console.assert(this.notifications);let a=document.createElement("li");a.className="lextoast",a.style.translate="0 calc(100% + 30px)",this.notifications.prepend(a),b(()=>{this.notifications.offsetWidth>this.notifications.iWidth&&(this.notifications.iWidth=Math.min(this.notifications.offsetWidth,480),this.notifications.style.width=this.notifications.iWidth+"px"),a.dataset.open=!0},10);var n=document.createElement("div"),i=(n.className="lextoastcontent",a.appendChild(n),document.createElement("div"));i.className="title",i.innerHTML=e,n.appendChild(i),t&&((e=document.createElement("div")).className="desc",e.innerHTML=t,n.appendChild(e)),s.action&&((i=new M).addButton(null,s.action.name??"Accept",s.action.callback.bind(this,a),{width:"auto",maxWidth:"150px",className:"right",buttonClass:"outline"}),a.appendChild(i.root.childNodes[0]));let l=this;a.close=function(){this.dataset.closed=!0,b(()=>{this.remove(),l.notifications.childElementCount||(l.notifications.style.width="unset",l.notifications.iWidth=0)},500)},(s.closable??!0)&&((t=document.createElement("a")).className="fa fa-xmark lexicon closer",t.addEventListener("click",()=>{a.close()}),a.appendChild(t)),-1!=(n=s.timeout??3e3)&&b(()=>{a.close()},n)},y.badge=function(e,t,s={}){var a=document.createElement("div");return a.innerHTML=e,a.className="lexbadge "+(t??""),Object.assign(a.style,s.style??{}),a.outerHTML},y.makeContainer=function(e,t,s={}){var a=document.createElement("div");return a.className="lexcontainer "+(t??""),a.style.width=e&&e[0]?e[0]:"100%",a.style.height=e&&e[1]?e[1]:"100%",Object.assign(a.style,s),a};class L{constructor(e,t,s){this.name=e,this.value=t,this.domEvent=s}}y.IEvent=L;class m{static NONE=0;static NODE_SELECTED=1;static NODE_DELETED=2;static NODE_DBLCLICKED=3;static NODE_CONTEXTMENU=4;static NODE_DRAGGED=5;static NODE_RENAMED=6;static NODE_VISIBILITY=7;static NODE_CARETCHANGED=8;constructor(e,t,s){this.type=e||m.NONE,this.node=t,this.value=s,this.multiple=!1,this.panel=null}string(){switch(this.type){case m.NONE:return"tree_event_none";case m.NODE_SELECTED:return"tree_event_selected";case m.NODE_DELETED:return"tree_event_deleted";case m.NODE_DBLCLICKED:return"tree_event_dblclick";case m.NODE_CONTEXTMENU:return"tree_event_contextmenu";case m.NODE_DRAGGED:return"tree_event_dragged";case m.NODE_RENAMED:return"tree_event_renamed";case m.NODE_VISIBILITY:return"tree_event_visibility";case m.NODE_CARETCHANGED:return"tree_event_caretchanged"}}}y.TreeEvent=m,y.emit=function(e,t,s={}){var a=y.signals[e];if(a){var n,i=s.target;if(i)i[e]&&i[e].call(i,t);else for(var l of a)l instanceof C?l.set(t,s.skipCallback??!0):l.constructor===Function?l(null,t):(n=l[e],console.assert(n,`No callback registered with _${e}_ signal`),n.bind(l)(t))}},y.addSignal=function(e,t,s){t[e]=s,y.signals[e]||(y.signals[e]=[]),-1<y.signals[e].indexOf(t)||y.signals[e].push(t)};class e{constructor(e,t,s={}){console.assert(e,"DropdownMenu needs a DOM element as trigger!"),((this._trigger=e).ddm=this)._items=t,this._windowPadding=4,this.side=s.side??"bottom",this.align=s.align??"center",this.avoidCollisions=s.avoidCollisions??!0,this.root=document.createElement("div"),this.root.id="root",this.root.dataset.side=this.side,this.root.tabIndex="1",this.root.className="lexdropdownmenu",y.root.appendChild(this.root),this._create(this._items),b(()=>{this._adjustPosition(),this.root.focus(),this._onClick=e=>{e.target&&(e.target.className.includes("lexdropdown")||e.target==this._trigger)||this.destroy()},document.body.addEventListener("click",this._onClick)},10)}destroy(){delete this._trigger.ddm,document.body.removeEventListener("click",this._onClick),y.root.querySelectorAll(".lexdropdownmenu").forEach(e=>{e.remove()})}_create(e,i){if(i){let t=i.getBoundingClientRect(),s=document.createElement("div");s.tabIndex="1",s.className="lexdropdownmenu",s.id=i.id,s.dataset.side="right",y.root.appendChild(s),s.currentParent=i,i=s,b(()=>{var e=[t.x+t.width,t.y];this.avoidCollisions&&(e[0]=y.clamp(e[0],0,window.innerWidth-s.offsetWidth-this._windowPadding),e[1]=y.clamp(e[1],0,window.innerHeight-s.offsetHeight-this._windowPadding)),s.style.left=e[0]+"px",s.style.top=e[1]+"px"},10)}else i=this.root;for(let n of e)if(n){let t=n.name??n;var s=t.replace(/\s/g,"").replaceAll(".","");if(!i.querySelector("#"+s)){let a=document.createElement("div");a.className="lexdropdownmenuitem"+(n.name?"":" label")+(n.disabled?" disabled":""),a.id=s,a.innerHTML=`<span>${t}</span>`,n.icon&&(s=y.makeIcon(n.icon),a.prepend(s)),a.tabIndex="1",i.appendChild(a),n.constructor===String||n.disabled||(n.submenu&&((s=document.createElement("a")).className="fa-solid fa-angle-right fa-xs",a.appendChild(s)),a.addEventListener("click",()=>{var e=n.callback;e&&e.call(this,t,a),this.destroy()}),a.addEventListener("mouseover",e=>{let t=a.id,s=i;for(;s;)t+="/"+s.id,s=s.currentParent?.parentElement;if(y.root.querySelectorAll(".lexdropdownmenu").forEach(e=>{t.includes(e.id)||(e.currentParent.built=!1,e.remove())}),n.submenu){if(a.built)return;a.built=!0,this._create(n.submenu,a)}e.stopPropagation()}))}}else this._addSeparator(i)}_adjustPosition(){var t=[document.scrollingElement.scrollLeft,document.scrollingElement.scrollTop];{var s=this._trigger.getBoundingClientRect();let e=!0;switch(this.side){case"left":t[0]+=s.x-this.root.offsetWidth,e=!1;break;case"right":t[0]+=s.x+s.width,e=!1;break;case"top":t[1]+=s.y-this.root.offsetHeight,e=!0;break;case"bottom":t[1]+=s.y+s.height,e=!0}switch(this.align){case"start":e?t[0]+=s.x:t[1]+=s.y;break;case"center":e?t[0]+=s.x+.5*s.width-.5*this.root.offsetWidth:t[1]+=s.y+.5*s.height-.5*this.root.offsetHeight;break;case"end":e?t[0]+=s.x-this.root.offsetWidth+s.width:t[1]+=s.y-this.root.offsetHeight+s.height}}this.avoidCollisions&&(t[0]=y.clamp(t[0],0,window.innerWidth-this.root.offsetWidth-this._windowPadding),t[1]=y.clamp(t[1],0,window.innerHeight-this.root.offsetHeight-this._windowPadding)),this.root.style.left=t[0]+"px",this.root.style.top=t[1]+"px"}_addSeparator(e){var t=document.createElement("div");t.className="separator",(e=e??this.root).appendChild(t)}}y.DropdownMenu=e;class x{constructor(e={}){var a,n,t=document.createElement("div"),s=(t.className="lexarea",e.id&&(t.id=e.id),e.className&&(t.className+=" "+e.className),e.width||"calc( 100% )"),i=e.height||"100%",s=(this.setLimitBox(e.minWidth,e.minHeight,e.maxWidth,e.maxHeight),s.constructor==Number&&(s+="px"),i.constructor==Number&&(i+="px"),t.style.width=s,t.style.height=i,this.offset=0,this.root=t,this.size=[this.root.offsetWidth,this.root.offsetHeight],this.sections=[],this.panels=[],e.skipAppend||document.getElementById("lexroot").appendChild(this.root),e.overlay);function l(e){switch(a.type){case"right":var t=n[0]-e.x,s=a.root.offsetWidth+t;a.root.style.width=s+"px";break;case"left":t=n[0]-e.x,s=Math.min(document.body.clientWidth-y.DEFAULT_SPLITBAR_SIZE,a.root.offsetWidth-t);a.root.style.width=s+"px",a.splitBar.style.left=s+y.DEFAULT_SPLITBAR_SIZE/2+"px";break;case"top":t=n[1]-e.y,s=Math.min(document.body.clientHeight-y.DEFAULT_SPLITBAR_SIZE,a.root.offsetHeight-t);a.root.style.height=s+"px",a.splitBar.style.top=s+y.DEFAULT_SPLITBAR_SIZE/2+"px";break;case"bottom":t=n[1]-e.y,s=a.root.offsetHeight+t;a.root.style.height=s+"px"}n[0]=e.x,n[1]=e.y,e.stopPropagation(),e.preventDefault(),a.onresize&&a.onresize(a.root.getBoundingClientRect())}function r(e){var t=a.root.ownerDocument;t.removeEventListener("mousemove",l),t.removeEventListener("mouseup",r),document.body.classList.remove("nocursor"),a.splitBar.classList.remove("nocursor")}s&&(this.root.classList.add("overlay-"+s),e.left?this.root.style.left=e.left:e.right?this.root.style.right=e.right:e.top?this.root.style.top=e.top:e.bottom&&(this.root.style.bottom=e.bottom),(e.draggable??!0)&&p(t,e),e.resizeable&&t.classList.add("resizeable"),e.resize)&&(this.splitBar=document.createElement("div"),i="left"==s||"right"==s?"horizontal":"vertical",this.type=s,this.splitBar.className="lexsplitbar "+i,"right"==s?(this.splitBar.style.width=y.DEFAULT_SPLITBAR_SIZE+"px",this.splitBar.style.left=-y.DEFAULT_SPLITBAR_SIZE/2+"px"):"left"==s?(t=Math.min(document.body.clientWidth-y.DEFAULT_SPLITBAR_SIZE,this.root.clientWidth),this.splitBar.style.width=y.DEFAULT_SPLITBAR_SIZE+"px",this.splitBar.style.left=t+y.DEFAULT_SPLITBAR_SIZE/2+"px"):"top"==s?(e=Math.min(document.body.clientHeight-y.DEFAULT_SPLITBAR_SIZE,this.root.clientHeight),this.splitBar.style.height=y.DEFAULT_SPLITBAR_SIZE+"px",this.splitBar.style.top=e+y.DEFAULT_SPLITBAR_SIZE/2+"px"):"bottom"==s&&(this.splitBar.style.height=y.DEFAULT_SPLITBAR_SIZE+"px",this.splitBar.style.top=-y.DEFAULT_SPLITBAR_SIZE/2+"px"),this.splitBar.addEventListener("mousedown",function(e){var t=a.root.ownerDocument;t.addEventListener("mousemove",l),t.addEventListener("mouseup",r),n[0]=e.x,n[1]=e.y,e.stopPropagation(),e.preventDefault(),document.body.classList.add("nocursor"),a.splitBar.classList.add("nocursor")}),this.root.appendChild(this.splitBar),a=this,n=[0,0])}attach(e){if(this.sections.length)this.sections[1].attach(e);else{if(!e)throw"no content to attach";(e.parent=this).root.appendChild(e.root||e)}}split(t={}){this.sections.length&&(this.offset=this.root.childNodes[0].offsetHeight,this._root=this.sections[0].root,this.root=this.sections[1].root);var s=t.type||"horizontal",a=t.sizes||["50%","50%"],e="auto"===t.sizes;if(!a[1]){let e=a[0];var n=t.top||0;e.constructor==Number&&(e=e+n+"px"),a[1]="calc( 100% - "+e+" )"}var i,l,n=new x({skipAppend:!0,className:"split"+(t.menubar||t.sidebar?"":" origin")}),r=new x({skipAppend:!0,className:"split"}),o=(n.parentArea=this,r.parentArea=this,t.minimizable??!1),t=(t.resize??!0)||o,c="0px";return this.offset=0,t&&(this.resize=t,this.splitBar=document.createElement("div"),this.splitBar.className="lexsplitbar "+s,"horizontal"==s?this.splitBar.style.width=y.DEFAULT_SPLITBAR_SIZE+"px":this.splitBar.style.height=y.DEFAULT_SPLITBAR_SIZE+"px",this.splitBar.addEventListener("mousedown",function(e){var t=l.root.ownerDocument;t.addEventListener("mousemove",d),t.addEventListener("mouseup",h),e.stopPropagation(),e.preventDefault(),document.body.classList.add("nocursor"),l.splitBar.classList.add("nocursor")}),c=y.DEFAULT_SPLITBAR_SIZE/2+"px",o)&&(this.splitExtended=!1,r.root.addEventListener("animationend",e=>{var t=getComputedStyle(r.root).opacity;r.root.classList.remove(e.animationName+"-"+s),r.root.style.opacity=t,w(r.root)}),this.splitBar.addEventListener("contextmenu",e=>{e.preventDefault(),z(null,e,e=>{e.add("Extend",{disabled:this.splitExtended,callback:()=>{this.extend()}}),e.add("Reduce",{disabled:!this.splitExtended,callback:()=>{this.reduce()}})})})),"horizontal"==s?(o=a[0],i=a[1],o.constructor==Number&&(o+="px"),i.constructor==Number&&(i+="px"),n.root.style.width="calc( "+o+" - "+c+" )",n.root.style.height="calc(100% - 0px)",r.root.style.width="calc( "+i+" - "+c+" )",r.root.style.height="calc(100% - 0px)",this.root.style.display="flex"):(n.root.style.width="100%",r.root.style.width="100%",e?(n.root.style.height="auto",new ResizeObserver(e=>{for(var t of e){t=t.contentRect;r.root.style.height="calc(100% - "+(t.height+4)+"px )"}}).observe(n.root)):(o=a[0],i=a[1],o.constructor==Number&&(o+="px"),i.constructor==Number&&(i+="px"),n.root.style.width="100%",n.root.style.height="auto"==o?o:"calc( "+o+" - "+c+" )",r.root.style.height="auto"==i?i:"calc( "+i+" - "+c+" )")),this.root.appendChild(n.root),t&&this.root.appendChild(this.splitBar),this.root.appendChild(r.root),this.sections=[n,r],this.type=s,this._update(),t&&(l=this),this.sections;function d(e){var t;"horizontal"==l.type?l._moveSplit(-e.movementX):l._moveSplit(-e.movementY);for(t of l.root.querySelectorAll(".lexwidget")){var s=t.jsInstance;s.onresize&&s.onresize()}e.stopPropagation(),e.preventDefault()}function h(e){var t=l.root.ownerDocument;t.removeEventListener("mousemove",d),t.removeEventListener("mouseup",h),document.body.classList.remove("nocursor"),l.splitBar.classList.remove("nocursor")}}setLimitBox(e=0,t=0,s=1/0,a=1/0){this.minWidth=e,this.minHeight=t,this.maxWidth=s,this.maxHeight=a}setSize(e){let[t,s]=e;null!=t&&t.constructor==Number&&(t+="px"),null!=s&&s.constructor==Number&&(s+="px"),t&&(this.root.style.width=t),s&&(this.root.style.height=s),this.onresize&&this.onresize(this.root.getBoundingClientRect()),b(()=>{this.size=[this.root.clientWidth,this.root.clientHeight],this.propagateEvent("onresize")},150)}extend(){var e,t;this.splitExtended||([e,t]=this.sections,this.splitExtended=!0,"vertical"==this.type?(this.offset=t.root.offsetHeight,t.root.classList.add("fadeout-vertical"),this._moveSplit(-1/0,!0)):(this.offset=t.root.offsetWidth-8,t.root.classList.add("fadeout-horizontal"),this._moveSplit(-1/0,!0,8)),b(()=>this.propagateEvent("onresize"),150))}reduce(){var e,t;this.splitExtended&&(this.splitExtended=!1,[e,t]=this.sections,"vertical"==this.type?t.root.classList.add("fadein-vertical"):t.root.classList.add("fadein-horizontal"),this._moveSplit(this.offset),b(()=>this.propagateEvent("onresize"),150))}hide(){this.root.classList.add("hidden")}show(){this.root.classList.remove("hidden")}toggle(e){this.root.classList.toggle("hidden",e)}propagateEvent(e){for(var t=0;t<this.sections.length;t++){var s=this.sections[t];s[e]&&s[e].call(this,s.root.getBoundingClientRect()),s.propagateEvent(e)}}addPanel(e){e=new M(e);return this.attach(e),this.panels.push(e),e}addMenubar(e,t={}){var s=new n(t),[e,a]=(e&&e(s),y.menubars.push(s),this.split({type:"vertical",sizes:[48,null],resize:!1,menubar:!0}));return s.siblingArea=a,e.attach(s),e.isMenubar=!0,(t.sticky??!0)&&e.root.classList.add("sticky"),s}addSidebar(e,t={}){var s=new a(t),e=(e&&e(s),s.update(),y.menubars.push(s),t.width??"16rem"),[t,e]=this.split({type:"horizontal",sizes:[e,null],resize:!1,sidebar:!0});return s.siblingArea=e,t.attach(s),t.isSidebar=!0,s}addOverlayButtons(n,i={}){if(this.sections.length)this.sections[1].addOverlayButtons(n,i);else{console.assert(n.constructor==Array&&n.length),this.root.style.position="relative",i.className="lexoverlaybuttons";let l=this.addPanel(i),a=null,e=document.createElement("div"),t=(e.className="lexoverlaybuttonscontainer",e.appendChild(l.root),this.attach(e),i.float);if(t)for(var r=0;r<t.length;r++)switch(t[r]){case"h":break;case"v":e.className+=" vertical";break;case"t":break;case"m":e.className+=" middle";break;case"b":e.className+=" bottom";break;case"l":break;case"c":e.className+=" center";break;case"r":e.className+=" right"}let s=function(n,e,t){var s={width:"auto",selectable:n.selectable,selected:n.selected,icon:n.icon,img:n.img,className:n.class};e&&(a||((a=document.createElement("div")).className="lexoverlaygroup",l.queuedContainer=a),s.parent=a);let i=n.callback;if(n.options)l.addSelect(null,n.options,n.name,i,s);else{let a=l.addButton(null,n.name,function(e,t){var s;n.selectable&&(n.group?(s=n.selected,n.group.forEach(e=>e.selected=!1),n.selected=!s):n.selected=!n.selected),i(e,t,a.root)},s)}a&&t&&(l.root.appendChild(a),a=null,l.clearQueue())};var o,c;l.clear();for(c of n)if(c.constructor===Array)for(let e=0;e<c.length;++e){var d=c[e];d.group=c,s(d,!0,e==c.length-1)}else s(c);t&&(o=0,l.root.childNodes.forEach(e=>{o+=e.offsetHeight}),e.className.includes("middle"))&&(e.style.top="-moz-calc( 50% - "+.5*o+"px )",e.style.top="-webkit-calc( 50% - "+.5*o+"px )",e.style.top="calc( 50% - "+.5*o+"px )")}}addTabs(e={}){var t=new l(this,e);return e.folding&&(this.parentArea._disableSplitResize(),this.root.style.paddingTop="4px"),t}_moveSplit(t,s=!1,a=0){if(!this.type)throw"No split area";if(void 0!==t){var n,i=this.sections[0],l=i.root,r=(l.classList.contains("origin")||(l=l.parentElement),this.sections[1]),o=r.root,c=" - "+y.DEFAULT_SPLITBAR_SIZE+"px";let e=null;s||(e=l.style.transition,l.style.transition=o.style.transition="none",w(l),w(o)),"horizontal"==this.type?(n=Math.max(o.offsetWidth+t,parseInt(r.minWidth)),l.style.width="-moz-calc( 100% - "+(n=a?a:n)+"px "+c+" )",l.style.width="-webkit-calc( 100% - "+n+"px "+c+" )",l.style.width="calc( 100% - "+n+"px "+c+" )",l.style.minWidth=parseInt(i.minWidth)+"px",o.style.width=n+"px",i.maxWidth!=1/0&&(o.style.minWidth="calc( 100% - "+parseInt(i.maxWidth)+"px )")):(n=Math.max(o.offsetHeight+t+r.offset,parseInt(r.minHeight)),l.style.height="-moz-calc( 100% - "+(n=a?a:n)+"px "+c+" )",l.style.height="-webkit-calc( 100% - "+n+"px "+c+" )",l.style.height="calc( 100% - "+n+"px "+c+" )",l.style.minHeight=i.minHeight+"px",o.style.height=n-r.offset+"px"),s||(l.style.transition=o.style.transition=e),this._update(),this.propagateEvent("onresize")}}_disableSplitResize(){this.resize=!1,this.splitBar.remove(),delete this.splitBar}_update(){var e=this.root.getBoundingClientRect();this.size=[e.width,e.height];for(var t=0;t<this.sections.length;t++)this.sections[t]._update()}}function w(e){e.offsetHeight}y.Area=x;class l{static TAB_SIZE=28;static TAB_ID=0;constructor(s,e={}){this.onclose=e.onclose;var t=document.createElement("div"),a=(t.className="lexareatabs "+(e.fit?"fit":"row"),e.folding??!1);a&&t.classList.add("folding");let i=this;t.addEventListener("dragenter",function(e){e.preventDefault(),this.classList.add("dockingtab")}),t.addEventListener("dragleave",function(e){e.preventDefault(),this.contains(e.relatedTarget)||this.classList.remove("dockingtab")}),t.addEventListener("drop",function(e){e.preventDefault();var t,s,a=e.dataTransfer.getData("source"),n=document.getElementById(a);n&&(s=(t=e.target).getBoundingClientRect(),e.offsetX<.5*s.width?this.insertBefore(n,t):t.nextElementSibling?this.insertBefore(n,t.nextElementSibling):this.appendChild(n),e=document.getElementById(a+"_content"),i.area.attach(e),this.classList.remove("dockingtab"),y.emit("@on_tab_docked"),n.instance=i,n.click(),i.tabs[n.dataset.name]=e)}),s.root.classList.add("lexareatabscontainer"),s.split({type:"vertical",sizes:e.sizes??"auto",resize:!1,top:6}),s.sections[0].attach(t),this.area=s.sections[1],this.area.root.className+=" lexareatabscontent",this.selected=null,this.root=t,this.tabs={},this.tabDOMs={},e.fit&&((t=document.createElement("span")).className="lexareatab thumb",this.thumb=t,this.root.appendChild(t),new ResizeObserver(e=>{var t,s=this.thumb.item;s&&(t=this.thumb.style.transition,this.thumb.style.transition="none",this.thumb.style.transform="translate( "+s.childIndex*s.offsetWidth+"px )",this.thumb.style.width=s.offsetWidth-5+"px",this.thumb.style.height=s.offsetHeight-6+"px",w(this.thumb),this.thumb.style.transition=t)}).observe(this.area.root)),a&&(this.folded=!0,"up"==(this.folding=a)&&s.root.insertChildAtIndex(s.sections[1].root,0),new ResizeObserver(e=>{for(var t of e){t=t.contentRect;s.parentArea.sections[0].root.style.height="calc(100% - "+(42+t.height)+"px )"}}).observe(this.area.root),this.area.root.classList.add("folded"))}add(e,t,s={}){let a=s.selected??!1,n=(a&&(this.root.querySelectorAll("span").forEach(e=>e.classList.remove("selected")),this.area.root.querySelectorAll(".lextabcontent").forEach(e=>e.style.display="none")),a=!Object.keys(this.tabs).length&&!this.folding||a,t.root||t);n.originalDisplay=n.style.display,n.style.display=a?n.originalDisplay:"none",n.classList.add("lextabcontent"),s.icon&&(s.icon.includes("fa-")?s.icon="<i class='"+s.icon+"'></i>":s.icon="<img src='https://raw.githubusercontent.com/jxarco/lexgui.js/master/"+s.icon+"'>");let i=document.createElement("span");i.dataset.name=e,i.className="lexareatab"+(a?" selected":""),i.innerHTML=(s.icon??"")+e,i.id=e.replace(/\s/g,"")+l.TAB_ID++,i.title=s.title??"",i.selected=a??!1,i.fixed=s.fixed,i.instance=this,n.id=i.id+"_content",i.selected&&(this.selected=e),y.addSignal("@on_tab_docked",i,function(){1==this.parentElement.childNodes.length&&this.parentElement.childNodes[0].click()}),i.addEventListener("click",e=>{var t;e.preventDefault(),e.stopPropagation(),i.fixed||(t=i.selected,i.parentElement.querySelectorAll("span").forEach(e=>e.selected=!1),i.selected=!t,i.parentElement.querySelectorAll("span").forEach(e=>e.classList.remove("selected")),i.classList.toggle("selected",this.folding&&i.selected),i.instance.area.root.querySelectorAll(".lextabcontent").forEach(e=>e.style.display="none"),n.style.display=n.originalDisplay,i.instance.selected=i.dataset.name),this.folding&&(this.folded=i.selected,this.area.root.classList.toggle("folded",!this.folded)),s.onSelect&&s.onSelect(e,i.dataset.name),this.thumb&&(this.thumb.style.transform="translate( "+i.childIndex*i.offsetWidth+"px )",this.thumb.style.width=i.offsetWidth-5+"px",this.thumb.style.height=i.offsetHeight-6+"px",this.thumb.item=i)}),i.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation(),s.onContextMenu&&s.onContextMenu(e,i.dataset.name)}),i.addEventListener("mouseup",e=>{e.preventDefault(),e.stopPropagation(),1==e.button&&this.delete(i.dataset.name)}),i.setAttribute("draggable",!0),i.addEventListener("dragstart",function(e){1==this.parentElement.childNodes.length?e.preventDefault():e.dataTransfer.setData("source",e.target.id)}),i.childIndex=this.root.childElementCount-1,this.root.appendChild(i),this.area.attach(n),this.tabDOMs[e]=i,this.tabs[e]=t,setTimeout(()=>{s.onCreate&&s.onCreate.call(this,this.area.root.getBoundingClientRect()),a&&this.thumb&&(this.thumb.style.transform="translate( "+i.childIndex*i.offsetWidth+"px )",this.thumb.style.width=i.offsetWidth-5+"px",this.thumb.style.height=i.offsetHeight-6+"px",this.thumb.item=i)},10)}select(e){this.tabDOMs[e]&&this.tabDOMs[e].click()}delete(e){var t=this.tabDOMs[e];t&&!t.fixed&&(this.onclose&&this.onclose(e),this.tabDOMs[e].remove(),delete this.tabDOMs[e],this.tabs[e].remove(),delete this.tabs[e],t=this.root.lastChild)&&!t.fixed&&this.root.lastChild.click()}}y.Tabs=l;class n{constructor(e={}){this.root=document.createElement("div"),this.root.className="lexmenubar",e.float&&(this.root.style.justifyContent=e.float),this.items=[],this.buttons=[],this.icons={},this.shorts={}}_resetMenubar(e){this.root.querySelectorAll(".lexmenuentry").forEach(e=>{e.classList.remove("selected"),e.built=!1}),y.root.querySelectorAll(".lexmenubox").forEach(e=>e.remove()),this.focused=e??!1}_createSubmenu(e,t,s,l){let r=document.createElement("div"),a=(r.className="lexmenubox",r.tabIndex="0",((s.currentMenu=r).parentEntry=s).classList.contains("lexmenuboxentry"));a&&(r.dataset.submenu=!0),r._updatePosition=()=>{let t=r.style.transition;r.style.transition="none",w(r),b(()=>{var e=s.getBoundingClientRect();e.x+=document.scrollingElement.scrollLeft,e.y+=document.scrollingElement.scrollTop,r.style.left=(a?e.x+e.width:e.x)+"px",r.style.top=(a?e.y:e.y+e.height-4)+"px",r.style.transition=t})},r._updatePosition(),b(()=>{r.dataset.open=!0},10),y.root.appendChild(r);for(var o=0;o<e[t].length;++o){let s=e[t][o],a=Object.keys(s)[0];var c,d,h=s[a].length,u="checkbox"==s.type;let n=document.createElement("div"),i=(n.tabIndex="1",n.className="lexmenuboxentry",n.className+=(o==e[t].length-1?" last":"")+(s.disabled?" disabled":""),""==a?n.className=" lexseparator":(n.id=a,(c=document.createElement("div")).innerHTML="",c.classList="lexmenuboxentrycontainer",n.appendChild(c),d=this.icons[a],u?c.innerHTML+="<input type='checkbox' >":d?c.innerHTML+="<a class='"+d+" fa-sm'></a>":(c.innerHTML+="<a class='fa-solid fa-sm noicon'></a>",c.classList.add("noicon")),c.innerHTML+="<div class='lexentryname'>"+a+"</div>"),n.querySelector("input"));i&&(i.checked=s.checked??!1,i.addEventListener("change",e=>{s.checked=i.checked;var t=s.callback;t&&(t.call(this,s.checked,a,n),this._resetMenubar()),e.stopPropagation(),e.stopImmediatePropagation()})),r.appendChild(n),""!=a&&(r.addEventListener("keydown",e=>{e.preventDefault();let t=this.shorts[a];t&&(t=1==t.length?t.toLowerCase():t)==e.key&&n.click()}),n.addEventListener("click",e=>{i&&(s.checked=!s.checked);var t=s.callback;t&&(t.call(this,i?s.checked:a,i?a:n),this._resetMenubar()),e.stopPropagation(),e.stopImmediatePropagation()}),n.addEventListener("blur",e=>{e.target&&e.target.className.includes("lexmenu")||this._resetMenubar()}),h?((u=document.createElement("a")).className="fa-solid fa-angle-right fa-xs",n.appendChild(u),n.addEventListener("mouseover",e=>{n.built||(n.built=!0,this._createSubmenu(s,a,n,++l),e.stopPropagation())}),n.addEventListener("mouseleave",e=>{n.currentMenu&&n.currentMenu!=e.toElement&&(l=-1,delete n.built,n.currentMenu.remove(),delete n.currentMenu)})):this.shorts[a]&&((d=document.createElement("div")).className="lexentryshort",d.innerText=this.shorts[a],n.appendChild(d)))}r.style.width=r.offsetWidth+"px"}add(e,i={}){i.constructor==Function&&(i={callback:i});let l=e.split("/");e=l[l.length-1];this.icons[e]=i.icon,this.shorts[e]=i.short;let r=0,o=(a,e)=>{if(null!=a){let s=null;var t,n;e.forEach(e=>{var t=Object.keys(e).find(e=>e==a);t&&(s=e[t])}),s?o(l[r++],s):((t={})[a]=[],(n=l[r++])||(t.callback=i.callback,t.disabled=i.disabled,t.type=i.type,t.checked=i.checked),e.push(t),o(n,t[a]))}};o(l[r++],this.items);for(let n of this.items){let a=Object.keys(n)[0];var c=a.replace(/\s/g,"").replaceAll(".","");if(!this.root.querySelector("#"+c)){let t=document.createElement("div"),s=(t.className="lexmenuentry",t.id=c,t.innerHTML="<span>"+a+"</span>",t.tabIndex="1","left"==i.position?this.root.prepend(t):("right"==i.position&&(t.right=!0),this.root.lastChild&&this.root.lastChild.right?this.root.lastChild.before(t):this.root.appendChild(t)),()=>{this._resetMenubar(!0),t.classList.add("selected"),t.built=!0,this._createSubmenu(n,a,t,-1)});t.addEventListener("click",()=>{var e=n.callback;e?e.call(this,a,t):(s(),this.focused=!0)}),t.addEventListener("mouseover",e=>{this.focused&&!t.built&&s()}),t.addEventListener("blur",e=>{e.relatedTarget&&e.relatedTarget.className.includes("lexmenubox")||this._resetMenubar()})}}}getButton(e){return this.buttons[e]}getSubitem(t,s){var a=s[0];for(let e=0;e<t.length;e++)if(t[e][a])return 1==s.length?t[e]:(s.splice(0,1),this.getSubitem(t[e][a],s))}getItem(e){e=e.split("/");return this.getSubitem(this.items,e)}setButtonIcon(e,a,n,i={}){if(!e)throw"Set Button Name!";let l=this.buttons[e];if(l)l.querySelector("a").className="fa-solid "+a+" lexicon";else{l=document.createElement("div");let t=i.disabled??!1,s=(l.className="lexmenubutton main"+(t?" disabled":""),l.title=e,l.innerHTML="<a class='"+a+" lexicon'></a>","right"==i.float&&(l.right=!0),this.root.lastChild&&this.root.lastChild.right?this.root.lastChild.before(l):"left"==i.float?this.root.prepend(l):this.root.appendChild(l),l.querySelector("a"));s.addEventListener("click",e=>{n&&!t&&n.call(this,s,e)}),this.buttons[e]=l}}setButtonImage(e,a,n,i={}){if(!e)throw"Set Button Name!";let l=this.buttons[e];if(l)l.querySelector("img").src=a;else{l=document.createElement("div");let t=i.disabled??!1,s=(l.className="lexmenubutton"+(t?" disabled":""),l.title=e,l.innerHTML="<a><image src='"+a+"' class='lexicon' style='height:32px;'></a>","right"==i.float&&(l.right=!0),this.root.lastChild&&this.root.lastChild.right?this.root.lastChild.before(l):"left"==i.float?this.root.prepend(l):this.root.appendChild(l),l.querySelector("a"));s.addEventListener("click",e=>{n&&!t&&n.call(this,s,e)}),this.buttons[e]=l}}addButtons(i,e={}){if(!i)throw"No buttons to add!";this.buttonContainer||(this.buttonContainer=document.createElement("div"),this.buttonContainer.className="lexmenubuttons",this.buttonContainer.classList.add(e.float??"center"),"right"==e.position&&(this.buttonContainer.right=!0),this.root.lastChild&&this.root.lastChild.right?this.root.lastChild.before(this.buttonContainer):this.root.appendChild(this.buttonContainer));for(let t=0;t<i.length;++t){let s=i[t],a=document.createElement("label");var l=s.title;let n=s.disabled??!1;a.className="lexmenubutton"+(n?" disabled":""),a.title=l??"",this.buttonContainer.appendChild(a);var r=document.createElement("a");r.className=s.icon+" lexicon",a.appendChild(r);let e=r;s.swap&&(a.classList.add("swap"),r.classList.add("swap-off"),(r=document.createElement("input")).type="checkbox",a.prepend(r),e=r,(r=document.createElement("a")).className=s.swap+" swap-on lexicon",a.appendChild(r),a.swap=function(){var e=this.querySelector("input");e.checked=!e.checked},a.setState=function(e){this.querySelector("input").checked=e}),e.addEventListener("click",e=>{var t;s.callback&&!n&&(t=a.querySelector("input"),s.callback.call(this,e,t?.checked))}),l&&(this.buttons[l]=a)}}}y.Menubar=n;class a{constructor(e={}){var t;this.root=document.createElement("div"),this.root.className="lexsidebar",this._displaySelected=e.displaySelected??!1,Object.defineProperty(a.prototype,"displaySelected",{get:function(){return this._displaySelected},set:function(e){this._displaySelected=e,this._displaySelected||this.root.querySelectorAll(".lexsidebarentry").forEach(e=>e.classList.remove("selected"))},enumerable:!0,configurable:!0}),this.collapsable=e.collapsable??!0,this._collapseWidth=e.collapseToIcons??!0?"58px":"0px",this.collapsed=!1,this.filterString="",b(()=>{this.root.parentElement.ogWidth=this.root.parentElement.style.width,this.root.parentElement.style.transition="width 0.25s ease-out",this.resizeObserver=new ResizeObserver(e=>{for(var t of e)this.siblingArea.setSize(["calc(100% - "+t.contentRect.width+"px )",null])})},10),e.skipHeader||(this.header=e.header??this._generateDefaultHeader(e),console.assert(this.header.constructor===HTMLDivElement,"Use an HTMLDivElement to build your custom header"),this.header.className="lexsidebarheader",this.root.appendChild(this.header),this.collapsable&&(t=y.makeIcon("sidebar","Toggle Sidebar","toggler"),this.header.appendChild(t),t.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.toggleCollapsed()}))),e.filter&&((t=new M).addText(null,"",(e,t)=>{this.filterString=e,this.update()},{placeholder:"Search...",icon:"fa-solid fa-magnifying-glass"}),this.filter=t.root.childNodes[0],this.root.appendChild(this.filter)),this.content=document.createElement("div"),this.content.className="lexsidebarcontent",this.root.appendChild(this.content),e.skipFooter||(this.footer=e.footer??this._generateDefaultFooter(e),console.assert(this.footer.constructor===HTMLDivElement,"Use an HTMLDivElement to build your custom footer"),this.footer.className="lexsidebarfooter",this.root.appendChild(this.footer)),b(()=>{var e=32+(this.header?.offsetHeight??0)+(this.filter?.offsetHeight??0)+(this.footer?.offsetHeight??0);this.content.style.height=`calc(100% - ${e}px)`},10),this.items=[],this.icons={},this.groups={}}_generateDefaultHeader(t){var e=document.createElement("div"),s=(e.addEventListener("click",e=>{this.collapsed?(e.preventDefault(),e.stopPropagation(),this.toggleCollapsed()):t.onHeaderPressed&&t.onHeaderPressed(e)}),document.createElement("span")),s=(s.className="lexavatar",e.appendChild(s),t.headerImage?((a=document.createElement("img")).src=t.headerImage,s.appendChild(a)):t.headerIcon&&(a=y.makeIcon(t.headerIcon),s.appendChild(a)),document.createElement("div")),a=(s.className="infodefault",e.appendChild(s),document.createElement("span")),a=(a.innerHTML=t.headerTitle??"",s.appendChild(a),document.createElement("span"));return a.innerHTML=t.headerSubtitle??"",s.appendChild(a),e}_generateDefaultFooter(t){let s=document.createElement("div");s.addEventListener("click",e=>{t.onFooterPressed&&t.onFooterPressed(e,s)});var e=document.createElement("span"),e=(e.className="lexavatar",s.appendChild(e),t.footerImage?((a=document.createElement("img")).src=t.footerImage,e.appendChild(a)):t.footerIcon&&(a=y.makeIcon(t.footerIcon),e.appendChild(a)),document.createElement("div")),a=(e.className="infodefault",s.appendChild(e),document.createElement("span")),a=(a.innerHTML=t.footerTitle??"",e.appendChild(a),document.createElement("span")),e=(a.innerHTML=t.footerSubtitle??"",e.appendChild(a),y.makeIcon("menu-arrows"));return s.appendChild(e),s}toggleCollapsed(e){if(this.collapsable){if(this.collapsed=e??!this.collapsed,this.collapsed?(this.root.classList.add("collapsing"),this.root.parentElement.style.width=this._collapseWidth):(this.root.classList.remove("collapsing"),this.root.classList.remove("collapsed"),this.root.parentElement.style.width=this.root.parentElement.ogWidth),!this.resizeObserver)throw"Wait until ResizeObserver has been created!";this.resizeObserver.observe(this.root.parentElement),b(()=>{this.root.classList.toggle("collapsed",this.collapsed),this.resizeObserver.unobserve(this.root.parentElement)},250)}}separator(){this.currentGroup=null,this.add("")}group(e,t){this.currentGroup=e,this.groups[e]=t}add(e,i={}){i.constructor==Function&&(i={callback:i});let l=e.split("/");e=l[l.length-1];this.icons[e]=i.icon;let r=0,o=(a,e)=>{if(null!=a){let s=null;var t,n;e.forEach(e=>{var t=Object.keys(e).find(e=>e==a);t&&(s=e[t])}),s?o(l[r++],s):((t={})[a]=[],(n=l[r++])||(t.callback=i.callback,t.group=this.currentGroup,t.options=i),e.push(t),o(n,t[a]))}};o(l[r++],this.items)}select(e){let t=e.replace(/\s/g,"").replaceAll(".","");e=this.items.find(e=>e.name===t);e&&e.dom.click()}update(){this.content.innerHTML="";for(var e of this.items)delete e.dom;for(let r of this.items){let n=r.options??{};if(!r.dom){let l=Object.keys(r)[0];if(!this.filterString.length||l.toLowerCase().includes(this.filterString.toLowerCase())){var o=l.replace(/\s/g,"").replaceAll(".","");let t=null,i=document.createElement("div");if(i.className="lexsidebarentry "+(n.className??""),i.id=r.name=o,r.group){var s=r.group.replace(/\s/g,"").replaceAll(".","");if(t=this.content.querySelector("#"+s)){if(!t.classList.contains("lexsidebargroup"))throw"Bad id: "+r.group}else{(t=document.createElement("div")).id=s,t.className="lexsidebargroup",this.content.appendChild(t);var s=document.createElement("div"),c=(s.className="lexsidebargrouptitle",t.appendChild(s),document.createElement("div"));c.innerHTML=r.group,s.appendChild(c),null!=this.groups[r.group]&&((c=document.createElement("a")).className=(this.groups[r.group].icon??"")+" lexicon",s.appendChild(c),c.addEventListener("click",e=>{this.groups[r.group].callback&&this.groups[r.group].callback(r.group,e)}))}}if(""==o){s=document.createElement("div");s.className="lexsidebarseparator",this.content.appendChild(s)}else{this.collapseContainer?(this.collapseContainer.appendChild(i),this.collapseQueue--,this.collapseQueue||delete this.collapseContainer):(t||this.content).appendChild(i);let s=document.createElement("div");i.appendChild(s),r.dom=i,"checkbox"==n.type?(r.value=n.value??!1,c=new M,r.checkbox=c.addCheckbox(null,r.value,(e,t)=>{t.preventDefault(),t.stopPropagation();var s=n.callback;r.value=e,s&&s.call(this,l,e,t)},{label:l,signal:"@checkbox_"+l}),s.appendChild(c.root.childNodes[0])):(n.icon&&((o=document.createElement("i")).className=n.icon,s.appendChild(o)),(o=document.createElement("a")).innerHTML=l,s.appendChild(o));let a=null!=n.collapsable?n.collapsable:n.collapsable||r[l].length,e=(i.addEventListener("click",e=>{var t;e.target&&e.target.classList.contains("lexcheckbox")||(a?s.querySelector(".collapser").click():((t=n.callback)&&t.call(this,l,r.value,e),r.checkbox&&(r.value=!r.value,r.checkbox.set(r.value,!0))),this.displaySelected&&(this.root.querySelectorAll(".lexsidebarentry").forEach(e=>e.classList.remove("selected")),i.classList.add("selected")))}),n.action?(o=y.makeIcon(n.action.icon??"more-horizontal",n.action.name),s.appendChild(o),o.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation();var t=n.action.callback;t&&t.call(this,l,e)})):a&&((o=document.createElement("div")).className="collapsablecontainer",Object.assign(o.style,{width:"100%",display:"none"}),y.makeCollapsible(s,o,t??this.content),this.collapseQueue=n.collapsable,this.collapseContainer=o),document.createElement("span"));if(e.className="lexsidebarentrydesc",e.innerHTML=l,i.appendChild(e),s.addEventListener("mouseenter",()=>{setTimeout(()=>{e.style.display="unset"},150)}),s.addEventListener("mouseleave",()=>{setTimeout(()=>{e.style.display="none"},150)}),r[l].length){var d=document.createElement("div");d.className="lexsidebarsubentrycontainer",a?(this.collapseContainer.appendChild(d),delete this.collapseContainer):(t?(d.classList.add("collapsablecontainer"),t):this.content).appendChild(d);for(let e=0;e<r[l].length;++e){var h=r[l][e];let a=h.options??{},n=Object.keys(h)[0];if(!this.filterString.length||n.toLowerCase().includes(this.filterString.toLowerCase())){let s=document.createElement("div");s.innerHTML=`<span>${n}</span>`,a.action&&(h=y.makeIcon(a.action.icon??"more-horizontal",a.action.name),s.appendChild(h),h.addEventListener("click",e=>{e.preventDefault(),e.stopImmediatePropagation();var t=a.action.callback;t&&t.call(this,n,e)})),s.className="lexsidebarentry",s.id=n,d.appendChild(s),s.addEventListener("click",e=>{var t=a.callback;t&&t.call(this,n,s,e),this.displaySelected&&(this.root.querySelectorAll(".lexsidebarentry").forEach(e=>e.classList.remove("selected")),i.classList.add("selected"))})}}}}}}}}}y.SideBar=a;class C{static NONE=0;static TEXT=1;static TEXTAREA=2;static BUTTON=3;static SELECT=4;static CHECKBOX=5;static TOGGLE=6;static RADIO=7;static BUTTONS=8;static COLOR=9;static RANGE=10;static NUMBER=11;static TITLE=12;static VECTOR=13;static TREE=14;static PROGRESS=15;static FILE=16;static LAYERS=17;static ARRAY=18;static LIST=19;static TAGS=20;static CURVE=21;static CARD=22;static IMAGE=23;static CONTENT=24;static CUSTOM=25;static SEPARATOR=26;static KNOB=27;static SIZE=28;static PAD=29;static FORM=30;static DIAL=31;static COUNTER=32;static TABLE=33;static TABS=34;static LABEL=35;static BLANK=36;static NO_CONTEXT_TYPES=[C.BUTTON,C.LIST,C.FILE,C.PROGRESS];constructor(e,s,a,n={}){this.type=e,this.name=s,this.options=n,this._initialValue=a;var i=document.createElement("div");if(i.className="lexwidget",n.id&&(i.id=n.id),n.title&&(i.title=n.title),n.className&&(i.className+=" "+n.className),e!=C.TITLE&&(n.width&&(i.style.width=i.style.minWidth=n.width),n.maxWidth&&(i.style.maxWidth=n.maxWidth),n.minWidth&&(i.style.minWidth=n.minWidth),n.height)&&(i.style.height=i.style.minHeight=n.height),null!=s){if(!n.hideName){e=document.createElement("div");e.className="lexwidgetname",n.justifyName&&e.classList.add("float-"+n.justifyName),e.innerHTML=s,e.title=n.title??e.innerHTML,e.style.width=n.nameWidth||y.DEFAULT_NAME_WIDTH,i.appendChild(e),i.domName=e;let t=this;e.addEventListener("contextmenu",function(e){e.preventDefault(),t.oncontextmenu(e)}),n.skipReset||null==a||this._addResetProperty(e,function(e){t.set(t._initialValue,!1,e),this.style.display="none"})}}else n.hideName=!0;n.signal&&y.addSignal(n.signal,this),this.root=i,(this.root.jsInstance=this).options=n}static _dispatchEvent(e,t,s,a,n){t=new CustomEvent(t,{detail:s,bubbles:a,cancelable:n});e.dispatchEvent(t)}_addResetProperty(e,t){var s=document.createElement("a");return s.style.display="none",s.style.marginRight="6px",s.className="lexicon fa fa-rotate-left",s.addEventListener("click",t),e.appendChild(s),s}_canPaste(){return this.type===C.CUSTOM?void 0!==navigator.clipboard.customIdx&&this.customIdx==navigator.clipboard.customIdx:navigator.clipboard.type===this.type}_trigger(e,t,s=this){t&&t.call(s,e.value,e.domEvent,e.name)}value(){if(this.onGetValue)return this.onGetValue();console.warn("Can't get value of "+this.typeName())}set(e,t,s){var a,n;if(this.onSetValue)return(a=this.root.querySelector(".lexwidgetname .lexicon"))&&(a.style.display=e!=this.value()?"block":"none",n=e.constructor===Array?((e,t)=>{if(e!==t){if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(e[s]!==t[s])return!1}return!0})(e,this._initialValue):e==this._initialValue,a.style.display=n?"none":"block"),this.onSetValue(e,t??!1,s);console.warn("Can't set value of "+this.typeName())}oncontextmenu(e){C.NO_CONTEXT_TYPES.includes(this.type)||z(this.typeName(),e,e=>{e.add("Copy",()=>{this.copy()}),e.add("Paste",{disabled:!this._canPaste(),callback:()=>{this.paste()}})})}copy(){navigator.clipboard.type=this.type,navigator.clipboard.customIdx=this.customIdx,navigator.clipboard.data=this.value(),navigator.clipboard.writeText(navigator.clipboard.data)}paste(){this._canPaste()&&this.set(navigator.clipboard.data)}typeName(){switch(this.type){case C.TEXT:return"Text";case C.TEXTAREA:return"TextArea";case C.BUTTON:return"Button";case C.SELECT:return"Select";case C.CHECKBOX:return"Checkbox";case C.TOGGLE:return"Toggle";case C.RADIO:return"Radio";case C.COLOR:return"Color";case C.RANGE:return"Range";case C.NUMBER:return"Number";case C.VECTOR:return"Vector";case C.TREE:return"Tree";case C.PROGRESS:return"Progress";case C.FILE:return"File";case C.LAYERS:return"Layers";case C.ARRAY:return"Array";case C.LIST:return"List";case C.TAGS:return"Tags";case C.CURVE:return"Curve";case C.KNOB:return"Knob";case C.SIZE:return"Size";case C.PAD:return"Pad";case C.FORM:return"Form";case C.DIAL:return"Dial";case C.COUNTER:return"Counter";case C.TABLE:return"Table";case C.TABS:return"Tabs";case C.LABEL:return"Label";case C.BLANK:return"Blank";case C.CUSTOM:return this.customName}console.error("Unknown Widget type: "+this.type)}refresh(){}}y.Widget=C,y.ADD_CUSTOM_WIDGET=function(p,m={}){let e=E();M.prototype["add"+p]=function(n,i,l){let r=new C(C.CUSTOM,n,null,m),o=(this._attachWidget(r),r.customName=p,r.customIdx=e,r.onGetValue=()=>i,r.onSetValue=(e,t,s)=>{i=e,u(),o.querySelector(".lexcustomitems").toggleAttribute("hidden",!1),t||r._trigger(new L(n,i,s),l)},r.root);o.style.flexWrap="wrap";let c,d,h=m.default??{},u=()=>{i&&(r.instance=i=Object.assign(v(h),i)),c&&c.remove(),d&&d.remove(),(c=document.createElement("div")).className="lexcustomcontainer",c.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";var e="<a class='fa-solid "+(m.icon??"fa-cube")+"' style='float:left'></a>",e=(e=e+(p+(i?"":" [empty]"))+("<a class='fa-solid "+(i?"fa-bars-staggered":" ")+" menu' style='float:right; width:5%;'></a>"),this.addButton(null,e,(e,t)=>{i?o.querySelector(".lexcustomitems").toggleAttribute("hidden"):z(null,t,e=>{e.add("New "+p,()=>{i={},u(),o.querySelector(".lexcustomitems").toggleAttribute("hidden",!1)})})},{buttonClass:"custom"}));if(c.appendChild(e.root),i&&e.root.querySelector("a.menu").addEventListener("click",e=>{e.stopImmediatePropagation(),e.stopPropagation(),z(null,e,e=>{e.add("Clear",()=>{i=null,u()})})}),(d=document.createElement("div")).className="lexcustomitems",d.toggleAttribute("hidden",!0),o.appendChild(c),o.appendChild(d),i){this.queue(d);var t,s=(e,t,s)=>{i[e]=t,r._trigger(new L(n,i,s),l)};for(t in h){var a=i[t]??h[t];switch(a.constructor){case String:"#"===a[0]?this.addColor(t,a,s.bind(this,t)):this.addText(t,a,s.bind(this,t));break;case Number:this.addNumber(t,a,s.bind(this,t));break;case Boolean:this.addCheckbox(t,a,s.bind(this,t));break;case Array:4<a.length?this.addArray(t,a,s.bind(this,t)):this._addVector(a.length,t,a,s.bind(this,t))}}this.clearQueue()}};u()}};class B{constructor(e,t,s){if(this.domEl=e,this.data=t,this.onevent=s.onevent,this.options=s,this.selected=[],t.constructor===Object)this._create_item(null,t);else for(var a of t)this._create_item(null,a)}_create_item(e,i,t=0,s){let l=this;var a=this.domEl.querySelector("#lexnodetree_filter");if(i.children=i.children??[],a&&!i.id.includes(a.value)||null!=s&&s!=i.id){for(var n=0;n<i.children.length;++n)this._create_item(i,i.children[n],t+1,s);return}let r=this.domEl.querySelector("ul"),o=(i.visible=i.visible??!0,i.parent=e,0<i.children.length);a=-1<this.selected.indexOf(i)||i.selected;if(this.options.onlyFolders){let t=!1;i.children.forEach(e=>t|="folder"==e.type),o=!!t}let c=document.createElement("li"),d=(c.className="lextreeitem datalevel"+t+(o?" parent":"")+(a?" selected":""),c.id=y.getSupportedDOMName(i.id),c.tabIndex="0",this.options.skip_default_icon??!0?"":"fa-solid fa-square");o&&(d=i.closed?"fa-solid fa-caret-right":"fa-solid fa-caret-down"),c.innerHTML="<a class='"+d+" hierarchy'></a>",d=i.icon,i.icon&&(i.icon.includes("fa-")?c.innerHTML+="<a class='"+i.icon+" tree-item-icon'></a>":c.innerHTML+="<img src='https://raw.githubusercontent.com/jxarco/lexgui.js/master/"+i.icon+"'>"),c.innerHTML+=i.rename?"":i.id,c.setAttribute("draggable",!0),c.style.paddingLeft=(o?0:3)+(3+15*(t+1))+"px",r.appendChild(c),c.addEventListener("click",e=>{var t;h?h=!1:(e.shiftKey||(r.querySelectorAll("li").forEach(e=>{e.classList.remove("selected")}),this.selected.length=0),-1<(t=this.selected.indexOf(i))?(c.classList.remove("selected"),this.selected.splice(t,1)):(c.classList.add("selected"),this.selected.push(i)),o&&1<i.id.length&&(i.closed=!1,l.onevent&&(t=new m(m.NODE_CARETCHANGED,i,i.closed),l.onevent(t)),l.frefresh(i.id)),l.onevent&&((t=new m(m.NODE_SELECTED,e.shiftKey?this.selected:i)).multiple=e.shiftKey,l.onevent(t)))}),c.addEventListener("dblclick",function(){var e;(l.options.rename??!0)&&(i.rename=!0,l.refresh()),l.onevent&&(e=new m(m.NODE_DBLCLICKED,i),l.onevent(e))}),c.addEventListener("contextmenu",s=>{if(s.preventDefault(),l.onevent){let t=new m(m.NODE_CONTEXTMENU,1<this.selected.length?this.selected:i,s);t.multiple=1<this.selected.length,y.addContextMenu(t.multiple?"Selected Nodes":t.node.id,t.value,e=>{t.panel=e}),l.onevent(t),1==(this.options.addDefault??!1)&&(t.panel.items&&t.panel.add(""),t.panel.add("Select Children",()=>{let s=e=>{if(!e.closed)for(var t of e.children??[])t&&(this.domEl.querySelector("#"+t.id).classList.add("selected"),this.selected.push(t),s(t))};s(i)}),t.panel.add("Delete",{callback:()=>{var e,t;i.parent&&(l.onevent&&(e=new m(m.NODE_DELETED,i,s),l.onevent(e)),t=(e=i.parent.children).indexOf(i),e.splice(t,1),this.refresh())}}))}}),c.addEventListener("keydown",e=>{if(!i.rename)if(e.preventDefault(),"Delete"==e.key){var t;l.onevent&&((n=new m(m.NODE_DELETED,1<this.selected.length?this.selected:i,e)).multiple=1<this.selected.length,l.onevent(n));for(t of this.selected){var s=t.parent.children,a=s.indexOf(t);s.splice(a,1)}this.selected.length=0,this.refresh()}else{var n;("ArrowUp"==e.key||"ArrowDown"==e.key)&&(n=1<this.selected.length?"ArrowUp"==e.key?this.selected.shift():this.selected.pop():this.selected[0],n=this.domEl.querySelector("#"+y.getSupportedDOMName(n.id)),e="ArrowUp"==e.key?n.previousSibling:n.nextSibling)&&e.click()}});a=document.createElement("input");a.toggleAttribute("hidden",!i.rename),a.value=i.id,c.appendChild(a),i.rename&&(c.classList.add("selected"),a.focus()),a.addEventListener("keyup",function(e){var t;"Enter"==e.key?(this.value=this.value.replace(/\s/g,"_"),l.onevent&&(t=new m(m.NODE_RENAMED,i,this.value),l.onevent(t)),i.id=y.getSupportedDOMName(this.value),delete i.rename,l.frefresh(i.id),r.querySelector("#"+i.id).classList.add("selected")):"Escape"==e.key&&(delete i.rename,l.frefresh(i.id))}),a.addEventListener("blur",function(e){delete i.rename,l.refresh()}),(this.options.draggable??!0)&&(e&&c.addEventListener("dragstart",e=>{window.__tree_node_dragged=i}),c.addEventListener("dragover",e=>{e.preventDefault()},!1),c.addEventListener("dragenter",e=>{e.target.classList.add("draggingover")}),c.addEventListener("dragleave",e=>{e.target.classList.remove("draggingover")}),c.addEventListener("drop",e=>{e.preventDefault();let t=window.__tree_node_dragged;if(t){var s,e=i;if(t.id==e.id)console.warn("Cannot parent node to itself!");else{let n=function(e,t){var s,a=!1;for(s of t.children){if(s.id==e.id)return!0;a|=n(e,s)}return a};n(e,t)?console.warn("Cannot parent node to a current child!"):(l.onevent&&(s=new m(m.NODE_DRAGGED,t,e),l.onevent(s)),s=t.parent.children.findIndex(e=>e.id==t.id),s=t.parent.children.splice(s,1),e.children.push(s[0]),l.refresh(),delete window.__tree_node_dragged)}}}));let h=!1;o&&c.querySelector("a.hierarchy").addEventListener("click",function(e){h=!0,e.stopImmediatePropagation(),e.stopPropagation(),i.closed=!i.closed,l.onevent&&(e=new m(m.NODE_CARETCHANGED,i,i.closed),l.onevent(e)),l.frefresh(i.id)});var u=document.createElement("div");if(c.appendChild(u),i.actions)for(let e=0;e<i.actions.length;++e){let t=i.actions[e],s=document.createElement("a");s.className="lexicon "+t.icon,s.title=t.name,s.addEventListener("click",function(e){t.callback(i,s),e.stopPropagation()}),u.appendChild(s)}if(i.skipVisibility||((a=document.createElement("a")).className="lexicon fa-solid fa-eye"+(i.visible?"":"-slash"),a.title="Toggle visible",a.addEventListener("click",function(e){e.stopPropagation(),i.visible=void 0!==i.visible&&!i.visible,this.className="lexicon fa-solid fa-eye"+(i.visible?"":"-slash"),l.onevent&&(e=new m(m.NODE_VISIBILITY,i,i.visible),l.onevent(e))}),u.appendChild(a)),null!=s&&i.id==s&&(this.selected=[i],c.click()),!i.closed)for(n=0;n<i.children.length;++n){var p=i.children[n];this.options.onlyFolders&&"folder"!=p.type||this._create_item(i,p,t+1)}}refresh(e,t){this.data=e??this.data,this.domEl.querySelector("ul").innerHTML="",this._create_item(null,this.data,0,t)}frefresh(e){this.refresh();e=this.domEl.querySelector("#"+e);e&&e.focus()}select(e){this.refresh(null,e)}}class i extends C{constructor(e,t){super(C.BLANK),this.root.style.width=e??"auto",this.root.style.height=t??"8px"}}y.Blank=i;class r extends C{constructor(e,t={}){console.assert(e,"Can't create Title Widget without text!"),super(C.TITLE,null,null,t),this.root.className="lextitle",t.icon&&((s=document.createElement("a")).className=t.icon,s.style.color=t.iconColor||"",this.root.appendChild(s));var s=document.createElement("span");s.innerText=e,this.root.appendChild(s),Object.assign(this.root.style,t.style??{}),null!=t.link&&((s=document.createElement("a")).innerText=e,s.href=t.link,s.target=t.target??"",s.className="lextitle link",Object.assign(s.style,t.style??{}),this.root.replaceWith(s))}}y.Title=r;class _ extends C{constructor(a,n,i,l={}){super(C.TEXT,a,String(n),l),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{this.valid(e)&&this._lastValueTriggered!=e&&(this._lastValueTriggered=n=e,l.disabled?r.innerText=e:r.value=e,t||this._trigger(new L(a,e,s),i))},this.valid=e=>!(e=e??this.value()).length||""==r.pattern||new RegExp(r.pattern).test(e);var e,t=document.createElement("div");t.className="lextext"+(l.warning?" lexwarning":""),t.style.width=l.inputWidth||"calc( 100% - "+y.DEFAULT_NAME_WIDTH+" )",t.style.display="flex",l.textClass&&t.classList.add(l.textClass),this.disabled=(l.disabled||l.warning)??!!l.url;let r=null;this.disabled?(r=document.createElement(l.url?"a":"div"),l.url&&(r.href=l.url,r.target="_blank"),r.innerHTML=(l.warning?'<i class="fa-solid fa-triangle-exclamation"></i>':"")+n||"",r.style.width="100%",r.style.textAlign=l.float??""):((r=document.createElement("input")).type=l.type||"",r.value=r.iValue=n||"",r.style.width="100%",r.style.textAlign=l.float??"",r.setAttribute("placeholder",l.placeholder??""),l.required&&r.setAttribute("required",l.required),l.pattern&&r.setAttribute("pattern",l.pattern),"default"==(e=l.trigger??"default")?(r.addEventListener("keyup",e=>{"Enter"==e.key&&r.blur()}),r.addEventListener("focusout",e=>{this.set(e.target.value,!1,e)})):"input"==e&&r.addEventListener("input",e=>{this.set(e.target.value,!1,e)}),r.addEventListener("mousedown",function(e){e.stopImmediatePropagation(),e.stopPropagation()}),l.icon&&((e=document.createElement("a")).className="inputicon "+l.icon,t.appendChild(e))),Object.assign(r.style,l.style??{}),t.appendChild(r),this.root.appendChild(t),l.hideName&&(this.root.className+=" noname",t.style.width="100%")}}y.Text=Text;class T extends C{constructor(a,n,i,e={}){super(C.TEXTAREA,a,n,e),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{l.value=n=e,t||this._trigger(new L(a,e,s),i)};var t=document.createElement("div");t.className="lextextarea",t.style.width=e.inputWidth||"calc( 100% - "+y.DEFAULT_NAME_WIDTH+" )",t.style.height=e.height,t.style.display="flex";let l=document.createElement("textarea");l.value=l.iValue=n||"",l.style.width="100%",l.style.textAlign=e.float??"",Object.assign(l.style,e.style??{}),e.disabled&&l.setAttribute("disabled",!0),e.placeholder&&l.setAttribute("placeholder",e.placeholder);var s=e.trigger??"default",s=("default"==s?(l.addEventListener("keyup",function(e){"Enter"==e.key&&l.blur()}),l.addEventListener("focusout",e=>{this.set(e.target.value,!1,e)})):"input"==s&&l.addEventListener("input",e=>{this.set(e.target.value,!1,e)}),e.icon&&((s=document.createElement("a")).className="inputicon "+e.icon,t.appendChild(s)),t.appendChild(l),this.root.appendChild(t),!e.hideName);s||(this.root.className+=" noname",t.style.width="100%"),b(()=>{e.fitHeight&&(l.style.height=l.scrollHeight+"px")},10)}}y.TextArea=T;class N extends C{constructor(t,s,a,n={}){super(C.BUTTON,t,null,n),this.onGetValue=()=>i.innerText,this.onSetValue=(e,t,s)=>{i.innerHTML=n.icon?"<a class='"+n.icon+"'></a>":n.img?"<img src='"+n.img+"'>":"<span>"+(e||"")+"</span>"};var i=document.createElement("button"),e=(i.title=n.title??"",i.className="lexbutton "+(n.buttonClass??""),n.selected&&i.classList.add("selected"),i.innerHTML=n.icon?"<a class='"+n.icon+"'></a>":n.img?"<img src='"+n.img+"'>":"<span>"+(s||"")+"</span>",i.style.width="calc( 100% - "+(n.nameWidth??y.DEFAULT_NAME_WIDTH)+")",n.disabled&&i.setAttribute("disabled",!0),i.addEventListener("click",e=>{n.selectable&&(n.parent&&n.parent.querySelectorAll(".lexbutton.selected").forEach(e=>{e!=i&&e.classList.remove("selected")}),i.classList.toggle("selected")),this._trigger(new L(t,s,e),a)}),this.root.appendChild(i),!n.hideName&&!(n.icon||n.img));e||(i.className+=" noname",i.style.width="100%")}}y.Button=N;class H extends C{constructor(a,n,e={}){let i=!e.noSelection,l=i&&(e.toggle??!1),r=document.createElement("div"),o=(r.className="lexcombobuttons ",e.skipReset=!0,e.float&&(r.className+=e.float),r.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")",[]);var c=document.createElement("div");c.className="lexcombobuttonsbox ";for(let s of n){if(!s.value)throw"Set 'value' for each button!";let t=document.createElement("button");t.className="lexbutton combo",t.title=s.icon?s.value:"",t.id=s.id??"",t.dataset.value=s.value,e.buttonClass&&t.classList.add(e.buttonClass),i&&(s.selected||e.selected==s.value)&&(t.classList.add("selected"),o=o.concat([s.value])),t.innerHTML=(s.icon?"<a class='"+s.icon+"'></a>":"")+"<span>"+(s.icon?"":s.value)+"</span>",s.disabled&&t.setAttribute("disabled",!0),t.addEventListener("click",e=>{o=[],i&&(l?t.classList.toggle("selected"):(r.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),t.classList.add("selected"))),r.querySelectorAll("button").forEach(e=>{e.classList.contains("selected")&&o.push(e.dataset.value)}),!l&&1<o.length?console.error("Enable _options.toggle_ to allow selecting multiple options in ComboButtons."):(o=o[0],this.set(s.value,!1,t.classList.contains("selected")))}),c.appendChild(t)}1<o.length?(e.toggle=!0,l=i,console.warn(`Multiple options selected in '${a}' ComboButtons. Enabling _toggle_ mode.`)):o=o[0],super(C.BUTTONS,a,null,e),this.onGetValue=()=>o,this.onSetValue=(t,e,s)=>{i&&null==s&&(r.querySelectorAll("button").forEach(e=>e.classList.remove("selected")),r.querySelectorAll("button").forEach(e=>{o&&-1<o.indexOf(e.dataset.value)&&e.classList.add("selected")})),e||t.constructor==Array||(e=s,s=n.filter(e=>e.value==t)[0]?.callback,this._trigger(new L(a,l?[t,e]:t,null),s))},e.hideName&&(this.root.className+=" noname",r.style.width="100%"),r.appendChild(c),this.root.appendChild(r)}}y.ComboButtons=H;class W extends C{constructor(t,s={}){s.hideName=!0,super(C.CARD,t,null,s);let a=document.createElement("div");a.className="lexcard",a.style.width="100%",s.img&&((n=document.createElement("img")).src=s.img,a.appendChild(n),null!=s.link)&&(n.style.cursor="pointer",n.addEventListener("click",function(){var e=a.querySelector("a");e&&e.click()}));var e,n=document.createElement("span");n.innerText=t,null!=s.link&&((e=document.createElement("a")).innerText=t,e.href=s.link,e.target=s.target??"",n.innerText="",n.appendChild(e)),s.callback&&(a.style.cursor="pointer",a.addEventListener("click",e=>{this._trigger(new L(t,null,e),s.callback)})),a.appendChild(n),this.root.appendChild(a)}}y.Card=W;class q extends C{constructor(e,a,n,t={}){if(a.constructor!=Object)return void console.error("Form data must be an Object");t.hideName=!0,super(C.FORM,e,null,t),this.onGetValue=()=>l.formData,this.onSetValue=(t,s,e)=>{l.formData=t;var a,n,i=l.querySelectorAll(".lexwidget");for(let e=0;e<i.length;++e)i[e].jsInstance.type==y.Widget.TEXT&&(a=i[e].querySelector(".lexwidgetname").innerText,(n=i[e].querySelector(".lextext input")).value=t[a]??"",C._dispatchEvent(n,"focusout",s))};let l=document.createElement("div");l.className="lexformdata",l.formData={};for(let t in a){let e=a[t];(e=e.constructor!=Object?{}:e).placeholder=e.placeholder??t,e.width="calc(100% - 10px)",e.textWidget=new _(null,e.constructor==Object?e.value:e,e=>{l.formData[t]=e},e),l.appendChild(e.textWidget.root),l.formData[t]=e.constructor==Object?e.value:e}l.appendChild((new i).root);e=new N(null,t.actionName??"Submit",(e,t)=>{for(var s in a)if(!a[s].textWidget.valid())return;n&&n(l.formData,t)},{buttonClass:"primary",width:"calc(100% - 10px)"});l.appendChild(e.root),this.root.appendChild(l),this.root.className+=" noname",l.style.width="100%"}}y.Form=q;class k extends C{constructor(i,l,o,r,e={}){super(C.SELECT,i,o,e),this.onGetValue=()=>o,this.onSetValue=(t,e,s)=>{o=t;let a=null;var n;m.childNodes.forEach(e=>{e.classList.remove("selected"),e.getAttribute("value")==t&&(a=e)}),console.assert(a,`Item ${t} does not exist in the Select.`),a.classList.add("selected"),d.refresh(o),p&&(p.querySelector("input").value="",n=this._filterOptions(l,""),u.refresh(n)),e||this._trigger(new L(i,o,s),r)};var t=document.createElement("div");t.className="lexselect",t.style.width=e.inputWidth||"calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let c=document.createElement("div");c.className="lexselect lexoption",c.name=i;var s=c.iValue=o;s+="<a class='fa-solid fa-angle-down' style='float:right; margin-right: 3px;'></a>";let d=new N(null,s,(e,t)=>{u.unfocus_event?delete u.unfocus_event:(h.classList.remove("place-above"),h.hasAttribute("open")?h.close():(h.show(),(s=>{var a=d.root,n=s.getParentArea();let i=a.getBoundingClientRect();var l=s.parentElement.closest("dialog");{var r=s.offsetHeight;let t=i.y,e=window.innerHeight;if(n&&(o=n.getBoundingClientRect(),e=o.y+o.height),l){let e=l.getBoundingClientRect();t-=e.y}s.style.top=t+a.offsetHeight+"px",t+r>e&&(s.style.top=t-r+"px",s.classList.add("place-above"))}{var o=s.offsetWidth;let t=i.x;if(s.style.minWidth=i.width+"px",l){let e=l.getBoundingClientRect();t-=e.x}s.style.left=t+"px";let e=window.innerWidth;n&&(a=n.getBoundingClientRect(),e=a.x+a.width),t+o>e&&(s.style.left=t-(o-i.width)+"px")}})(h)),p&&p.querySelector("input").focus())},{buttonClass:"array",skipInlineCount:!0,disabled:e.disabled}),h=(t.appendChild(d.root),d.root.style.width="100%",d.refresh=e=>{var t=d.root.querySelector("span");""==t.innerText?t.innerText=e:t.innerHTML=t.innerHTML.replaceAll(t.innerText,e)},document.createElement("dialog")),u=(h.className="lexselectoptions",document.createElement("ul")),p=(u.tabIndex=-1,u.className="lexoptions",h.appendChild(u),u.addEventListener("focusout",function(e){if(e.stopPropagation(),e.stopImmediatePropagation(),e.relatedTarget===d.root.querySelector("button"))this.unfocus_event=!0,setTimeout(()=>delete this.unfocus_event,200);else{if(e.relatedTarget&&"INPUT"==e.relatedTarget.tagName)return;if("lexinput-filter"==e.target.className)return}h.close()}),null),m=(e.filter&&((s=y.deepCopy(e)).placeholder=s.placeholder??"Search...",s.skipWidget=s.skipWidget??!0,s.trigger="input",s.icon="fa-solid fa-magnifying-glass",s.className="lexfilter noname",(s=new _(null,e.filterValue??"",e=>{e=this._filterOptions(l,e);u.refresh(e)},s)).root.querySelector(".lextext").classList.remove("lextext"),s.root.querySelector("input").addEventListener("focusout",function(e){e.relatedTarget&&"UL"==e.relatedTarget.tagName&&e.relatedTarget.classList.contains("lexoptions")||h.close()}),u.appendChild(s.root)),document.createElement("span"));m.className="lexselectinnerlist",u.appendChild(m),u.refresh=t=>{var e,s;if(m.innerHTML="",t.length)for(let e=0;e<t.length;e++){var a,n=t[e],i=document.createElement("li"),l=document.createElement("div"),r=(l.className="option",i.appendChild(l),e=>{this.set(e.currentTarget.getAttribute("value"),!1,e),h.close()});i.addEventListener("click",r),n.constructor!=Object?((a="@"===n[0])?(l.innerHTML="<span>"+n.substr(1)+"</span>",i.removeEventListener("click",r)):(l.innerHTML="</a><span>"+n+"</span><a class='fa-solid fa-check'>",l.value=n,i.setAttribute("value",n),n==o&&(i.classList.add("selected"),c.innerHTML=n)),i.classList.add(a?"lexselectlabel":"lexselectitem")):((r=document.createElement("img")).src=n.src,i.setAttribute("value",n.value),i.className="lexlistitem",l.innerText=n.value,l.className+=" media",l.prepend(r),l.setAttribute("value",n.value),l.setAttribute("data-index",e),l.setAttribute("data-src",n.src),l.setAttribute("title",n.value),o==n.value&&i.classList.add("selected")),m.appendChild(i)}else s=t.emptyMsg??"No options found.",(e=document.createElement("div")).className="option",e.innerHTML=s,(s=document.createElement("li")).className="lexselectitem empty",s.appendChild(e),m.appendChild(s)},u.refresh(l),t.appendChild(h),this.root.appendChild(t),e.hideName&&(this.root.className+=" noname",t.style.width="100%")}_filterOptions(t,s){var a=!s.length,n=[];for(let e=0;e<t.length;e++){var i=t[e];if(!a){var l="string"==typeof i?i:i.value,r=s.toLowerCase();if(!l.toLowerCase().includes(r))continue}n.push(i)}return n}}y.Select=k;class S extends C{constructor(a,e,n,t={}){var s=JSON.parse(JSON.stringify(e)),i=(super(C.CURVE,a,s,t),this.onGetValue=()=>JSON.parse(JSON.stringify(l.element.value)),this.onSetValue=(e,t,s)=>{l.element.value=JSON.parse(JSON.stringify(e)),l.redraw(),t||this._trigger(new L(a,l.element.value,s),n)},document.createElement("div"));i.className="lexcurve",i.style.width=this.name?"calc( 100% - "+y.DEFAULT_NAME_WIDTH+")":"100%",t.callback=(e,t)=>{this._trigger(new L(a,e,t),n)},t.name=a;let l=new ce(e,t);i.appendChild(l.element),this.root.appendChild(i),this.onresize=l.redraw.bind(l),this.curveInstance=l,b(()=>{l.canvas.width=i.offsetWidth,l.redraw()})}}y.Curve=S;class V extends C{constructor(a,e,n,t={}){var s=JSON.parse(JSON.stringify(e)),i=(super(C.DIAL,a,s,t),this.onGetValue=()=>JSON.parse(JSON.stringify(l.element.value)),this.onSetValue=(e,t,s)=>{l.element.value=JSON.parse(JSON.stringify(e)),l.redraw(),t||this._trigger(new L(a,l.element.value,s),n)},document.createElement("div"));i.className="lexcurve",i.style.width=this.name?"calc( 100% - "+y.DEFAULT_NAME_WIDTH+")":"100%",t.callback=(e,t)=>{this._trigger(new L(a,e,t),n)},t.name=a;let l=new de(this,e,t);i.appendChild(l.element),this.root.appendChild(i),this.onresize=l.redraw.bind(l),this.curveInstance=l,b(()=>{l.element.style.height=l.element.offsetWidth+"px",l.canvas.width=l.element.offsetWidth,i.style.width=l.element.offsetWidth+"px",l.canvas.height=l.canvas.width,l.redraw()})}}y.Curve=S;class U extends C{constructor(a,n,i,e={}){super(C.LAYERS,a,n,e),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{n=e,r(),t||this._trigger(new L(a,n,s),i)};var l=document.createElement("div");l.className="lexlayers",l.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let r=()=>{l.innerHTML="";let t=n.toString(2);var s=t.length;for(let e=0;e<16-s;++e)t="0"+t;for(let s=0;s<16;++s){var e,a=document.createElement("div");a.className="lexlayer",null!=n&&null!=(e=t[16-s-1])&&"1"==e&&a.classList.add("selected"),a.innerText=s+1,a.title="Bit "+s+", value "+(1<<s),l.appendChild(a),a.addEventListener("click",e=>{e.stopPropagation(),e.stopImmediatePropagation(),e.target.classList.toggle("selected");var t=n^1<<s;this.set(t,!1,e)})}};r(),this.root.appendChild(l)}}y.Layers=U;class F extends C{constructor(n,i=[],l,r={}){super(C.ARRAY,n,null,r),this.onGetValue=()=>i,this.onSetValue=(e,t,s)=>{i=e,this._updateItems(),t||this._trigger(new L(n,i,s),l)},this.root.style.flexWrap="wrap";let e=document.createElement("div"),s=(e.className="lexarray",e.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")","<a class='fa-solid fa-angle-down' style='float:right; margin-right: 3px;'></a>"),a="Array (size "+i.length+")";a+=s;var t=new N(null,a,()=>{this.root.querySelector(".lexarrayitems").toggleAttribute("hidden")},{buttonClass:"array"});e.appendChild(t.root);let o=document.createElement("div");o.className="lexarrayitems",o.toggleAttribute("hidden",!0),this.root.appendChild(e),this.root.appendChild(o),this._updateItems=()=>{var e=this.root.querySelector(".lexbutton.array span");e.innerHTML="Array (size "+i.length+")",e.innerHTML+=s,o.innerHTML="";for(let a=0;a<i.length;++a){let s=i[a];var t=r.innerValues?"select":s.constructor;let e=null;switch(t){case String:e=new _(a+"",s,function(e,t){i[a]=e,l(i)},{nameWidth:"4%",inputWidth:"95%",skipReset:!0});break;case Number:e=new A(a+"",s,function(e,t){i[a]=e,l(i)},{nameWidth:"4%",inputWidth:"95%",skipReset:!0});break;case"select":e=new k(a+"",r.innerValues,s,function(e,t){i[a]=e,l(i)},{nameWidth:"4%",inputWidth:"95%",skipReset:!0})}console.assert(e,`Value of type ${t} cannot be modified in ItemArray`),o.appendChild(e.root),e=new N(null,"<a class='lexicon fa-solid fa-trash'></a>",(e,t)=>{i.splice(i.indexOf(s),1),this._updateItems(),this._trigger(new L(n,i,t),l)},{title:"Remove item",className:"micro"}),o.appendChild(e.root)}a="Add item",a+="<a class='fa-solid fa-plus' style='float:right; margin-right: 3px; margin-top: 2px;'></a>";e=new N(null,a,(e,t)=>{i.push(r.innerValues?r.innerValues[0]:""),this._updateItems(),this._trigger(new L(n,i,t),l)},{buttonClass:"array"});o.appendChild(e.root)},this._updateItems()}}y.ItemArray=F;class G extends C{constructor(i,l,r,o,e={}){super(C.LIST,i,r,e),this.onGetValue=()=>r,this.onSetValue=(t,e,s)=>{c.querySelectorAll(".lexlistitem").forEach(e=>e.classList.remove("selected"));let a=null;for(let e=0;e<l.length;++e){var n=l[e];if(n==t||n.constructor==Array&&n[0]==t){a=e;break}}a?(c.children[a].classList.toggle("selected"),r=t,e||this._trigger(new L(i,t,s),o)):console.error(`Cannot find item ${t} in List.`)},this._updateValues=e=>{l=e,c.innerHTML="";for(let a=0;a<l.length;++a){let e=null,t=l[a],s=(t.constructor===Array&&(e=t[1],t=t[0]),document.createElement("div"));s.className="lexlistitem"+(r==t?" selected":""),s.innerHTML="<span>"+t+"</span>"+(e?"<a class='"+e+"'></a>":""),s.addEventListener("click",e=>{c.querySelectorAll(".lexlistitem").forEach(e=>e.classList.remove("selected")),s.classList.toggle("selected"),r=t,this._trigger(new L(i,t,e),o)}),c.appendChild(s)}};let c=document.createElement("div");c.className="lexlist",c.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")",this._updateValues(l),e.hideName&&(this.root.className+=" noname",c.style.width="100%"),this.root.appendChild(c)}}y.List=G;class j extends C{constructor(a,n,i,e={}){n=n.replace(/\s/g,"").split(",");var t=[].concat(n);super(C.TAGS,a,t,e),this.onGetValue=()=>[].concat(n),this.onSetValue=(e,t,s)=>{n=[].concat(e),r(),t||this._trigger(new L(a,n,s),i)};let l=document.createElement("div"),r=(l.className="lextags",l.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")",()=>{l.innerHTML="";for(let e=0;e<n.length;++e){let t=n[e],s=document.createElement("span");s.className="lextag",s.innerHTML=t;var a=document.createElement("a");a.className="lextagrmb fa-solid fa-xmark lexicon",s.appendChild(a),a.addEventListener("click",e=>{s.remove(),n.splice(n.indexOf(t),1),this.set(n,!1,e)}),l.appendChild(s)}let s=document.createElement("input");s.value="",s.placeholder="Add tag...",l.appendChild(s),s.onkeydown=e=>{var t=s.value.replace(/\s/g,"");" "!=e.key&&"Enter"!=e.key||(e.preventDefault(),!t.length)||-1<n.indexOf(t)||(n.push(t),this.set(n,!1,e))},s.focus()});r(),e.hideName&&(this.root.className+=" noname",l.style.width="100%"),this.root.appendChild(l)}}y.Tags=j;class K extends C{constructor(a,n,i,e={}){if(!a&&!e.label)throw"Set Widget Name or at least a label!";super(C.CHECKBOX,a,n,e),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{e==n||(l.checked=n=e,this.root.querySelector(".lexcheckboxsubmenu")?.toggleAttribute("hidden",!e),t)||this._trigger(new L(a,e,s),i)};var t=document.createElement("div");t.className="lexcheckboxcont";let l=document.createElement("input");l.type="checkbox",l.className="lexcheckbox "+(e.className??""),l.checked=n,l.disabled=e.disabled??!1;var s=document.createElement("span");s.className="checkboxtext",s.innerHTML=e.label??"On",t.appendChild(l),t.appendChild(s),l.addEventListener("change",e=>{this.set(l.checked,!1,e)}),this.root.appendChild(t),e.suboptions&&(this.root.style.flexWrap="wrap",(s=document.createElement("div")).className="lexcheckboxsubmenu",s.toggleAttribute("hidden",!l.checked),(t=new M).queue(s),e.suboptions.call(this,t),t.clearQueue(),this.root.appendChild(s))}}y.Checkbox=K;class Y extends C{constructor(a,n,i,e={}){super(C.TOGGLE,a,n,e),this.onGetValue=()=>l.checked,this.onSetValue=(e,t,s)=>{e==n||(l.checked=n=e,this.root.querySelector(".lextogglesubmenu")?.toggleAttribute("hidden",!e),t)||this._trigger(new L(a,e,s),i)};var t=document.createElement("div");t.className="lextogglecont";let l=document.createElement("input");l.type="checkbox",l.className="lextoggle "+(e.className??""),l.checked=n,l.iValue=n,l.disabled=e.disabled??!1;var s=document.createElement("span");s.className="toggletext",s.innerHTML="On",t.appendChild(l),t.appendChild(s),l.addEventListener("change",e=>{this.set(l.checked,!1,e)}),this.root.appendChild(t),e.suboptions&&(this.root.style.flexWrap="wrap",(s=document.createElement("div")).className="lextogglesubmenu",s.toggleAttribute("hidden",!l.checked),(t=new M).queue(s),e.suboptions.call(this,t),t.clearQueue(),this.root.appendChild(s))}}y.Toggle=Y;class X extends C{constructor(e,t,n,i,s={}){super(C.RADIO,e,null,s);let a=null;this.onGetValue=()=>{var e=l.querySelectorAll("button");return a?[a,e[a]]:void 0},this.onSetValue=(e,t,s)=>{e=e[0]??e,console.assert(e.constructor==Number,"RadioGroup _value_ must be an Array index!");var a=l.querySelectorAll("button"),a=(a.forEach(e=>{e.checked=!1,e.classList.remove("checked")}),a[e]);a.checked=!a.checked,a.classList.toggle("checked"),t||this._trigger(new L(null,[e,n[e]],s),i)};var l=document.createElement("div"),e=(l.className="lexradiogroup "+(s.className??""),document.createElement("span"));e.innerHTML=t,l.appendChild(e);for(let t=0;t<n.length;++t){var r=document.createElement("div"),o=(r.className="lexradiogroupitem",l.appendChild(r),document.createElement("button")),c=(o.className="lexbutton",o.disabled=s.disabled??!1,r.appendChild(o),o.addEventListener("click",e=>{this.set(t,!1,e)}),document.createElement("span")),o=(o.appendChild(c),document.createElement("span"));o.innerHTML=n[t],r.appendChild(o)}s.selected&&(console.assert(s.selected.constructor==Number,"RadioGroup _selected_ must be an Array index!"),a=s.selected,this.set(a,!0)),this.root.appendChild(l)}}y.RadioGroup=X;class Z extends C{constructor(a,n,i,e={}){n=n.constructor===Array?s(n):n,super(C.COLOR,a,n,e),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{l.useRGB&&(e=o(e)),s&&r.set(e,!0,s),l.value=n=e,t||this._trigger(new L(a,e,s),i)};var t=document.createElement("span");t.className="lexcolor",t.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let l=document.createElement("input"),r=(l.style.width="32px",l.type="color",l.className="colorinput",l.id="color"+E(),l.useRGB=e.useRGB??!1,l.value=l.iValue=n,e.disabled&&(l.disabled=!0),l.addEventListener("input",e=>{this.set(e.target.value,!1,e)},!1),t.appendChild(l),new _(null,l.value,e=>{this.set(e)},{width:"calc( 100% - 32px )"}));r.root.style.marginLeft="4px",t.appendChild(r.root),this.root.appendChild(t)}}y.ColorInput=Z;class $ extends C{constructor(a,n,i,l={}){super(C.RANGE,a,n,l),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{isNaN(e)||(r.value=n=g(+e,+r.min,+r.max),t)||this._trigger(new L(a,l.left?+r.max-n+ +r.min:n,s),i)};var e=document.createElement("div");e.className="lexrange",e.style.width=l.inputWidth||"calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let r=document.createElement("input");r.className="lexrangeslider "+(l.className??""),r.value=r.iValue=n,r.min=l.min??0,r.max=l.max??100,r.step=l.step??1,r.type="range",r.disabled=l.disabled??!1,l.left&&r.classList.add("left"),(l.fill??!0)||r.classList.add("no-fill"),r.addEventListener("input",e=>{this.set(e.target.valueAsNumber,!1,e)},{passive:!1}),r.addEventListener("mousedown",function(e){l.onPress&&l.onPress.bind(r)(e,r)},!1),r.addEventListener("mouseup",function(e){l.onRelease&&l.onRelease.bind(r)(e,r)},!1),this.setLimits=(e,t,s)=>{r.min=e??r.min,r.max=t??r.max,r.step=s??r.step,C._dispatchEvent(r,"input",!0)},n.constructor==Number&&(n=g(n,+r.min,+r.max)),e.appendChild(r),this.root.appendChild(e),l.hideName&&(this.root.className+=" noname",e.style.width="100%")}}y.RangeInput=$;class A extends C{constructor(a,n,i,l={}){super(C.NUMBER,a,n,l),this.onGetValue=()=>n,this.onSetValue=(e,t,s)=>{isNaN(e)||(n=g(+e,+o.min,+o.max),o.value=n=f(n,l.precision),r.querySelector(".lexinputslider")&&(r.querySelector(".lexinputslider").value=n),l.units&&(o.unitSpan.style.left=u(n)+"px"),t)||this._trigger(new L(a,n,s),i)};var e,t=document.createElement("div");t.className="lexnumber",t.style.width=l.inputWidth||"calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let r=document.createElement("div"),o=(r.className="numberbox",document.createElement("input")),s=(o.id="number_"+E(),o.className="vecinput",o.min=l.min??-1e24,o.max=l.max??1e24,o.step=l.step??"any",o.type="number",n.constructor==Number&&(n=f(n=g(n,+o.min,+o.max),l.precision)),o.value=o.iValue=n,r.appendChild(o),l.units&&((e=document.createElement("span")).className="lexunit",e.innerText=l.units,e.style.left=u(o.value)+"px",o.unitSpan=e,r.appendChild(e)),document.createElement("a"));if(s.className="fa-solid fa-arrows-up-down drag-icon hidden",r.appendChild(s),l.disabled&&(o.disabled=!0),!l.skipSlider&&void 0!==l.min&&void 0!==l.max){let a=document.createElement("input");a.className="lexinputslider",a.min=l.min,a.max=l.max,a.step=l.step??1,a.type="range",a.value=n,a.addEventListener("input",e=>{this.set(a.valueAsNumber,!1,e)},!1),a.addEventListener("mousedown",function(e){l.onPress&&l.onPress.bind(a)(e,a)},!1),a.addEventListener("mouseup",function(e){l.onRelease&&l.onRelease.bind(a)(e,a)},!1),r.appendChild(a),this.setLimits=(e,t,s)=>{o.min=a.min=e??o.min,o.max=a.max=t??o.max,o.step=s??o.step,a.step=s??a.step,this.set(n,!0)}}o.addEventListener("input",function(e){n=f(n=+this.valueAsNumber,l.precision),l.units&&(o.unitSpan.style.left=u(o.value)+"px")},!1),o.addEventListener("wheel",t=>{if(t.preventDefault(),o===document.activeElement){let e=l.step??1;t.shiftKey?e*=10:t.altKey&&(e*=.1),n=+o.valueAsNumber-e*(0<t.deltaY?1:-1),this.set(n,!1,t)}},{passive:!1}),o.addEventListener("change",e=>{this.set(o.valueAsNumber,!1,e)},{passive:!1});var c=this;let d=t=>{var s=-t.movementY;if(0!=s){let e=l.step??1;t.shiftKey?e*=10:t.altKey&&(e*=.1),n=+o.valueAsNumber+e*s,this.set(n,!1,t)}t.stopPropagation(),t.preventDefault()},h=e=>{var t=c.root.ownerDocument;t.removeEventListener("mousemove",d),t.removeEventListener("mouseup",h),document.body.classList.remove("noevents"),s.classList.add("hidden"),document.pointerLockElement&&document.exitPointerLock(),l.onRelease&&l.onRelease.bind(o)(e,o)};o.addEventListener("mousedown",e=>{var t;document.activeElement!=o&&((t=c.root.ownerDocument).addEventListener("mousemove",d),t.addEventListener("mouseup",h),document.body.classList.add("noevents"),s.classList.remove("hidden"),e.stopImmediatePropagation(),e.stopPropagation(),document.pointerLockElement||o.requestPointerLock(),l.onPress)&&l.onPress.bind(o)(e,o)}),t.appendChild(r),this.root.appendChild(t),l.hideName&&(this.root.className+=" noname",t.style.width="100%")}}y.NumberInput=A;class J extends C{constructor(t,n,i,l,r={}){t=g(t,2,4),i=i??new Array(t).fill(0),super(C.VECTOR,n,[].concat(i),r),this.onGetValue=()=>{var e,t=[];for(e of this.root.querySelectorAll("input"))t.push(+e.value);return t},this.onSetValue=(t,e,s)=>{if(o.length!=t.length)console.error("Input length does not match vector length.");else{for(let e=0;e<o.length;++e){var a;a=f(g(t[e],+o[e].min,+o[e].max),r.precision)??0,o[e].value=t[e]=a}e||this._trigger(new L(n,t,s),l)}};let o=[],a=document.createElement("div"),c=(a.className="lexvector",a.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")",this);for(let e=0;e<t;++e){var d=document.createElement("div");d.className="vecbox",d.innerHTML="<span class='"+M.VECTOR_COMPONENTS[e]+"'></span>";let n=document.createElement("input"),s=(n.className="vecinput v"+t,n.min=r.min??-1e24,n.max=r.max??1e24,n.step=r.step??"any",n.type="number",n.id="vec"+t+"_"+E(),n.idx=e,o[e]=n,i[e].constructor==Number&&(i[e]=g(i[e],+n.min,+n.max),i[e]=f(i[e],r.precision)),n.value=n.iValue=i[e],document.createElement("a"));function h(e){var t;document.activeElement!=n&&((t=c.root.ownerDocument).addEventListener("mousemove",u),t.addEventListener("mouseup",p),document.body.classList.add("noevents"),s.classList.remove("hidden"),e.stopImmediatePropagation(),e.stopPropagation(),document.pointerLockElement||n.requestPointerLock(),r.onPress)&&r.onPress.bind(n)(e,n)}function u(t){var s=-t.movementY;if(0!=s){let e=r.step??1;if(t.shiftKey?e=10:t.altKey&&(e=.1),m.locked)for(var a of this.root.querySelectorAll(".vecinput"))a.value=f(+a.valueAsNumber+e*s,r.precision),C._dispatchEvent(a,"change");else n.value=f(+n.valueAsNumber+e*s,r.precision),C._dispatchEvent(n,"change")}t.stopPropagation(),t.preventDefault()}function p(e){var t=c.root.ownerDocument;t.removeEventListener("mousemove",u),t.removeEventListener("mouseup",p),document.body.classList.remove("noevents"),s.classList.add("hidden"),document.pointerLockElement&&document.exitPointerLock(),r.onRelease&&r.onRelease.bind(n)(e,n)}s.className="fa-solid fa-arrows-up-down drag-icon hidden",d.appendChild(s),r.disabled&&(n.disabled=!0),n.addEventListener("wheel",function(t){if(t.preventDefault(),this===document.activeElement){let e=r.step??1;if(t.shiftKey?e=10:t.altKey&&(e=.1),m.locked)for(var s of c.querySelectorAll(".vecinput"))s.value=f(+s.valueAsNumber-e*(0<t.deltaY?1:-1),r.precision),C._dispatchEvent(s,"change");else this.value=f(+this.valueAsNumber-e*(0<t.deltaY?1:-1),r.precision),C._dispatchEvent(n,"change")}},{passive:!1}),n.addEventListener("change",e=>{if(!isNaN(e.target.value)){var t=f(g(e.target.value,+n.min,+n.max),r.precision);if(m.locked)for(var s of o)s.value=t,i[s.idx]=t;else n.value=t,i[e.target.idx]=t;this.set(i,!1,e)}},!1),n.addEventListener("mousedown",h),d.appendChild(n),a.appendChild(d)}void 0===r.min&&void 0===r.max||(this.setLimits=(e,t,s)=>{for(var a of o)a.min=e??a.min,a.max=t??a.max,a.step=s??a.step;this.set(i,!0)});let m=document.createElement("a");m.title="Lock",m.className="fa-solid fa-lock-open lexicon lock",a.appendChild(m),m.addEventListener("click",function(e){this.locked=!this.locked,this.locked?(this.classList.add("fa-lock"),this.classList.remove("fa-lock-open")):(this.classList.add("fa-lock-open"),this.classList.remove("fa-lock"))},!1),this.root.appendChild(a)}}y.Vector=J;class Q extends C{constructor(e,t,i,s={}){super(C.SIZE,e,t,s),this.onGetValue=()=>{var t=[];for(let e=0;e<this.root.dimensions.length;++e)t.push(this.root.dimensions[e].value());return t},this.onSetValue=(t,s,e)=>{for(let e=0;e<this.root.dimensions.length;++e)this.root.dimensions[e].set(t[e],s)},this.root.aspectRatio=2==t.length?t[0]/t[1]:null,this.root.dimensions=[];for(let n=0;n<t.length;++n){var a=new M;this.root.dimensions[n]=a.addNumber(null,t[n],e=>{var t,s,a=this.value();this.root.locked&&(t=0==n?1/this.root.aspectRatio:this.root.aspectRatio,a[s=(1+n)%2]=e*t,this.root.dimensions[s].set(a[s],!0)),i&&i(a)},{min:0,disabled:s.disabled,precision:s.precision}),this.root.appendChild(this.root.dimensions[n].root),n+1!=t.length&&((a=document.createElement("a")).className="lexsizecross fa-solid fa-xmark",this.root.appendChild(a))}if(s.units&&((e=document.createElement("span")).className="lexunit",e.innerText=s.units,this.root.appendChild(e)),this.root.aspectRatio){let s=document.createElement("a");s.title="Lock Aspect Ratio",s.className="fa-solid fa-lock-open lexicon lock",this.root.appendChild(s),s.addEventListener("click",e=>{var t;this.root.locked=!this.root.locked,this.root.locked?(s.classList.add("fa-lock"),s.classList.remove("fa-lock-open"),t=this.value(),this.root.aspectRatio=t[0]/t[1]):(s.classList.add("fa-lock-open"),s.classList.remove("fa-lock"))},!1)}s.hideName&&(this.root.className+=" noname",container.style.width="100%")}}y.SizeInput=Q;class ee extends C{constructor(n,e,i,s={}){super(C.PAD,n,null,s),this.onGetValue=()=>r.value.xy,this.onSetValue=(e,t,s)=>{r.value.set(e[0],e[1]),a(r.value),t||this._trigger(new L(n,r.value.xy),i)};var t=document.createElement("div");t.className="lexpad",t.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let l=document.createElement("div"),r=(l.id="lexpad-"+n,l.className="lexinnerpad",l.style.width=s.padSize??"96px",l.style.height=s.padSize??"96px",document.createElement("div")),a=(r.className="lexpadthumb",r.value=new y.vec2(e[0],e[1]),r.min=s.min??0,r.max=s.max??1,e=>{var[t,s]=[l.offsetWidth,l.offsetHeight],e=new y.vec2(h(e.x,r.min,r.max,0,1),h(e.y,r.min,r.max,0,1));r.style.transform=`translate(calc( ${t*e.x}px - 50% ), calc( ${s*e.y}px - 50%)`}),o=(b(()=>{a(r.value)}),l.appendChild(r),t.appendChild(l),this.root.appendChild(t),l.addEventListener("mousedown",function(e){var t;document.activeElement!=r&&((t=o.root.ownerDocument).addEventListener("mousemove",c),t.addEventListener("mouseup",d),document.body.classList.add("nocursor"),document.body.classList.add("noevents"),e.stopImmediatePropagation(),e.stopPropagation(),s.onPress)&&s.onPress.bind(r)(e,r)}),this);function c(e){var t=l.getBoundingClientRect(),t=new y.vec2(e.x-t.x,e.y-t.y),[s,a]=(t.clp(0,l.offsetWidth,t),[l.offsetWidth,l.offsetHeight]),t=t.div(new y.vec2(l.offsetWidth,l.offsetHeight));r.style.transform=`translate(calc( ${s*t.x}px - 50% ), calc( ${a*t.y}px - 50%)`,r.value=new y.vec2(h(t.x,0,1,r.min,r.max),h(t.y,0,1,r.min,r.max)),o._trigger(new L(n,r.value.xy,e),i),e.stopPropagation(),e.preventDefault()}function d(e){var t=o.root.ownerDocument;t.removeEventListener("mousemove",c),t.removeEventListener("mouseup",d),document.body.classList.remove("nocursor"),document.body.classList.remove("noevents"),s.onRelease&&s.onRelease.bind(r)(e,r)}}}y.Pad=ee;class te extends C{constructor(e,t,n={}){super(C.PROGRESS,e,t,n),this.onGetValue=()=>i.value,this.onSetValue=(e,t,s)=>{this.root.querySelector("meter").value=e,l(),this.root.querySelector("span")&&(this.root.querySelector("span").innerText=e)};var s,a=document.createElement("div");a.className="lexprogress",a.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let i=document.createElement("meter"),l=(i.id="lexprogressbar-"+e,i.className="lexprogressbar",i.step="any",i.min=n.min??0,i.max=n.max??1,i.low=n.low??i.low,i.high=n.high??i.high,i.optimum=n.optimum??i.optimum,i.value=t,()=>{let e=y.getThemeColor("global-selected");null!=i.low&&i.value<i.low?e=y.getThemeColor("global-color-error"):null!=i.high&&i.value<i.high&&(e=y.getThemeColor("global-color-warning")),i.style.background=`color-mix(in srgb, ${e} 20%, transparent)`});if(a.appendChild(i),this.root.appendChild(a),n.showValue&&(document.getElementById("progressvalue-"+e)&&document.getElementById("progressvalue-"+e).remove(),(s=document.createElement("span")).id="progressvalue-"+e,s.style.padding="0px 5px",s.innerText=t,a.appendChild(s)),n.editable){i.classList.add("editable");let s=e=>{var t;0!=e.movementX&&(t=i.getBoundingClientRect(),t=f(h(e.offsetX-t.x,0,t.width,i.min,i.max)),this.set(t,!1,e),n.callback)&&n.callback(t,e),e.stopPropagation(),e.preventDefault()},a=e=>{var t=this.root.ownerDocument;t.removeEventListener("mousemove",s),t.removeEventListener("mouseup",a),document.body.classList.remove("noevents"),i.classList.remove("grabbing")};i.addEventListener("mousedown",e=>{var t=this.root.ownerDocument,t=(t.addEventListener("mousemove",s),t.addEventListener("mouseup",a),document.body.classList.add("noevents"),i.classList.add("grabbing"),e.stopImmediatePropagation(),e.stopPropagation(),i.getBoundingClientRect()),t=f(h(e.offsetX,0,t.width,i.min,i.max));this.set(t,!1,e)})}l()}}y.Progress=te;class se extends C{constructor(e,s,a={}){super(C.FILE,e,null,a);e=a.local??!0;let n=a.type??"text",i=a.read??!0,l=document.createElement("input");if(l.className="lexfileinput",l.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+" - 10%)",l.type="file",l.disabled=a.disabled??!1,a.placeholder&&(l.placeholder=a.placeholder),l.addEventListener("change",function(e){let t=e.target.files;t.length&&(i?(a.onBeforeRead&&a.onBeforeRead(),e=new FileReader,"text"===n?e.readAsText(t[0]):"buffer"===n?e.readAsArrayBuffer(t[0]):"bin"===n?e.readAsBinaryString(t[0]):"url"===n&&e.readAsDataURL(t[0]),e.onload=e=>{s.call(this,e.target.result,t[0])}):s(t[0]))}),l.addEventListener("cancel",function(e){s(null)}),this.root.appendChild(l),e){let t=null;e=new N(null,"<a style='margin-top: 0px;' class='fa-solid fa-gear'></a>",()=>{t=t||new D("Load Settings",e=>{e.addSelect("Type",["text","buffer","bin","url"],n,e=>{n=e}),e.addButton(null,"Reload",e=>{l.dispatchEvent(new Event("change"))})},{onclose:e=>{e.remove(),t=null}})},{className:"micro",skipInlineCount:!0,title:"Settings"});this.root.appendChild(e.root)}}}y.FileInput=se;class ae extends C{constructor(e,t,s={}){s.hideName=!0,super(C.TREE,e,null,s);var a=document.createElement("div"),n=(a.className="lextree",this.root.appendChild(a),e&&((r=document.createElement("span")).innerHTML=e,a.appendChild(r)),document.createElement("div"));if(n.className="lextreetools",e||(n.className+=" notitle"),s.icons)for(var i of s.icons){var l=document.createElement("a");l.title=i.name,l.className="lexicon "+i.icon,l.addEventListener("click",i.callback),n.appendChild(l)}s.filter=s.filter??!0;var r=null,r=(s.filter&&((r=document.createElement("input")).id="lexnodetree_filter",r.setAttribute("placeholder","Filter.."),r.style.width="calc( 100% - 17px )",r.addEventListener("input",()=>{this.innerTree.refresh()}),(e=document.createElement("a")).className="lexicon fa-solid fa-magnifying-glass",n.appendChild(r),n.appendChild(e)),(s.icons||s.filter)&&a.appendChild(n),document.createElement("ul"));r.addEventListener("contextmenu",function(e){e.preventDefault()}),a.appendChild(r),this.innerTree=new B(a,t,s)}}y.Tree=ae;class ne extends C{constructor(e,n,t={}){if(t.hideName=!0,super(C.TABS,e,null,t),n.constructor!=Array)throw"Param @tabs must be an Array!";var e=t.vertical??!0,i=!e&&(t.showNames??!1);let l=document.createElement("div"),r=(l.className="lextabscontainer",e||(l.className+=" horizontal"),document.createElement("div"));r.className="tabs",l.appendChild(r),this.root.appendChild(l);for(let e=0;e<n.length;++e){let t=n[e];console.assert(t.name);var o=0==e;let s=document.createElement("div"),a=(s.className="lextab "+(e==n.length-1?"last":"")+(o?"selected":""),s.innerHTML=(i?t.name:"")+"<a class='"+(t.icon||"fa fa-hashtag")+" "+(i?"withname":"")+"'></a>",s.title=t.name,document.createElement("div"));a.id=t.name.replace(/\s/g,""),a.className="widgets",o||a.toggleAttribute("hidden",!0),l.appendChild(a),s.addEventListener("click",e=>{r.querySelectorAll(".lextab").forEach(e=>{e.classList.remove("selected")}),s.classList.add("selected"),l.querySelectorAll(".widgets").forEach(e=>{e.toggleAttribute("hidden",!0)}),l.querySelector("#"+a.id).toggleAttribute("hidden"),t.onSelect&&t.onSelect(this,a)}),r.appendChild(s),t.onCreate&&((o=new M).queue(a),t.onCreate.call(this,o),o.clearQueue())}}}y.TabSections=ne;class ie extends C{constructor(a,e,n,t={}){super(C.COUNTER,a,e,t),this.onGetValue=()=>c.count,this.onSetValue=(e,t,s)=>{e=g(e,i,l),c.count=e,c.innerHTML=e,t||this._trigger(new L(a,e,s),n)};let i=t.min??0,l=t.max??100,r=t.step??1;var s=document.createElement("div"),o=(s.className="lexcounter",this.root.appendChild(s),new N(null,"<a style='margin-top: 0px;' class='fa-solid fa-minus'></a>",(e,t)=>{let s=r??1;t.shiftKey&&(s*=10),this.set(c.count-s,!1,t)},{className:"micro",skipInlineCount:!0,title:"Minus"})),o=(s.appendChild(o.root),document.createElement("div"));o.className="lexcounterbox",s.appendChild(o);let c=document.createElement("span");c.className="lexcountervalue",c.innerHTML=e,c.count=e,o.appendChild(c),t.label&&((e=document.createElement("span")).className="lexcounterlabel",e.innerHTML=t.label,o.appendChild(e));t=new N(null,"<a style='margin-top: 0px;' class='fa-solid fa-plus'></a>",(e,t)=>{let s=r??1;t.shiftKey&&(s*=10),this.set(c.count+s,!1,t)},{className:"micro",skipInlineCount:!0,title:"Plus"});s.appendChild(t.root)}}y.Counter=ie;class le extends C{constructor(e,f,v={}){if(!f)throw"Data is needed to create a table!";super(C.TABLE,e,null,v);e=document.createElement("div");e.className="lextable",e.style.width="calc( 100% - "+y.DEFAULT_NAME_WIDTH+")";let E=document.createElement("table");function i(e,t,s,a){return s[e]<a[e]?-t:s[e]>a[e]?t:0}e.appendChild(E),f.head=f.head??[],f.body=f.body??[],f.orderMap={},f.checkMap={},this.refreshTable=()=>{E.innerHTML="";var e,t,s=document.createElement("thead"),a=(s.className="lextablehead",E.appendChild(s),document.createElement("tr"));v.sortable&&((e=document.createElement("th")).style.width="0px",a.appendChild(e)),v.selectable&&((e=document.createElement("th")).style.width="0px",(t=document.createElement("input")).type="checkbox",t.className="lexcheckbox",t.checked=f.checkMap[":root"]??!1,e.appendChild(t),t.addEventListener("change",function(){var e;f.checkMap[":root"]=this.checked;for(e of E.querySelector("tbody").childNodes)f.checkMap[e.getAttribute("rowId")]=this.checked,e.querySelector("input").checked=this.checked}),a.appendChild(e));for(let t of f.head){var n=document.createElement("th");n.innerHTML=t+' <a class="fa-solid fa-sort"></a>',n.querySelector("a").addEventListener("click",()=>{f.orderMap[t]||(f.orderMap[t]=1);var e=f.head.indexOf(t);f.body=f.body.sort(i.bind(this,e,f.orderMap[t])),f.orderMap[t]=-f.orderMap[t],this.refreshTable()}),a.appendChild(n)}v.rowActions&&((t=document.createElement("th")).className="sm",a.appendChild(t)),s.appendChild(a);{var c,d,h,u=document.createElement("tbody");u.className="lextablebody",E.appendChild(u);let i=null,l=!1,r=null,o=(document.addEventListener("mouseup",e=>{var t;i&&(document.removeEventListener("mousemove",o),(t=E.rows[i]).dY=0,t.classList.remove("dragging"),Array.from(E.rows).forEach(e=>{e.style.transform="",e.style.transition="none"}),w(t),i=null,r&&(r[0].parentNode.insertChildAtIndex(r[0],r[1]),r=null),b(()=>{Array.from(E.rows).forEach(e=>{e.style.transition="transform 0.2s ease-in"})}))}),e=>{var t;i&&((t=E.rows[i]).dY=t.dY??0,t.dY+=e.movementY,t.style.transform=`translateY(${t.dY}px)`)});for(let n=0;n<f.body.length;++n){let s=f.body[n],a=document.createElement("tr"),e=y.getSupportedDOMName(s.join("-"));a.setAttribute("rowId",e.substr(0,16)),v.sortable&&((d=document.createElement("td")).style.width="0px",c=y.makeIcon("grip-vertical"),d.appendChild(c),c.draggable=!0,c.addEventListener("dragstart",e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),i=a.rowIndex,a.classList.add("dragging"),document.addEventListener("mousemove",o)},!1),a.addEventListener("mouseenter",function(e){var t;e.preventDefault(),i&&this.rowIndex!=i&&l!=this.rowIndex&&(l=this.rowIndex,e=E.rows[i],t=""!=this.style.transform,this.rowIndex>i?(r=[e,t?this.rowIndex-1:this.rowIndex],this.style.transform=t?"":`translateY(-${this.offsetHeight}px)`):(r=[e,t?this.rowIndex:this.rowIndex-1],this.style.transform=t?"":`translateY(${this.offsetHeight}px)`),b(()=>{l=!1}))}),a.appendChild(d)),v.selectable&&(c=document.createElement("td"),(d=document.createElement("input")).type="checkbox",d.className="lexcheckbox",d.checked=f.checkMap[e],c.appendChild(d),d.addEventListener("change",function(){f.checkMap[e]=this.checked,this.checked||(E.querySelector("thead input[type='checkbox']").checked=f.checkMap[":root"]=!1)}),a.appendChild(c));for(h of s){var p=document.createElement("td");p.innerHTML=""+h,a.appendChild(p)}if(v.rowActions){var m=document.createElement("td"),g=(m.style.width="0px",document.createElement("div"));g.className="lextablebuttons",m.appendChild(g);for(let t of v.rowActions){let e=null;"delete"==t?(e=y.makeIcon("trash-can","Delete Row")).addEventListener("click",function(){f.body.splice(n,1),a.remove()}):"menu"==t?(e=y.makeIcon("more-horizontal","Menu")).addEventListener("click",function(e){z(null,e,e=>{v.onMenuAction?v.onMenuAction(e):console.warn("Using <Menu action> without action callbacks.")})}):(console.assert(t.constructor==Object),e=y.makeIcon(t.icon,t.title),t.callback&&e.addEventListener("click",e=>{t.callback(s,E,e)&&this.refreshTable()})),console.assert(e),g.appendChild(e)}a.appendChild(m)}u.appendChild(a)}}},this.refreshTable(),v.hideName&&(this.root.className+=" noname",e.style.width="100%"),this.root.appendChild(e)}}y.Table=le;class M{constructor(e={}){var t=document.createElement("div");t.className="lexpanel",e.id&&(t.id=e.id),e.className&&(t.className+=" "+e.className),t.style.width=e.width||"calc( 100% - 6px )",t.style.height=e.height||"100%",Object.assign(t.style,e.style??{}),this.root=t,this.branches=[],this.widgets={},this._branchOpen=!1,this._currentBranch=null,this._queue=[],this._inlineWidgetsLeft=-1,this._inline_queued_container=null}get(e){return this.widgets[e]}getValue(e){var t=this.widgets[e];if(t)return t.value();throw"No widget called "+e}setValue(e,t,s){var a=this.widgets[e];if(a)return a.set(t,s);throw"No widget called "+e}attach(e){console.assert(e,"No content to attach!"),(e.parent=this).root.appendChild(e.root||e)}clear(){for(var t in this._branchOpen=!1,this.branches=[],this._currentBranch=null,this.widgets)if(this.widgets[t].options&&this.widgets[t].options.signal){var s=this.widgets[t].options.signal;for(let e=0;e<y.signals[s].length;e++)y.signals[s][e]==this.widgets[t]&&(y.signals[s]=[...y.signals[s].slice(0,e),...y.signals[s].slice(e+1)])}if(this.signals)for(let e=0;e<this.signals.length;e++){var a=Object.values(this.signals[e])[0],n=a.options.signal;for(let e=0;e<y.signals[n].length;e++)y.signals[n][e]==a&&(y.signals[n]=[...y.signals[n].slice(0,e),...y.signals[n].slice(e+1)])}this.widgets={},this.root.innerHTML=""}sameLine(e){this._inline_queued_container=this.queuedContainer,this._inlineWidgetsLeft=e||1/0}endLine(e){if(-1==this._inlineWidgetsLeft)console.warn("No pending widgets to be inlined!");else{this._inlineWidgetsLeft=-1,this._inlineContainer||(this._inlineContainer=document.createElement("div"),this._inlineContainer.className="lexinlinewidgets",e&&(this._inlineContainer.style.justifyContent=e));for(var t of this._inlineWidgets)t.constructor==Array?(this._inline_queued_container?this._inlineContainer:t[1]).appendChild(t[0]):this._inlineContainer.appendChild(t);(this._inline_queued_container||(this._currentBranch?this._currentBranch.content:this.root)).appendChild(this._inlineContainer),delete this._inlineWidgets,delete this._inlineContainer}}branch(e,t={}){this._branchOpen&&this.merge();e=new re(e,t);return(e.panel=this)._branchOpen=!0,this._currentBranch=e,0==this.branches.length&&e.root.classList.add("first"),this.root.querySelectorAll(".lexbranch.last").forEach(e=>{e.classList.remove("last")}),e.root.classList.add("last"),this.branches.push(e),this.root.appendChild(e.root),t.filter&&this._addFilter(t.filter,{callback:this._searchWidgets.bind(this,e.name)}),e}merge(){this._branchOpen=!1,this._currentBranch=null}_pick(e,t){return void 0===e?t:e}_attachWidget(t,s={}){null!=t.name&&(this.widgets[t.name]=t),t.options.signal&&!t.name&&(this.signals||(this.signals=[]),this.signals.push({[t.options.signal]:t}));var e=e=>{(s.container||this.queuedContainer||(this._currentBranch?(s.skipWidget||this._currentBranch.widgets.push(t),this._currentBranch.content):(e.classList.add("nobranch"),this.root))).appendChild(e)},a=e=>{this.queuedContainer?this._inlineWidgets.push([e,this.queuedContainer]):this._inlineWidgets.push(e)};return 0<this._inlineWidgetsLeft&&!s.skipInlineCount?(this._inlineWidgets||(this._inlineWidgets=[]),a(t.root),this._inlineWidgetsLeft--,this._inlineWidgetsLeft||this.endLine()):e(t.root),t}_addFilter(e,t={}){t.placeholder=e.constructor==String?e:"Filter properties..",t.skipWidget=t.skipWidget??!0,t.skipInlineCount=!0;e=new _(null,null,null,t).root;e.className+=" lexfilter noname";let s=document.createElement("input");s.className="lexinput-filter",s.setAttribute("placeholder",t.placeholder),s.style.width="calc( 100% - 17px )",s.value=t.filterValue||"";var a=document.createElement("a");return a.className="fa-solid fa-magnifying-glass",e.appendChild(a),e.appendChild(s),s.addEventListener("input",e=>{t.callback&&t.callback(s.value,e)}),e}_searchWidgets(e,t){for(var s of this.branches)if(s.name===e){for(var a of s.widgets)a.domEl.classList.contains("lexfilter")||a.domEl.remove();this.queue(s.content);var n,i=!t.length;for(n of s.widgets){if(!i){if(!n.name)continue;t.toLowerCase();if(!n.name.toLowerCase().includes(t))continue}this.queuedContainer.appendChild(n.domEl)}return void this.clearQueue()}}getBranch(t){return t?this.branches.find(e=>e.name==t):this._currentBranch}queue(e){!e&&this._currentBranch&&(e=this._currentBranch.root),this.queuedContainer&&this._queue.push(this.queuedContainer),this.queuedContainer=e}clearQueue(){this._queue&&this._queue.length?this.queuedContainer=this._queue.pop():delete this.queuedContainer}addSeparator(){var e=document.createElement("div"),t=(e.className="lexseparator",new C(C.SEPARATOR));t.root=e,this._currentBranch?(this._currentBranch.content.appendChild(e),this._currentBranch.widgets.push(t)):this.root.appendChild(e)}addBlank(e,t){e=new i(e,t);return this._attachWidget(e)}addTitle(e,t={}){e=new r(e,t);return this._attachWidget(e)}addText(e,t,s,a={}){e=new _(e,t,s,a);return this._attachWidget(e)}addTextArea(e,t,s,a={}){e=new T(e,t,s,a);return this._attachWidget(e)}addLabel(e,t={}){t.disabled=!0;e=this.addText(null,e,null,t);return e.type=C.LABEL,e}addButton(e,t,s,a={}){e=new N(e,t,s,a);return this._attachWidget(e)}addComboButtons(e,t,s={}){e=new H(e,t,s);return this._attachWidget(e)}addCard(e,t={}){e=new W(e,t);return this._attachWidget(e)}addForm(e,t,s,a={}){e=new q(e,t,s,a);return this._attachWidget(e)}addContent(e,t,s={}){console.assert(t,"Empty content!"),t.constructor==String&&((a=document.createElement("div")).innerHTML=t,t=1<a.childElementCount?a:a.firstElementChild),s.hideName=!0;var a=new C(C.CONTENT,e,null,s);return a.root.appendChild(t),this._attachWidget(a)}async addImage(e,t,s={}){console.assert(t,"Empty src/url for Image!");var a=document.createElement("div"),n=(a.className="leximage",a.style.width="100%",document.createElement("img")),t=(n.src=t,Object.assign(n.style,s.style??{}),a.appendChild(n),new C(C.IMAGE,e,null,s));return t.root.appendChild(a),n.decode(),this._attachWidget(t)}addSelect(e,t,s,a,n={}){e=new k(e,t,s,a,n);return this._attachWidget(e)}addCurve(e,t,s,a={}){e=new S(e,t,s,a);return this._attachWidget(e)}addDial(e,t,s,a={}){e=new V(e,t,s,a);return this._attachWidget(e)}addLayers(e,t,s,a={}){e=new U(e,t,s,a);return this._attachWidget(e)}addArray(e,t=[],s,a={}){e=new F(e,t,s,a);return this._attachWidget(e)}addList(e,t,s,a,n={}){e=new G(e,t,s,a,n);return this._attachWidget(e)}addTags(e,t,s,a={}){e=new j(e,t,s,a);return this._attachWidget(e)}addCheckbox(e,t,s,a={}){e=new K(e,t,s,a);return this._attachWidget(e)}addToggle(e,t,s,a={}){e=new Y(e,t,s,a);return this._attachWidget(e)}addRadioGroup(e,t,s,a,n={}){e=new X(e,t,s,a,n);return this._attachWidget(e)}addColor(e,t,s,a={}){e=new Z(e,t,s,a);return this._attachWidget(e)}addRange(e,t,s,a={}){e=new $(e,t,s,a);return this._attachWidget(e)}addNumber(e,t,s,a={}){e=new A(e,t,s,a);return this._attachWidget(e)}static VECTOR_COMPONENTS={0:"x",1:"y",2:"z",3:"w"};_addVector(e,t,s,a,n={}){e=new J(e,t,s,a,n);return this._attachWidget(e)}addVector2(e,t,s,a){return this._addVector(2,e,t,s,a)}addVector3(e,t,s,a){return this._addVector(3,e,t,s,a)}addVector4(e,t,s,a){return this._addVector(4,e,t,s,a)}addSize(e,t,s,a={}){e=new Q(e,t,s,a);return this._attachWidget(e)}addPad(e,t,s,a={}){e=new ee(e,t,s,a);return this._attachWidget(e)}addProgress(e,t,s={}){e=new te(e,t,s);return this._attachWidget(e)}addFile(e,t,s={}){e=new se(e,t,s);return this._attachWidget(e)}addTree(e,t,s={}){e=new ae(e,t,s);return this._attachWidget(e)}addTabSections(e,t,s={}){e=new ne(e,t,s);return this._attachWidget(e)}addCounter(e,t,s,a={}){e=new ie(e,t,s,a);return this._attachWidget(e)}addTable(e,t,s={}){e=new le(e,t,s);return this._attachWidget(e)}}y.Panel=M;class re{constructor(e,t={}){this.name=e;var s=document.createElement("div"),a=(s.className="lexbranch",t.id&&(s.id=t.id),t.className&&(s.className+=" "+t.className),s.style.width="calc(100% - 7px)",s.style.margin="0 auto",this),n=(this.root=s,this.widgets=[],document.createElement("div")),i=(n.className="lexbranchtitle",t.icon&&(n.innerHTML="<a class='branchicon "+t.icon+"'>"),n.innerHTML+=e||"Branch",n.innerHTML+="<a class='fa-solid fa-angle-right switch-branch-button'></a>",s.appendChild(n),document.createElement("div"));i.id=e.replace(/\s/g,""),i.className="lexbranchcontent",s.appendChild(i),this.content=i,this._addBranchSeparator(),t.closed&&(n.classList.add("closed"),s.classList.add("closed"),this.grabber.setAttribute("hidden",!0),b(()=>{this.content.setAttribute("hidden",!0)},15)),this.onclick=function(e){e.stopPropagation(),this.classList.toggle("closed"),this.parentElement.classList.toggle("closed"),a.content.toggleAttribute("hidden"),a.grabber.toggleAttribute("hidden"),y.emit("@on_branch_closed",this.classList.contains("closed"))},this.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation(),this.parentElement.classList.contains("dialog")||z("Dock",t,e=>{t.preventDefault(),e.add("Floating",a._onMakeFloating.bind(a))},{icon:"fa-regular fa-window-restore"})},n.addEventListener("click",this.onclick),n.addEventListener("contextmenu",this.oncontextmenu)}_onMakeFloating(){new D(this.name,e=>{for(var t of this.widgets)e.root.appendChild(t.domEl)}).widgets=this.widgets;var e=this.root.parentElement,t=(this.root.remove(),e.querySelector(".lexbranch")),t=(t&&t.classList.add("first"),e.querySelectorAll(".lexbranch"));t.length&&t[t.length-1].classList.add("last")}_addBranchSeparator(){var e=document.createElement("div");e.className="lexwidgetseparator",e.style.width="100%",e.style.background="none";let s=document.createElement("div"),a=(s.innerHTML="&#9662;",e.appendChild(s),b(()=>{s.style.marginLeft=parseFloat(y.DEFAULT_NAME_WIDTH)/100*this.content.offsetWidth+"px"},10),document.createElement("div"));a.style.width="1px",a.style.marginLeft="6px",a.style.marginTop="2px",a.style.height="0px",s.appendChild(a),s.addEventListener("mousedown",function(e){var t=n.root.ownerDocument;t.addEventListener("mouseup",l),t.addEventListener("mousemove",i),e.stopPropagation(),e.preventDefault();t=n.root.offsetHeight-n.root.children[0].offsetHeight;a.style.height=t-3+"px",document.body.classList.add("nocursor")}),this.grabber=s;let n=this;function i(e){var t,e=e.movementX;0!=e&&(t=parseFloat(s.style.marginLeft),s.style.marginLeft=g(t+e,32,n.content.offsetWidth-32)+"px")}function l(e){n._updateWidgets(),a.style.height="0px";var t=n.root.ownerDocument;t.removeEventListener("mouseup",l),t.removeEventListener("mousemove",i),document.body.classList.remove("nocursor")}this.content.appendChild(e)}_updateWidgets(){for(var t=this.grabber.style.marginLeft,e=0;e<this.widgets.length;e++){var s=this.widgets[e],a=s.root;if(!(a.children.length<2)){var n=a.children[0],a=a.children[1];n.style.width=t;let e="0px";s.type===C.FILE&&(e="10%"),a.style.width="-moz-calc( 100% - "+t+" - "+e+" )",a.style.width="-webkit-calc( 100% - "+t+" - "+e+" )",a.style.width="calc( 100% - "+t+" - "+e+" )",s.onresize&&s.onresize()}}}}y.Branch=re;y.Footer=class{constructor(e={}){var t=document.createElement("footer"),s=(t.className="lexfooter",document.createElement("div"));if(s.className="wrapper",t.appendChild(s),e.columns&&e.columns.constructor==Array){var a,n=document.createElement("div");n.className="columns",n.style.gridTemplateColumns="1fr ".repeat(e.columns.length),s.appendChild(n);for(a of e.columns){var i=document.createElement("div"),l=(i.className="col",n.appendChild(i),document.createElement("h2"));if(l.innerHTML=a.title,i.appendChild(l),a.items&&a.items.length){var r,o=document.createElement("ul");i.appendChild(o);for(r of a.items){var c=document.createElement("li");c.innerHTML=`<a class="" href="${r.link}">${r.title}</a>`,o.appendChild(c)}}}}if(e.credits||e.socials){var d=document.createElement("hr"),d=(s.appendChild(d),document.createElement("div"));if(d.className="credits-and-socials",s.appendChild(d),e.credits&&((s=document.createElement("p")).innerHTML=e.credits,d.appendChild(s)),e.socials){var h,u=document.createElement("div");u.className="social";for(h of e.socials){var p=document.createElement("a");p.title=h.title,p.innerHTML=h.icon,p.href=h.link,p.target="_blank",u.appendChild(p)}d.appendChild(u)}}(e.parent??document.body).appendChild(t)}};class D{static _last_id=0;constructor(l,e,t={}){e||console.warn("Content is empty, add some widgets using 'callback' parameter!"),this._oncreate=e,this.id=E();let s=t.size??[],a=t.position??[],n=t.draggable??!0,i=t.modal??!1;var r=document.createElement("dialog");r.className="lexdialog "+(t.className??""),r.id=t.id??"dialog"+D._last_id++,y.root.appendChild(r),b(()=>{i?r.showModal():r.show()},10);let o=this,c=document.createElement("div"),d;l&&(c.className="lexdialogtitle",c.innerHTML=l,c.setAttribute("draggable",!1),c.oncontextmenu=function(i){i.preventDefault(),i.stopPropagation(),y.main_area&&"horizontal"===y.main_area.type&&z("Dock",i,e=>{i.preventDefault();function a(e){let t=e.panels[0];if(t)return t;for(var s of e.sections)if(t=a(s))return t}function t(e){let t=e.branches.find(e=>e.name===l);t?e.root.appendChild(t.root):(e.branch(l),t=e.branches.find(e=>e.name===l));for(var s of o.widgets)t.content.appendChild(s.domEl);t.widgets=o.widgets,e.root.querySelectorAll(".lexbranch.last").forEach(e=>{e.classList.remove("last")}),t.root.classList.add("last"),r.remove()}let s=a(y.main_area.sections[1]),n=(e.add('<i class="fa-regular fa-window-maximize fa-window-maximize fa-rotate-90">',{disabled:!s,id:"dock_options0",callback:()=>{t(s)}}),a(y.main_area.sections[0]));e.add('<i class="fa-regular fa-window-maximize fa-window-maximize fa-rotate-270">',{disabled:!n,id:"dock_options1",callback:()=>{t(n)}})},{icon:"fa-regular fa-window-restore"})},r.appendChild(c)),(t.closable??!0)&&(this.close=()=>{t.onBeforeClose&&t.onBeforeClose(this),t.onclose?t.onclose(this.root):(r.close(),b(()=>{o.panel.clear(),r.remove()},150))},(d=document.createElement("a")).className="lexdialogcloser fa-solid fa-xmark",d.title="Close",d.addEventListener("click",this.close),(l?c:(d.classList.add("notitle"),r)).appendChild(d));var h=new M;h.root.classList.add("lexdialogcontent"),l||h.root.classList.add("notitle"),e&&e.call(this,h),r.appendChild(h.root),h.root.querySelectorAll(".lexbranch").forEach(e=>e.classList.add("dialog")),this.panel=h,this.root=r,this.title=c,n&&p(r,Object.assign({targetClass:"lexdialogtitle"},t)),s.length&&"string"!=typeof s[0]&&(s[0]+="px"),s.length&&"string"!=typeof s[1]&&(s[1]+="px"),r.style.width=s[0]||"25%",r.style.height=s[1]||"auto",r.style.translate=t.position?"unset":"-50% -50%",t.size&&(this.size=s),r.style.left=a[0]??"50%",r.style.top=a[1]??"50%",h.root.style.width="calc( 100% - 30px )",h.root.style.height=l?"calc( 100% - "+(c.offsetHeight+30)+"px )":"calc( 100% - 51px )"}destroy(){this.root.remove()}refresh(){this.panel.root.innerHTML="",this._oncreate.call(this,this.panel)}setPosition(e,t){this.root.style.left=e+"px",this.root.style.top=t+"px"}setTitle(e){var t=this.root.querySelector(".lexdialogtitle");t&&(t.innerText=e)}}y.Dialog=D;class P extends D{static TOP=0;static BOTTOM=1;constructor(e,t,s={}){s.draggable=s.draggable??!1,s.closable=s.closable??!1;super(e,t,s);let a=this;if(y.addSignal("@on_branch_closed",this.panel,e=>{this.dock_pos==P.BOTTOM&&(this.root.style.top="calc(100% - "+(this.root.offsetHeight+3)+"px)")}),this.root.classList.add("pocket"),this.root.style.translate="none",this.root.style.top="0",this.root.style.left="unset",s.position||(this.root.style.right="3px",this.root.style.top="3px"),this.panel.root.style.width="calc( 100% - 12px )",this.panel.root.style.height="calc( 100% - 40px )",this.dock_pos=P.TOP,this.minimized=!1,this.title.tabIndex=-1,this.title.addEventListener("click",e=>{this.title.eventCatched?this.title.eventCatched=!1:(this.size&&(this.minimized?this.root.style.height=this.size[1]:this.root.style.height="auto"),this.root.classList.toggle("minimized"),this.minimized=!this.minimized,this.dock_pos==P.BOTTOM&&(a.root.style.top=this.root.classList.contains("minimized")?"calc(100% - "+(a.title.offsetHeight+6)+"px)":"calc(100% - "+(a.root.offsetHeight+3)+"px)"))}),!s.draggable){var n=s.float;if(n)for(var i=0;i<n.length;i++)switch(n[i]){case"b":this.root.style.top="calc(100% - "+(this.root.offsetHeight+3)+"px)";break;case"l":this.root.style.right="unset",this.root.style.left=s.position?s.position[1]:"3px"}this.root.classList.add("dockable"),this.title.addEventListener("keydown",function(e){e.ctrlKey&&(a.root.style.right="unset","ArrowLeft"==e.key?a.root.style.left="0px":"ArrowRight"==e.key?a.root.style.left="calc(100% - "+(a.root.offsetWidth+3)+"px)":"ArrowUp"==e.key?(a.root.style.top="0px",a.dock_pos=P.TOP):"ArrowDown"==e.key&&(a.root.style.top="calc(100% - "+(a.root.offsetHeight+3)+"px)",a.dock_pos=P.BOTTOM))})}}}y.PocketDialog=P;class oe{constructor(e,t,s={}){document.body.querySelectorAll(".lexcontextmenu").forEach(e=>e.remove()),this.root=document.createElement("div"),this.root.className="lexcontextmenu",this.root.style.left=e.x-48+document.scrollingElement.scrollLeft+"px",this.root.style.top=e.y-8+document.scrollingElement.scrollTop+"px",this.root.addEventListener("mouseleave",function(){this.remove()}),this.items=[],this.colors={},t&&((e={})[t]=[],e.className="cmtitle",e.icon=s.icon,this.items.push(e))}_adjustPosition(e,t,s=!1){var a=e.getBoundingClientRect();s?((s=window.innerWidth-a.right)<0&&(e.style.left=e.offsetLeft+(s-t)+"px"),(s=window.innerHeight-(a.top+a.height))<0&&(e.style.top=e.offsetTop+(s-t+20)+"px")):(s=a.width,a.left<0?e.style.left=t+"px":window.innerWidth-a.right<0&&(e.style.left=window.innerWidth-s-t+"px"),a.top<0?e.style.top=t+"px":a.top+a.height>window.innerHeight&&(e.style.top=window.innerHeight-a.height-t+"px"))}_createSubmenu(e,t,s,a){this.root.querySelectorAll(".lexcontextmenu").forEach(e=>e.remove());var n=document.createElement("div");n.className="lexcontextmenu",s.appendChild(n);for(var i=0;i<e[t].length;++i){var l=e[t][i],r=Object.keys(l)[0];this._createEntry(l,r,n,a)}var o=s.getBoundingClientRect();n.style.left=o.width+"px",n.style.marginTop=3.5-s.offsetHeight+"px",this._adjustPosition(n,6,!0)}_createEntry(t,s,e,a){let n=t[s].length,i=document.createElement("div");i.className="lexmenuboxentry"+(t.className?" "+t.className:""),i.id=t.id??"eId"+d(s),i.innerHTML="";var l=t.icon;l&&(i.innerHTML+="<a class='"+l+" fa-sm'></a>");let r=t.disabled;i.innerHTML+="<div class='lexentryname"+(r?" disabled":"")+"'>"+s+"</div>",e.appendChild(i),this.colors[s]&&(i.style.borderColor=this.colors[s]),""==s?i.className+=" cmseparator":(i.addEventListener("click",e=>{e.stopPropagation(),e.stopImmediatePropagation(),r||((e=t.callback)&&(e.call(this,s,i),this.root.remove()),n&&"click"==y.OPEN_CONTEXTMENU_ENTRY&&this._createSubmenu(t,s,i,++a))}),n&&((l=document.createElement("a")).className="fa-solid fa-bars-staggered fa-xs",i.appendChild(l),"mouseover"==y.OPEN_CONTEXTMENU_ENTRY&&i.addEventListener("mouseover",e=>{i.built||(i.built=!0,this._createSubmenu(t,s,i,++a),e.stopPropagation())}),i.addEventListener("mouseleave",()=>{a=-1,e.querySelectorAll(".lexcontextmenu").forEach(e=>e.remove())})))}onCreate(){b(()=>this._adjustPosition(this.root,6))}add(e,i={}){i.constructor==Function&&(i={callback:i});let l=(e+="").split("/");var t,s,e=l[l.length-1];this.colors[e]=i.color;let r=0,o=(a,e)=>{if(null!=a){let s=null;var t,n;e.forEach(e=>{var t=Object.keys(e).find(e=>e==a);t&&(s=e[t])}),s?o(l[r++],s):((t={})[a]=[],(n=l[r++])||(t.id=i.id,t.callback=i.callback,t.disabled=i.disabled??!1),e.push(t),o(n,t[a]))}},c=(o(l[r++],this.items),e=>{let t=Object.keys(e)[0];var s,a=e[t];if(a.length){null==a.find(e=>Object.keys(e)[0]==t)&&((a={})[t]=[],a.className="cmtitle",e[t].unshift(a));for(s of e[t])for(var n=Object.keys(s)[0],i=0;i<s[n].length;++i)c(s)}});for(t of this.items)c(t);for(s of this.items){var a=Object.keys(s)[0],n="eId"+d(a),n="#"+(s.id??n);this.root.querySelector(n)||this._createEntry(s,a,this.root,-1)}}setColor(e,t){"#"!==t[0]&&(t=s(t)),this.colors[e]=t}}function z(e,t,s,a){t=new oe(t,e,a);return y.root.appendChild(t.root),s&&s(t),t.onCreate(),t}y.ContextMenu=oe,y.addContextMenu=z;class ce{constructor(e,s={}){let r=document.createElement("div"),o=(r.className="curve "+(s.className||""),r.style.minHeight="50px",r.style.width=s.width||"100%",r.style.minWidth="50px",r.style.minHeight="20px",r.bgcolor=s.bgColor||y.getThemeColor("global-intense-background"),r.pointscolor=s.pointsColor||y.getThemeColor("global-selected-light"),r.linecolor=s.lineColor||"#555",r.value=e||[],r.xrange=s.xrange||[0,1],r.yrange=s.yrange||[0,1],r.defaulty=null!=s.defaulty?s.defaulty:0,r.no_overlap=s.noOverlap||!1,r.show_samples=s.showSamples||0,r.allow_add_values=s.allowAddValues??!0,r.draggable_x=s.draggableX??!0,r.draggable_y=s.draggableY??!0,r.smooth=(s.smooth&&"number"==typeof s.smooth?s.smooth:.3)||!1,r.move_out=s.moveOutAction??y.CURVE_MOVEOUT_DELETE,y.addSignal("@on_new_color_scheme",(e,t)=>{r.bgcolor=s.bgColor||y.getThemeColor("global-intense-background"),r.pointscolor=s.pointsColor||y.getThemeColor("global-selected-light"),this.redraw()}),this.element=r,document.createElement("canvas"));function l(e){return[o.width*(e[0]-r.xrange[0])/r.xrange[1],o.height*(e[1]-r.yrange[0])/r.yrange[1]]}function c(e){return[e[0]*r.xrange[1]/o.width+r.xrange[0],e[1]*r.yrange[1]/o.height+r.yrange[0]]}o.width=s.width||200,o.height=s.height||50,r.appendChild(o),this.canvas=o,r.addEventListener("mousedown",function(e){document.addEventListener("mousemove",n),document.addEventListener("mouseup",u);var t=o.getBoundingClientRect(),s=e.clientX-t.left,t=e.clientY-t.top;{var a;d=((e,t)=>{for(var s=1e5,a=-1,n=0;n<r.value.length;n++){var i=l(r.value[n]),i=m([e,t],i);i<s&&i<8&&(s=i,a=n)}return a})(s,o.height-t),e.button==y.MOUSE_LEFT_CLICK&&-1==d&&r.allow_add_values&&(a=c([s,o.height-t]),r.value.push(a),g(),d=r.value.indexOf(a))}h=[s,t],r.redraw(),e.preventDefault(),e.stopPropagation()}),r.getValueAt=function(e){if(e<r.xrange[0]||e>r.xrange[1])return r.defaulty;for(var t=[r.xrange[0],r.defaulty],s=0,a=0;a<r.value.length;a+=1){var n=r.value[a];if(e==n[0])return n[1];if(e<n[0])return s=(e-t[0])/(n[0]-t[0]),t[1]*(1-s)+n[1]*s;t=n}return n=[r.xrange[1],r.defaulty],s=(e-t[0])/(n[0]-t[0]),t[1]*(1-s)+n[1]*s},r.resample=function(e){for(var t=[],s=(r.xrange[1]-r.xrange[0])/e,a=r.xrange[0];a<=r.xrange[1];a+=s)t.push(r.getValueAt(a));return t},r.addValue=function(e){for(var t=0;t<r.value;t++){var s=r.value[t];if(!(s[0]<e[0]))return r.value.splice(t,0,e),void redraw()}r.value.push(e),redraw()};var d=-1,h=(r.redraw=function(e={}){e.value&&(r.value=e.value),e.xrange&&(r.xrange=e.xrange),e.yrange&&(r.yrange=e.yrange),e.smooth&&(r.smooth=e.smooth);var e=o.parentElement.getBoundingClientRect(),t=((e=o.parentElement.parentElement?o.parentElement.parentElement.getBoundingClientRect():e)&&o.width!=e.width&&e.width&&e.width<1e3&&(o.width=e.width),o.getContext("2d")),s=(t.setTransform(1,0,0,1,0,0),t.translate(0,o.height),t.scale(1,-1),t.fillStyle=r.bgcolor,t.fillRect(0,0,o.width,o.height),t.strokeStyle=r.linecolor,t.beginPath(),l([r.xrange[0],r.defaulty])),a=(t.moveTo(s[0],s[1]),[s[0],s[1]]);for(n in r.value){s=l(r.value[n]);a.push(s[0]),a.push(s[1]),r.smooth||t.lineTo(s[0],s[1])}s=l([r.xrange[1],r.defaulty]),a.push(s[0]),a.push(s[1]),r.smooth?y.UTILS.drawSpline(t,a,r.smooth):(t.lineTo(s[0],s[1]),t.stroke());for(var n=0;n<r.value.length;n+=1)s=l(r.value[n]),t.fillStyle=d==n?"white":r.pointscolor,t.beginPath(),t.arc(s[0],s[1],d==n?4:3,0,2*Math.PI),t.fill();if(r.show_samples){var i=r.resample(r.show_samples);t.fillStyle="#888";for(n=0;n<i.length;n+=1)s=l([n*((r.xrange[1]-r.xrange[0])/r.show_samples)+r.xrange[0],i[n]]),t.beginPath(),t.arc(s[0],s[1],2,0,2*Math.PI),t.fill()}},[0,0]);function n(e){var t,s,a,n=o.getBoundingClientRect(),i=e.clientX-n.left,l=e.clientY-n.top,n=(i<0?i=0:i>o.width&&(i=o.width),l<0?l=0:l>o.height&&(l=o.height),[e.clientX-n.left,e.clientY-n.top]);-1!=d&&m(n,[i,l])>.5*o.height?(r.move_out==y.CURVE_MOVEOUT_DELETE?r.value.splice(d,1):(n=[n[0]-i,n[1]-l],(t=r.value[d])[0]=0==n[0]?t[0]:n[0]<0?r.xrange[0]:r.xrange[1],t[1]=0==n[1]?t[1]:n[1]<0?r.yrange[1]:r.yrange[0]),u(e)):(t=c([-(r.draggable_x?h[0]-i:0),r.draggable_y?h[1]-l:0]),-1!=d&&(n=r.xrange[0],s=r.xrange[1],r.no_overlap&&(0<d&&(n=r.value[d-1][0]),d<r.value.length-1)&&(s=r.value[d+1][0]),(a=r.value[d])[0]+=t[0],a[1]+=t[1],a[0]<n?a[0]=n:a[0]>s&&(a[0]=s),a[1]<r.yrange[0]?a[1]=r.yrange[0]:a[1]>r.yrange[1]&&(a[1]=r.yrange[1])),g(),r.redraw(),h[0]=i,h[1]=l,p(e),e.preventDefault(),e.stopPropagation())}function u(e){d=-1,r.redraw(),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",u),p(e),e.preventDefault(),e.stopPropagation()}function p(e){s.callback&&s.callback.call(r,r.value,e)}function m(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function g(){var e=null;-1!=d&&(e=r.value[d]),r.value.sort(function(e,t){return e[0]-t[0]}),e&&(d=r.value.indexOf(e))}return r.redraw(),this}redraw(e={}){this.element.redraw(e)}}y.CanvasCurve=ce;class de{constructor(e,t,s={}){let r=document.createElement("div"),o=(r.className="dial "+(s.className||""),r.style.width=r.style.height=s.size||"100%",r.style.minWidth=r.style.minHeight="50px",r.bgcolor=s.bgColor||y.getThemeColor("global-dark-background"),r.pointscolor=s.pointsColor||y.getThemeColor("global-selected-light"),r.linecolor=s.lineColor||"#555",r.value=t||[],r.xrange=s.xrange||[0,1],r.yrange=s.yrange||[0,1],r.defaulty=null!=s.defaulty?s.defaulty:0,r.no_overlap=s.noOverlap||!1,r.show_samples=s.showSamples||0,r.allow_add_values=s.allowAddValues??!0,r.draggable_x=s.draggableX??!0,r.draggable_y=s.draggableY??!0,r.smooth=(s.smooth&&"number"==typeof s.smooth?s.smooth:.3)||!1,r.move_out=s.moveOutAction??y.CURVE_MOVEOUT_DELETE,this.element=r,document.createElement("canvas"));function l(e){return Math.pow(e[0],2),[o.width*(e[0]-r.xrange[0])/r.xrange[1],o.height*(e[1]-r.yrange[0])/r.yrange[1]]}function c(e){return[e[0]*r.xrange[1]/o.width+r.xrange[0],e[1]*r.yrange[1]/o.height+r.yrange[0]]}o.width=o.height=s.size||200,r.appendChild(o),this.canvas=o,r.addEventListener("mousedown",function(e){document.addEventListener("mousemove",n),document.addEventListener("mouseup",u);var t=o.getBoundingClientRect(),s=e.clientX-t.left,t=e.clientY-t.top;{var a;d=((e,t)=>{for(var s=1e5,a=-1,n=0;n<r.value.length;n++){var i=l(r.value[n]),i=m([e,t],i);i<s&&i<8&&(s=i,a=n)}return a})(s,o.height-t),e.button==y.MOUSE_LEFT_CLICK&&-1==d&&r.allow_add_values&&(a=c([s,o.height-t]),r.value.push(a),g(),d=r.value.indexOf(a))}h=[s,t],r.redraw(),e.preventDefault(),e.stopPropagation()}),r.getValueAt=function(e){if(e<r.xrange[0]||e>r.xrange[1])return r.defaulty;for(var t=[r.xrange[0],r.defaulty],s=0,a=0;a<r.value.length;a+=1){var n=r.value[a];if(e==n[0])return n[1];if(e<n[0])return s=(e-t[0])/(n[0]-t[0]),t[1]*(1-s)+n[1]*s;t=n}return n=[r.xrange[1],r.defaulty],s=(e-t[0])/(n[0]-t[0]),t[1]*(1-s)+n[1]*s},r.resample=function(e){for(var t=[],s=(r.xrange[1]-r.xrange[0])/e,a=r.xrange[0];a<=r.xrange[1];a+=s)t.push(r.getValueAt(a));return t},r.addValue=function(e){for(var t=0;t<r.value;t++){var s=r.value[t];if(!(s[0]<e[0]))return r.value.splice(t,0,e),void redraw()}r.value.push(e),redraw()};var d=-1,h=(r.redraw=function(e={}){e.value&&(r.value=e.value),e.xrange&&(r.xrange=e.xrange),e.yrange&&(r.yrange=e.yrange),e.smooth&&(r.smooth=e.smooth);var e=o.parentElement.getBoundingClientRect(),t=((e=o.parentElement.parentElement?o.parentElement.parentElement.getBoundingClientRect():e)&&o.width!=e.width&&e.width&&e.width<1e3&&(o.width=e.width),o.getContext("2d")),s=(t.setTransform(1,0,0,1,0,0),t.translate(0,o.height),t.scale(1,-1),t.fillStyle=r.bgcolor,t.fillRect(0,0,o.width,o.height),t.strokeStyle=r.linecolor,t.beginPath(),l([r.xrange[0],r.defaulty])),a=(t.moveTo(s[0],s[1]),[s[0],s[1]]);for(n in r.value){s=l(r.value[n]);a.push(s[0]),a.push(s[1])}s=l([r.xrange[1],r.defaulty]),a.push(s[0]),a.push(s[1]);s=l([0,0]),t.fillStyle="gray",t.beginPath(),t.arc(s[0],s[1],3,0,2*Math.PI),t.fill();for(var n=0;n<r.value.length;n+=1)s=l(r.value[n]),t.fillStyle=d==n?"white":r.pointscolor,t.beginPath(),t.arc(s[0],s[1],d==n?4:3,0,2*Math.PI),t.fill();if(r.show_samples){var i=r.resample(r.show_samples);t.fillStyle="#888";for(n=0;n<i.length;n+=1)s=l([n*((r.xrange[1]-r.xrange[0])/r.show_samples)+r.xrange[0],i[n]]),t.beginPath(),t.arc(s[0],s[1],2,0,2*Math.PI),t.fill()}},[0,0]);function n(e){var t,s,a,n=o.getBoundingClientRect(),i=e.clientX-n.left,l=e.clientY-n.top,n=(i<0?i=0:i>o.width&&(i=o.width),l<0?l=0:l>o.height&&(l=o.height),[e.clientX-n.left,e.clientY-n.top]);-1!=d&&m(n,[i,l])>.5*o.height?(r.move_out==y.CURVE_MOVEOUT_DELETE?r.value.splice(d,1):(n=[n[0]-i,n[1]-l],(t=r.value[d])[0]=0==n[0]?t[0]:n[0]<0?r.xrange[0]:r.xrange[1],t[1]=0==n[1]?t[1]:n[1]<0?r.yrange[1]:r.yrange[0]),u(e)):(t=c([-(r.draggable_x?h[0]-i:0),r.draggable_y?h[1]-l:0]),-1!=d&&(n=r.xrange[0],s=r.xrange[1],r.no_overlap&&(0<d&&(n=r.value[d-1][0]),d<r.value.length-1)&&(s=r.value[d+1][0]),(a=r.value[d])[0]+=t[0],a[1]+=t[1],a[0]<n?a[0]=n:a[0]>s&&(a[0]=s),a[1]<r.yrange[0]?a[1]=r.yrange[0]:a[1]>r.yrange[1]&&(a[1]=r.yrange[1])),g(),r.redraw(),h[0]=i,h[1]=l,p(e),e.preventDefault(),e.stopPropagation())}function u(e){d=-1,r.redraw(),document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",u),p(e),e.preventDefault(),e.stopPropagation()}function p(e){s.callback&&s.callback.call(r,r.value,e)}function m(e,t){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function g(){var e=null;-1!=d&&(e=r.value[d]),r.value.sort(function(e,t){return e[0]-t[0]}),e&&(d=r.value.indexOf(e))}return r.redraw(),this}redraw(e={}){this.element.redraw(e)}}y.Dial=V;class I{static NONE=0;static ASSET_SELECTED=1;static ASSET_DELETED=2;static ASSET_RENAMED=3;static ASSET_CLONED=4;static ASSET_DBLCLICKED=5;static ENTER_FOLDER=6;static ASSET_CHECKED=7;constructor(e,t,s){this.type=e||m.NONE,this.item=t,this.value=s,this.multiple=!1}string(){switch(this.type){case I.NONE:return"assetview_event_none";case I.ASSET_SELECTED:return"assetview_event_selected";case I.ASSET_DELETED:return"assetview_event_deleted";case I.ASSET_RENAMED:return"assetview_event_renamed";case I.ASSET_CLONED:return"assetview_event_cloned";case I.ASSET_DBLCLICKED:return"assetview_event_dblclicked";case I.ENTER_FOLDER:return"assetview_event_enter_folder";case I.ASSET_CHECKED:return"assetview_event_checked"}}}y.AssetViewEvent=I;class O{static LAYOUT_CONTENT=0;static LAYOUT_LIST=1;static MAX_PAGE_ELEMENTS=50;constructor(e={}){this.rootPath="https://raw.githubusercontent.com/jxarco/lexgui.js/master/",this.layout=e.layout??O.LAYOUT_CONTENT,this.contentPage=1,e.rootPath&&(e.rootPath.constructor!==String?console.warn("Asset Root Path must be a String (now is "+path.constructor.name+")"):this.rootPath=e.rootPath);var t=document.createElement("div"),s=(t.className="lexassetbrowser",this.root=t,new y.Area({height:"100%"}));t.appendChild(s.root);let a,n,i=s;this.skipBrowser=e.skipBrowser??!1,this.skipPreview=e.skipPreview??!1,this.useNativeTitle=e.useNativeTitle??!1,this.onlyFolders=e.onlyFolders??!0,this.allowMultipleSelection=e.allowMultipleSelection??!1,this.previewActions=e.previewActions??[],this.contextMenu=e.contextMenu??[],this.onRefreshContent=e.onRefreshContent,this.skipBrowser||([a,n]=s.split({type:"horizontal",sizes:["15%","85%"]}),i=n,a.setLimitBox(210,0),n.setLimitBox(512,0)),this.skipPreview||([i,n]=i.split({type:"horizontal",sizes:["80%","20%"]})),this.allowedTypes=e.allowedTypes||["None","Image","Mesh","Script","JSON","Clip"],this.prevData=[],this.nextData=[],this.data=[],this._processData(this.data,null),this.currentData=this.data,this.path=["@"],this.skipBrowser||this._createTreePanel(a),this._createContentPanel(i),this.skipPreview||(this.previewPanel=n.addPanel({className:"lexassetcontentpanel",style:{overflow:"scroll"}}))}load(e,t){this.prevData.length=0,this.nextData.length=0,this.data=e,this._processData(this.data,null),this.currentData=this.data,this.path=["@"],this.skipBrowser||this._createTreePanel(this.area),this._refreshContent(),this.onevent=t}clear(){this.previewPanel&&this.previewPanel.clear(),this.leftPanel&&this.leftPanel.clear(),this.rightPanel&&this.rightPanel.clear()}_processData(e,t){e.constructor!==Array&&(e.folder=t,e.children=e.children??[]);for(var s=e.constructor===Array?e:e.children,a=0;a<s.length;++a)this._processData(s[a],e)}_updatePath(e){this.path.length=0;let t=e=>{e&&(e=(e.children||e)[0])&&e.folder&&(this.path.push(e.folder.id??"@"),t(e.folder.folder))};t(e),y.emit("@on_folder_change",this.path.reverse().join("/"))}_createTreePanel(e){this.leftPanel?this.leftPanel.clear():this.leftPanel=e.addPanel({className:"lexassetbrowserpanel"});e={id:"/",children:this.data},e=this.leftPanel.addTree("Content Browser",e,{filter:!1,onlyFolders:this.onlyFolders,onevent:e=>{var t=e.node,s=e.value;switch(e.type){case y.TreeEvent.NODE_SELECTED:e.multiple||this._enterFolder(t),t.parent||(this.prevData.push(this.currentData),this.currentData=this.data,this._refreshContent(),this.path=["@"],y.emit("@on_folder_change",this.path.join("/")));break;case y.TreeEvent.NODE_DRAGGED:t.folder=s,this._refreshContent()}}});this.tree=e.innerTree}_setContentLayout(e){this.layout=e,this._refreshContent()}_createContentPanel(e){this.rightPanel?this.rightPanel.clear():this.rightPanel=e.addPanel({className:"lexassetcontentpanel"});e=(e,t)=>{var s;this.allowNextPage&&(s=this.contentPage,this.contentPage+=e,this.contentPage=Math.min(this.contentPage,1+((this.currentData.length-1)/O.MAX_PAGE_ELEMENTS|0)),this.contentPage=Math.max(this.contentPage,1),s!=this.contentPage)&&this._refreshContent()};this.rightPanel.sameLine(),this.rightPanel.addSelect("Filter",this.allowedTypes,this.allowedTypes[0],e=>this._refreshContent.call(this,null,e),{width:"30%",minWidth:"128px"}),this.rightPanel.addText(null,this.searchValue??"",e=>this._refreshContent.call(this,e,null),{placeholder:"Search assets.."}),this.rightPanel.addButton(null,"<a class='fa fa-arrow-up-short-wide'></a>",((e,t)=>{var t=z("Sort by",t,e=>{e.add("Name",()=>this._sortData("id")),e.add("Type",()=>this._sortData("type")),e.add(""),e.add("Ascending",()=>this._sortData()),e.add("Descending",()=>this._sortData(null,!0))}),s=this.parent.root.parentElement;s.classList.contains("lexdialog")&&(t.root.style.zIndex=+getComputedStyle(s).zIndex+1)}).bind(this),{className:"micro",title:"Sort"}),this.rightPanel.addButton(null,"<a class='fa-solid fa-grip'></a>",((e,t)=>{var t=z("Layout",t,e=>{e.add("Content",()=>this._setContentLayout(O.LAYOUT_CONTENT)),e.add(""),e.add("List",()=>this._setContentLayout(O.LAYOUT_LIST))}),s=this.parent.root.parentElement;s.classList.contains("lexdialog")&&(t.root.style.zIndex=+getComputedStyle(s).zIndex+1)}).bind(this),{className:"micro",title:"View"}),this.rightPanel.addButton(null,"<a class='fa-solid fa-angles-left'></a>",e.bind(this,-1),{className:"micro",title:"Previous Page"}),this.rightPanel.addButton(null,"<a class='fa-solid fa-angles-right'></a>",e.bind(this,1),{className:"micro",title:"Next Page"}),this.rightPanel.endLine(),this.skipBrowser||(this.rightPanel.sameLine(),this.rightPanel.addComboButtons(null,[{value:"Left",icon:"fa-solid fa-left-long",callback:e=>{this.prevData.length&&(this.nextData.push(this.currentData),this.currentData=this.prevData.pop(),this._refreshContent(),this._updatePath(this.currentData))}},{value:"Right",icon:"fa-solid fa-right-long",callback:e=>{this.nextData.length&&(this.prevData.push(this.currentData),this.currentData=this.nextData.pop(),this._refreshContent(),this._updatePath(this.currentData))}},{value:"Refresh",icon:"fa-solid fa-arrows-rotate",callback:e=>{this._refreshContent()}}],{width:"20%",minWidth:"164px",noSelection:!0}),this.rightPanel.addText(null,this.path.join("/"),null,{width:"70%",maxWidth:"calc(70% - 64px)",minWidth:"164px",disabled:!0,signal:"@on_folder_change",style:{fontWeight:"bolder",fontSize:"16px",color:"#aaa"}}),this.rightPanel.addText(null,"Page "+this.contentPage+" / "+(1+((this.currentData.length-1)/O.MAX_PAGE_ELEMENTS|0)),null,{disabled:!0,signal:"@on_page_change",width:"fit-content"}),this.rightPanel.endLine()),this.content=document.createElement("ul"),this.content.className="lexassetscontent",this.rightPanel.root.appendChild(this.content),this.content.addEventListener("dragenter",function(e){e.preventDefault(),this.classList.add("dragging")}),this.content.addEventListener("dragleave",function(e){e.preventDefault(),this.classList.remove("dragging")}),this.content.addEventListener("drop",e=>{e.preventDefault(),this._processDrop(e)}),this.content.addEventListener("click",function(){this.querySelectorAll(".lexassetitem").forEach(e=>e.classList.remove("selected"))}),this._refreshContent()}_refreshContent(s,a){let o=this.layout==O.LAYOUT_CONTENT,i=(this.filter=a??this.filter??"None",this.searchValue=s??this.searchValue??"",this.content.innerHTML="",this.content.className=o?"lexassetscontent":"lexassetscontent list",this);let n=new FileReader;var l=this.currentData.filter(e=>("None"==this.filter||e.type.toLowerCase()==this.filter.toLowerCase())&&e.id.toLowerCase().includes(this.searchValue.toLowerCase())),t=((a||s)&&(this.contentPage=1),(this.contentPage-1)*O.MAX_PAGE_ELEMENTS),r=Math.min(t+O.MAX_PAGE_ELEMENTS,l.length);for(let e=t;e<r;++e){let t=l[e];t.path?y.request({url:t.path,dataType:"blob",success:e=>{t.bytesize=e.size,n.readAsDataURL(e),n.onload=e=>{t.src=e.currentTarget.result,t._path=t.path,delete t.path,this._refreshContent(s,a)}}}):t.domEl=(a=>{var e=a.type.charAt(0).toUpperCase()+a.type.slice(1),t=c(a.id);let s="Folder"===e,r=document.createElement("li");if(r.className="lexassetitem "+a.type.toLowerCase(),r.tabIndex=-1,i.content.appendChild(r),i.useNativeTitle)r.title=e+": "+a.id;else{let l=document.createElement("span");l.className="lexitemdesc",l.innerHTML="File: "+a.id+"<br>Type: "+e,i.content.appendChild(l),r.addEventListener("mousemove",t=>{if(o){var s=r.getBoundingClientRect(),a=t.target.getBoundingClientRect(),n=l.parentElement.getBoundingClientRect(),i=a.x-n.x-(a.x-s.x);let e=a.y-n.y-(a.y-s.y);t.target.classList.contains("lexassettitle")&&(e+=a.y-s.y),l.style.left=i+t.offsetX+12+"px",l.style.top=e+t.offsetY+"px"}}),r.addEventListener("mouseenter",()=>{o&&(l.style.display="unset")}),r.addEventListener("mouseleave",()=>{o&&setTimeout(()=>{l.style.display="none"},100)})}i.allowMultipleSelection&&((n=document.createElement("input")).type="checkbox",n.className="lexcheckbox",n.checked=a.selected,n.addEventListener("change",(e,t)=>{var s;a.selected=!a.selected,i.onevent&&((s=new I(I.ASSET_CHECKED,e.shiftKey?[a]:a)).multiple=!!e.shiftKey,i.onevent(s)),e.stopPropagation(),e.stopImmediatePropagation()}),r.appendChild(n));var n=document.createElement("span");if(n.className="lexassettitle",n.innerText=a.id,r.appendChild(n),!i.skipPreview){let e=null;a.src&&(-1<["png","jpg"].indexOf(c(a.src))||a.src.includes("data:image/"))||s||!o?(e=document.createElement("img"),n=a.unknown_extension?i.rootPath+"images/file.png":s?i.rootPath+"images/folder.png":a.src,e.src=o||s?n:i.rootPath+"images/file.png",r.appendChild(e)):((e=document.createElement("svg")).className="asset-file-preview",r.appendChild(e),n=document.createElement("text"),e.appendChild(n),n.innerText=t&&t!=a.id?"."+t.toUpperCase():a.type.toUpperCase(),(t=2.5/n.innerText.length)<1&&(n.style.fontSize=64*t+"px",e.style.paddingTop="calc(50% - "+(.5*n.offsetHeight+10)+"px)"))}return s||((t=document.createElement("span")).className="lexassetinfo",t.innerText=e,r.appendChild(t)),r.addEventListener("click",function(e){e.stopImmediatePropagation(),e.stopPropagation();var t=e.detail==y.MOUSE_DOUBLE_CLICK;if(t){if(s)return void i._enterFolder(a)}else e.shiftKey||i.content.querySelectorAll(".lexassetitem").forEach(e=>e.classList.remove("selected")),this.classList.add("selected"),i.selectedItem=a,i.skipPreview||i._previewAsset(a);i.onevent&&((t=new I(t?I.ASSET_DBLCLICKED:I.ASSET_SELECTED,e.shiftKey?[a]:a)).multiple=!!e.shiftKey,i.onevent(t))}),i.contextMenu&&r.addEventListener("contextmenu",function(e){e.preventDefault();let t=i.content.querySelectorAll(".selected").length;y.addContextMenu(1<t?t+" selected":s?a.id:a.type,e,e=>{t<=1&&e.add("Rename"),s||e.add("Clone",i._cloneItem.bind(i,a)),t<=1&&e.add("Properties"),e.add(""),e.add("Delete",i._deleteItem.bind(i,a))})}),r.addEventListener("dragstart",function(e){e.preventDefault()},!1),r})(t)}this.allowNextPage=l.length-1>O.MAX_PAGE_ELEMENTS,y.emit("@on_page_change","Page "+this.contentPage+" / "+(1+((l.length-1)/O.MAX_PAGE_ELEMENTS|0))),this.onRefreshContent&&this.onRefreshContent(s,a)}_previewAsset(e){var t,s=e.src&&e.src.includes("data:image/"),s=(this.previewPanel.clear(),this.previewPanel.branch("Asset"),("image"==e.type||e.src)&&(-1<["png","jpg"].indexOf(c(e.src))||s)&&this.previewPanel.addImage(e.src,{style:{width:"100%"}}),{disabled:!0}),s=(this.previewPanel.addText("Filename",e.id,null,s),e.lastModified&&this.previewPanel.addText("Last Modified",new Date(e.lastModified).toLocaleString(),null,s),(e._path||e.src)&&this.previewPanel.addText("URL",e._path||e.src,null,s),this.previewPanel.addText("Path",this.path.join("/"),null,s),this.previewPanel.addText("Type",e.type,null,s),e.bytesize&&this.previewPanel.addText("Size",(e.bytesize/1024).toPrecision(3)+" KBs",null,s),"folder"==e.type&&this.previewPanel.addText("Files",e.children?e.children.length.toString():"0",null,s),this.previewPanel.addSeparator(),[...this.previewActions]);s.length||s.push({name:"Download",callback:()=>y.downloadURL(e.src,e.id)});for(t of s)t.type&&t.type!==e.type||t.path&&t.path!==this.path.join("/")||this.previewPanel.addButton(null,t.name,t.callback.bind(this,e));this.previewPanel.merge()}_processDrop(e){var t=new FileReader;let i=e.dataTransfer.files.length;for(let n=0;n<e.dataTransfer.files.length;++n){let a=e.dataTransfer.files[n];this.currentData.find(e=>e.id===a.name)||(t.readAsDataURL(a),t.onload=e=>{var t=a.name.substr(a.name.lastIndexOf(".")+1).toLowerCase(),s={id:a.name,src:e.currentTarget.result,extension:t,lastModified:a.lastModified};switch(t){case"png":case"jpg":s.type="image";break;case"js":case"css":s.type="script";break;case"json":s.type="json";break;case"obj":s.type="mesh";break;default:s.type=t,s.unknown_extension=!0}this.currentData.push(s),n==i-1&&(this._refreshContent(),this.skipBrowser||this.tree.refresh())})}}_sortData(a,n=!1){a=a??this._lastSortBy??"id",this.currentData=this.currentData.sort((e,t)=>{var s=n?t[a].localeCompare(e[a]):e[a].localeCompare(t[a]);return s=0==s?n?t.id.localeCompare(e.id):e.id.localeCompare(t.id):s}),this._lastSortBy=a,this._refreshContent()}_enterFolder(e){this.prevData.push(this.currentData),this.currentData=e.children,this.contentPage=1,this._refreshContent(),this._updatePath(this.currentData),this.onevent&&(e=new I(I.ENTER_FOLDER,e),this.onevent(e))}_deleteItem(e){var t=this.currentData.indexOf(e);t<0?console.error("[AssetView Error] Cannot delete. Item not found."):(this.currentData.splice(t,1),this._refreshContent(this.searchValue,this.filter),this.onevent&&(t=new I(I.ASSET_DELETED,e),this.onevent(t)),this.tree.refresh(),this._processData(this.data))}_cloneItem(e){var t,s=this.currentData.indexOf(e);s<0||(delete e.domEl,delete e.folder,t=v(e),this.currentData.splice(s,0,t),this._refreshContent(this.searchValue,this.filter),this.onevent&&(s=new I(I.ASSET_CLONED,e),this.onevent(s)),this._processData(this.data))}}y.AssetView=O,Object.assign(y,{request(a){var e=a.dataType||"text",t=("json"==e||"xml"==e?e="text":"binary"==e&&(e="arraybuffer",a.mimeType="application/octet-stream"),new XMLHttpRequest),s=(t.open(a.data?"POST":"GET",a.url,!0),e&&(t.responseType=e),a.mimeType&&t.overrideMimeType(a.mimeType),a.nocache&&t.setRequestHeader("Cache-Control","no-cache"),t.onload=function(e){var t,s=this.response;if(200!=this.status)t="Error "+this.status,a.error&&a.error(t);else{if("json"==a.dataType)try{s=JSON.parse(s)}catch(t){if(!a.error)throw t;a.error(t)}else if("xml"==a.dataType)try{s=(new DOMParser).parseFromString(s,"text/xml")}catch(t){if(!a.error)throw t;a.error(t)}a.success&&a.success.call(this,s,this)}},t.onerror=function(e){a.error&&a.error(e)},new FormData);if(a.data)for(var n in a.data)s.append(n,a.data[n]);return t.send(s),t},requestText(e,t,s){return this.request({url:e,dataType:"text",success:t,error:s})},requestJSON(e,t,s){return this.request({url:e,dataType:"json",success:t,error:s})},requestBinary(e,t,s){return this.request({url:e,dataType:"binary",success:t,error:s})},requireScript(e,t,s,a,n){if(!e)throw"invalid URL";var i,l=(e=e.constructor===String?[e]:e).length,r=[];for(i in e){var o=document.createElement("script");o.num=i,o.type="text/javascript",o.src=e[i]+(n?"?version="+n:""),o.original_src=e[i],o.async=!1,o.onload=function(e){l--,r.push(this),l?a&&a(this.original_src,this.num):t&&t(r)},s&&(o.onerror=function(e){s(e,this.original_src,this.num)}),document.getElementsByTagName("head")[0].appendChild(o)}},downloadURL(e,s){function t(e){var t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),document.body.removeChild(t)}let a=new FileReader;e.includes("http")?y.request({url:e,dataType:"blob",success:e=>{a.readAsDataURL(e),a.onload=e=>{t(e.currentTarget.result)}}}):t(e)},downloadFile:function(e,t,s){var a,n;t?(s=s||(t.constructor===String?"text/plain":"application/octet-stream"),a=null,a=t.constructor!==File&&t.constructor!==Blob?new Blob([t],{type:s}):t,n=URL.createObjectURL(a),(s=document.createElement("a")).setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(function(){URL.revokeObjectURL(n)},6e4)):console.warn("No file provided to download")}}),Object.defineProperty(String.prototype,"lastChar",{get:function(){return this[this.length-1]},enumerable:!0,configurable:!0}),Element.prototype.insertChildAtIndex=function(e,t=1/0){t>=this.children.length?this.appendChild(e):this.insertBefore(e,this.children[t])},Element.prototype.hasClass=function(e){return!!(e=[].concat(e)).filter(e=>this.classList.contains(e)).length},Element.prototype.addClass=function(e){e&&this.classList.add(e)},Element.prototype.getComputedSize=function(){var e=getComputedStyle(this);return{width:this.offsetWidth+e.getPropertyValue("marginLeft")+e.getPropertyValue("marginRight"),height:this.offsetHeight+e.getPropertyValue("marginTop")+e.getPropertyValue("marginBottom")}},Element.prototype.getParentArea=function(){let e=this.parentElement;for(;e;){if(e.classList.contains("lexarea"))return e;e=e.parentElement}},y.ICONS={"align-center":[448,512,[],"","M352 64c0-17.7-14.3-32-32-32L128 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32zm96 128c0-17.7-14.3-32-32-32L32 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32zM0 448c0 17.7 14.3 32 32 32l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 416c-17.7 0-32 14.3-32 32zM352 320c0-17.7-14.3-32-32-32l-192 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32z"],"align-justify":[448,512,[],"","M448 64c0-17.7-14.3-32-32-32L32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32zm0 256c0-17.7-14.3-32-32-32L32 288c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32zM0 192c0 17.7 14.3 32 32 32l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 160c-17.7 0-32 14.3-32 32zM448 448c0-17.7-14.3-32-32-32L32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32l384 0c17.7 0 32-14.3 32-32z"],"align-left":[448,512,[],"","M288 64c0 17.7-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l224 0c17.7 0 32 14.3 32 32zm0 256c0 17.7-14.3 32-32 32L32 352c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zM0 192c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 224c-17.7 0-32-14.3-32-32zM448 448c0 17.7-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"],"align-right":[448,512,[],"","M448 64c0 17.7-14.3 32-32 32L192 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zm0 256c0 17.7-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l224 0c17.7 0 32 14.3 32 32zM0 192c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 224c-17.7 0-32-14.3-32-32zM448 448c0 17.7-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"],bell:[448,512,[],"","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 25.4c0 45.4-15.5 89.5-43.8 124.9L5.3 377c-5.8 7.2-6.9 17.1-2.9 25.4S14.8 416 24 416l400 0c9.2 0 17.6-5.3 21.6-13.6s2.9-18.2-2.9-25.4l-14.9-18.6C399.5 322.9 384 278.8 384 233.4l0-25.4c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm0 96c61.9 0 112 50.1 112 112l0 25.4c0 47.9 13.9 94.6 39.7 134.6L72.3 368C98.1 328 112 281.3 112 233.4l0-25.4c0-61.9 50.1-112 112-112zm64 352l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7s18.7-28.3 18.7-45.3z"],display:[576,512,[],"","M64 0C28.7 0 0 28.7 0 64L0 352c0 35.3 28.7 64 64 64l176 0-10.7 32L160 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-69.3 0L336 416l176 0c35.3 0 64-28.7 64-64l0-288c0-35.3-28.7-64-64-64L64 0zM512 64l0 288L64 352 64 64l448 0z"],"mobile-screen":[384,512,[],"","M16 64C16 28.7 44.7 0 80 0L304 0c35.3 0 64 28.7 64 64l0 384c0 35.3-28.7 64-64 64L80 512c-35.3 0-64-28.7-64-64L16 64zM144 448c0 8.8 7.2 16 16 16l64 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-64 0c-8.8 0-16 7.2-16 16zM304 64L80 64l0 320 224 0 0-320z"],print:[512,512,[],"","M128 0C92.7 0 64 28.7 64 64l0 96 64 0 0-96 226.7 0L384 93.3l0 66.7 64 0 0-66.7c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0L128 0zM384 352l0 32 0 64-256 0 0-64 0-16 0-16 256 0zm64 32l32 0c17.7 0 32-14.3 32-32l0-96c0-35.3-28.7-64-64-64L64 192c-35.3 0-64 28.7-64 64l0 96c0 17.7 14.3 32 32 32l32 0 0 64c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-64zM432 248a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"],bookmark:[384,512,[],"","M0 48C0 21.5 21.5 0 48 0l0 48 0 393.4 130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4 336 48 48 48 48 0 336 0c26.5 0 48 21.5 48 48l0 440c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488L0 48z"],calendar:[448,512,[],"","M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464l349.5 0c-8.9-63.3-63.3-112-129-112l-91.4 0c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3z"],chart:[448,512,[],"","M160 80c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-352zM0 272c0-26.5 21.5-48 48-48l32 0c26.5 0 48 21.5 48 48l0 160c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48L0 272zM368 96l32 0c26.5 0 48 21.5 48 48l0 288c0 26.5-21.5 48-48 48l-32 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48z"],check:[448,512,[],"","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"],clone:[512,512,[],"","M64 464l224 0c8.8 0 16-7.2 16-16l0-64 48 0 0 64c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 224c0-35.3 28.7-64 64-64l64 0 0 48-64 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16zM224 304l224 0c8.8 0 16-7.2 16-16l0-224c0-8.8-7.2-16-16-16L224 48c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16zm-64-16l0-224c0-35.3 28.7-64 64-64L448 0c35.3 0 64 28.7 64 64l0 224c0 35.3-28.7 64-64 64l-224 0c-35.3 0-64-28.7-64-64z"],copy:[448,512,[],"","M384 336l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L400 115.9 400 320c0 8.8-7.2 16-16 16zM192 384l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1L192 0c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l192 0c35.3 0 64-28.7 64-64l0-32-48 0 0 32c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l32 0 0-48-32 0z"],paste:[512,512,[],"","M104.6 48L64 48C28.7 48 0 76.7 0 112L0 384c0 35.3 28.7 64 64 64l96 0 0-48-96 0c-8.8 0-16-7.2-16-16l0-272c0-8.8 7.2-16 16-16l16 0c0 17.7 14.3 32 32 32l72.4 0C202 108.4 227.6 96 256 96l62 0c-7.1-27.6-32.2-48-62-48l-40.6 0C211.6 20.9 188.2 0 160 0s-51.6 20.9-55.4 48zM144 56a16 16 0 1 1 32 0 16 16 0 1 1 -32 0zM448 464l-192 0c-8.8 0-16-7.2-16-16l0-256c0-8.8 7.2-16 16-16l140.1 0L464 243.9 464 448c0 8.8-7.2 16-16 16zM256 512l192 0c35.3 0 64-28.7 64-64l0-204.1c0-12.7-5.1-24.9-14.1-33.9l-67.9-67.9c-9-9-21.2-14.1-33.9-14.1L256 128c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64z"],edit:[512,512,[],"","M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152L0 424c0 48.6 39.4 88 88 88l272 0c48.6 0 88-39.4 88-88l0-112c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 112c0 22.1-17.9 40-40 40L88 464c-22.1 0-40-17.9-40-40l0-272c0-22.1 17.9-40 40-40l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L88 64z"],envelope:[512,512,[],"","M64 112c-8.8 0-16 7.2-16 16l0 22.1L220.5 291.7c20.7 17 50.4 17 71.1 0L464 150.1l0-22.1c0-8.8-7.2-16-16-16L64 112zM48 212.2L48 384c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-171.8L322 328.8c-38.4 31.5-93.7 31.5-132 0L48 212.2zM0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128z"],"envelope-open":[512,512,[],"","M255.4 48.2c.2-.1 .4-.2 .6-.2s.4 .1 .6 .2L460.6 194c2.1 1.5 3.4 3.9 3.4 6.5l0 13.6L291.5 355.7c-20.7 17-50.4 17-71.1 0L48 214.1l0-13.6c0-2.6 1.2-5 3.4-6.5L255.4 48.2zM48 276.2L190 392.8c38.4 31.5 93.7 31.5 132 0L464 276.2 464 456c0 4.4-3.6 8-8 8L56 464c-4.4 0-8-3.6-8-8l0-179.8zM256 0c-10.2 0-20.2 3.2-28.5 9.1L23.5 154.9C8.7 165.4 0 182.4 0 200.5L0 456c0 30.9 25.1 56 56 56l400 0c30.9 0 56-25.1 56-56l0-255.5c0-18.1-8.7-35.1-23.4-45.6L284.5 9.1C276.2 3.2 266.2 0 256 0z"],map:[576,512,[],"","M565.6 36.2C572.1 40.7 576 48.1 576 56l0 336c0 10-6.2 18.9-15.5 22.4l-168 64c-5.2 2-10.9 2.1-16.1 .3L192.5 417.5l-160 61c-7.4 2.8-15.7 1.8-22.2-2.7S0 463.9 0 456L0 120c0-10 6.1-18.9 15.5-22.4l168-64c5.2-2 10.9-2.1 16.1-.3L383.5 94.5l160-61c7.4-2.8 15.7-1.8 22.2 2.7zM48 136.5l0 284.6 120-45.7 0-284.6L48 136.5zM360 422.7l0-285.4-144-48 0 285.4 144 48zm48-1.5l120-45.7 0-284.6L408 136.5l0 284.6z"],file:[384,512,[],"","M320 464c8.8 0 16-7.2 16-16l0-288-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16l256 0zM0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 448c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 64z"],"file-code":[384,512,[],"","M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l160 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zM257 255c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"],"file-zip":[384,512,[],"","M64 464c-8.8 0-16-7.2-16-16L48 64c0-8.8 7.2-16 16-16l48 0c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l48 0 0 80c0 17.7 14.3 32 32 32l80 0 0 288c0 8.8-7.2 16-16 16L64 464zM64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-293.5c0-17-6.7-33.3-18.7-45.3L274.7 18.7C262.7 6.7 246.5 0 229.5 0L64 0zm48 112c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm0 64c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm-6.3 71.8L82.1 335.9c-1.4 5.4-2.1 10.9-2.1 16.4c0 35.2 28.8 63.7 64 63.7s64-28.5 64-63.7c0-5.5-.7-11.1-2.1-16.4l-23.5-88.2c-3.7-14-16.4-23.8-30.9-23.8l-14.8 0c-14.5 0-27.2 9.7-30.9 23.8zM128 336l32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"],"floppy-disk":[448,512,["save"],"","M48 96l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-245.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3L448 416c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96C0 60.7 28.7 32 64 32l245.5 0c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8L320 184c0 13.3-10.7 24-24 24l-192 0c-13.3 0-24-10.7-24-24L80 80 64 80c-8.8 0-16 7.2-16 16zm80-16l0 80 144 0 0-80L128 80zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"],save:"floppy-disk",fingerprint:[512,512,[],"","M48 256C48 141.1 141.1 48 256 48c63.1 0 119.6 28.1 157.8 72.5c8.6 10.1 23.8 11.2 33.8 2.6s11.2-23.8 2.6-33.8C403.3 34.6 333.7 0 256 0C114.6 0 0 114.6 0 256l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40zm458.5-52.9c-2.7-13-15.5-21.3-28.4-18.5s-21.3 15.5-18.5 28.4c2.9 13.9 4.5 28.3 4.5 43.1l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c0-18.1-1.9-35.8-5.5-52.9zM256 80c-19 0-37.4 3-54.5 8.6c-15.2 5-18.7 23.7-8.3 35.9c7.1 8.3 18.8 10.8 29.4 7.9c10.6-2.9 21.8-4.4 33.4-4.4c70.7 0 128 57.3 128 128l0 24.9c0 25.2-1.5 50.3-4.4 75.3c-1.7 14.6 9.4 27.8 24.2 27.8c11.8 0 21.9-8.6 23.3-20.3c3.3-27.4 5-55 5-82.7l0-24.9c0-97.2-78.8-176-176-176zM150.7 148.7c-9.1-10.6-25.3-11.4-33.9-.4C93.7 178 80 215.4 80 256l0 24.9c0 24.2-2.6 48.4-7.8 71.9C68.8 368.4 80.1 384 96.1 384c10.5 0 19.9-7 22.2-17.3c6.4-28.1 9.7-56.8 9.7-85.8l0-24.9c0-27.2 8.5-52.4 22.9-73.1c7.2-10.4 8-24.6-.2-34.2zM256 160c-53 0-96 43-96 96l0 24.9c0 35.9-4.6 71.5-13.8 106.1c-3.8 14.3 6.7 29 21.5 29c9.5 0 17.9-6.2 20.4-15.4c10.5-39 15.9-79.2 15.9-119.7l0-24.9c0-28.7 23.3-52 52-52s52 23.3 52 52l0 24.9c0 36.3-3.5 72.4-10.4 107.9c-2.7 13.9 7.7 27.2 21.8 27.2c10.2 0 19-7 21-17c7.7-38.8 11.6-78.3 11.6-118.1l0-24.9c0-53-43-96-96-96zm24 96c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 24.9c0 59.9-11 119.3-32.5 175.2l-5.9 15.3c-4.8 12.4 1.4 26.3 13.8 31s26.3-1.4 31-13.8l5.9-15.3C267.9 411.9 280 346.7 280 280.9l0-24.9z"],eye:[576,512,[],"","M288 80c-65.2 0-118.8 29.6-159.9 67.7C89.6 183.5 63 226 49.4 256c13.6 30 40.2 72.5 78.6 108.3C169.2 402.4 222.8 432 288 432s118.8-29.6 159.9-67.7C486.4 328.5 513 286 526.6 256c-13.6-30-40.2-72.5-78.6-108.3C406.8 109.6 353.2 80 288 80zM95.4 112.6C142.5 68.8 207.2 32 288 32s145.5 36.8 192.6 80.6c46.8 43.5 78.1 95.4 93 131.1c3.3 7.9 3.3 16.7 0 24.6c-14.9 35.7-46.2 87.7-93 131.1C433.5 443.2 368.8 480 288 480s-145.5-36.8-192.6-80.6C48.6 356 17.3 304 2.5 268.3c-3.3-7.9-3.3-16.7 0-24.6C17.3 208 48.6 156 95.4 112.6zM288 336c44.2 0 80-35.8 80-80s-35.8-80-80-80c-.7 0-1.3 0-2 0c1.3 5.1 2 10.5 2 16c0 35.3-28.7 64-64 64c-5.5 0-10.9-.7-16-2c0 .7 0 1.3 0 2c0 44.2 35.8 80 80 80zm0-208a128 128 0 1 1 0 256 128 128 0 1 1 0-256z"],"eye-slash":[640,512,[],"","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm9.4 130.3C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5l-41.9-33zM192 256c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5z"],folder:[512,512,[],"","M0 96C0 60.7 28.7 32 64 32l132.1 0c19.1 0 37.4 7.6 50.9 21.1L289.9 96 448 96c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l384 0c8.8 0 16-7.2 16-16l0-256c0-8.8-7.2-16-16-16l-161.4 0c-10.6 0-20.8-4.2-28.3-11.7L213.1 87c-4.5-4.5-10.6-7-17-7L64 80z"],"folder-closed":[512,512,[],"e185","M251.7 127.6s0 0 0 0c10.5 10.5 24.7 16.4 39.6 16.4L448 144c8.8 0 16 7.2 16 16l0 32L48 192l0-96c0-8.8 7.2-16 16-16l133.5 0c4.2 0 8.3 1.7 11.3 4.7l33.9-33.9L208.8 84.7l42.9 42.9zM48 240l416 0 0 176c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16l0-176zM285.7 93.7L242.7 50.7c-12-12-28.3-18.7-45.3-18.7L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L291.3 96c-2.1 0-4.2-.8-5.7-2.3z"],"folder-open":[576,512,[],"","M384 480l48 0c11.4 0 21.9-6 27.6-15.9l112-192c5.8-9.9 5.8-22.1 .1-32.1S555.5 224 544 224l-400 0c-11.4 0-21.9 6-27.6 15.9L48 357.1 48 96c0-8.8 7.2-16 16-16l117.5 0c4.2 0 8.3 1.7 11.3 4.7l26.5 26.5c21 21 49.5 32.8 79.2 32.8L416 144c8.8 0 16 7.2 16 16l0 32 48 0 0-32c0-35.3-28.7-64-64-64L298.5 96c-17 0-33.3-6.7-45.3-18.7L226.7 50.7c-12-12-28.3-18.7-45.3-18.7L64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l23.7 0L384 480z"],github:[496,512,[],"","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"],"grip-vertical":[320,512,[],"","M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"],image:[512,512,[],"","M448 80c8.8 0 16 7.2 16 16l0 319.8-5-6.5-136-176c-4.5-5.9-11.6-9.3-19-9.3s-14.4 3.4-19 9.3L202 340.7l-30.5-42.7C167 291.7 159.8 288 152 288s-15 3.7-19.5 10.1l-80 112L48 416.3l0-.3L48 96c0-8.8 7.2-16 16-16l384 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm80 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z"],images:[576,512,[],"","M160 80l352 0c8.8 0 16 7.2 16 16l0 224c0 8.8-7.2 16-16 16l-21.2 0L388.1 178.9c-4.4-6.8-12-10.9-20.1-10.9s-15.7 4.1-20.1 10.9l-52.2 79.8-12.4-16.9c-4.5-6.2-11.7-9.8-19.4-9.8s-14.8 3.6-19.4 9.8L175.6 336 160 336c-8.8 0-16-7.2-16-16l0-224c0-8.8 7.2-16 16-16zM96 96l0 224c0 35.3 28.7 64 64 64l352 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L160 32c-35.3 0-64 28.7-64 64zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120L0 344c0 75.1 60.9 136 136 136l320 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-320 0c-48.6 0-88-39.4-88-88l0-224zm208 24a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"],left:[320,512,[],"","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"],right:[320,512,[],"","M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"],up:[448,512,[],"","M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"],down:[448,512,[],"","M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"],"log-in":[512,512,[],"","M352 96l64 0c17.7 0 32 14.3 32 32l0 256c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0c53 0 96-43 96-96l0-256c0-53-43-96-96-96l-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32zm-9.4 182.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L242.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128z"],"log-out":[512,512,[],"","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"],"menu-arrows":[512,512,[],"","M352 144l96 112-96 112M160 144L64 256l96 112","transform=rotate(90)","fill=none stroke=currentColor stroke-width=60 stroke-linejoin=round stroke-linecap=round"],more:[128,512,[],"","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"],minus:[448,512,[],"","M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"],"more-horizontal":[448,512,[],"","M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"],plus:[448,512,[],"","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"],search:[512,512,[],"","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"],sidebar:[512,512,[],"","M64 64h384a32 32 0 0 1 32 32v320a32 32 0 0 1-32 32H64a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm128 0v384",null,"fill=none stroke=currentColor stroke-width=50 stroke-linejoin=round stroke-linecap=round"],shuffle:[512,512,[],"","M403.8 34.4c12-5 25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-32-32 0c-10.1 0-19.6 4.7-25.6 12.8L284 229.3 244 176l31.2-41.6C293.3 110.2 321.8 96 352 96l32 0 0-32c0-12.9 7.8-24.6 19.8-29.6zM164 282.7L204 336l-31.2 41.6C154.7 401.8 126.2 416 96 416l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c10.1 0 19.6-4.7 25.6-12.8L164 282.7zm274.6 188c-9.2 9.2-22.9 11.9-34.9 6.9s-19.8-16.6-19.8-29.6l0-32-32 0c-30.2 0-58.7-14.2-76.8-38.4L121.6 172.8c-6-8.1-15.5-12.8-25.6-12.8l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c30.2 0 58.7 14.2 76.8 38.4L326.4 339.2c6 8.1 15.5 12.8 25.6 12.8l32 0 0-32c0-12.9 7.8-24.6 19.8-29.6s25.7-2.2 34.9 6.9l64 64c6 6 9.4 14.1 9.4 22.6s-3.4 16.6-9.4 22.6l-64 64z"],"credit-card":[576,512,[],"","M512 80c8.8 0 16 7.2 16 16l0 32L48 128l0-32c0-8.8 7.2-16 16-16l448 0zm16 144l0 192c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16l0-192 480 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zm56 304c-13.3 0-24 10.7-24 24s10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0zm128 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l112 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-112 0z"],"trash-can":[448,512,[],"","M170.5 51.6L151.5 80l145 0-19-28.4c-1.5-2.2-4-3.6-6.7-3.6l-93.7 0c-2.7 0-5.2 1.3-6.7 3.6zm147-26.6L354.2 80 368 80l48 0 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-8 0 0 304c0 44.2-35.8 80-80 80l-224 0c-44.2 0-80-35.8-80-80l0-304-8 0c-13.3 0-24-10.7-24-24S10.7 80 24 80l8 0 48 0 13.8 0 36.7-55.1C140.9 9.4 158.4 0 177.1 0l93.7 0c18.7 0 36.2 9.4 46.6 24.9zM80 128l0 304c0 17.7 14.3 32 32 32l224 0c17.7 0 32-14.3 32-32l0-304L80 128zm80 64l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16zm80 0l0 208c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-208c0-8.8 7.2-16 16-16s16 7.2 16 16z"],user:[448,512,[],"","M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464l349.5 0c-8.9-63.3-63.3-112-129-112l-91.4 0c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3z"],"closed-captioning":[576,512,["cc"],"","M512 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l448 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM200 208c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48s21.5-48 48-48zm144 48c0-26.5 21.5-48 48-48c14.2 0 27 6.1 35.8 16c8.8 9.9 24 10.7 33.9 1.9s10.7-24 1.9-33.9c-17.5-19.6-43.1-32-71.5-32c-53 0-96 43-96 96s43 96 96 96c28.4 0 54-12.4 71.5-32c8.8-9.9 8-25-1.9-33.9s-25-8-33.9 1.9c-8.8 9.9-21.6 16-35.8 16c-26.5 0-48-21.5-48-48z"],cc:"closed-captioning",heart:[512,512,[],"","M225.8 468.2l-2.5-2.3L48.1 303.2C17.4 274.7 0 234.7 0 192.8l0-3.3c0-70.4 50-130.8 119.2-144C158.6 37.9 198.9 47 231 69.6c9 6.4 17.4 13.8 25 22.3c4.2-4.8 8.7-9.2 13.5-13.3c3.7-3.2 7.5-6.2 11.5-9c0 0 0 0 0 0C313.1 47 353.4 37.9 392.8 45.4C462 58.6 512 119.1 512 189.5l0 3.3c0 41.9-17.4 81.9-48.1 110.4L288.7 465.9l-2.5 2.3c-8.2 7.6-19 11.9-30.2 11.9s-22-4.2-30.2-11.9zM239.1 145c-.4-.3-.7-.7-1-1.1l-17.8-20-.1-.1s0 0 0 0c-23.1-25.9-58-37.7-92-31.2C81.6 101.5 48 142.1 48 189.5l0 3.3c0 28.5 11.9 55.8 32.8 75.2L256 430.7 431.2 268c20.9-19.4 32.8-46.7 32.8-75.2l0-3.3c0-47.3-33.6-88-80.1-96.9c-34-6.5-69 5.4-92 31.2c0 0 0 0-.1 .1s0 0-.1 .1l-17.8 20c-.3 .4-.7 .7-1 1.1c-4.5 4.5-10.6 7-16.9 7s-12.4-2.5-16.9-7z"],"x-mark":[384,512,[],"","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"],star:[576,512,[],"","M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z"],"square-js":[448,512,[],"","M448 96c0-35.3-28.7-64-64-64H64C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96zM180.9 444.9c-33.7 0-53.2-17.4-63.2-38.5L152 385.7c6.6 11.7 12.6 21.6 27.1 21.6c13.8 0 22.6-5.4 22.6-26.5V237.7h42.1V381.4c0 43.6-25.6 63.5-62.9 63.5zm85.8-43L301 382.1c9 14.7 20.8 25.6 41.5 25.6c17.4 0 28.6-8.7 28.6-20.8c0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5c0-31.6 24.1-55.6 61.6-55.6c26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18c-12.3 0-20.1 7.8-20.1 18c0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2c0 37.8-29.8 58.6-69.7 58.6c-39.1 0-64.4-18.6-76.7-43z"],python:[448,512,[],"","M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"],microsoft:[448,512,[],"","M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"],apple:[384,512,[],"f179","M318.7 268.7c-.2-36.7 16.4-64.4 50-84.8-18.8-26.9-47.2-41.7-84.7-44.6-35.5-2.8-74.3 20.7-88.5 20.7-15 0-49.4-19.7-76.4-19.7C63.3 141.2 4 184.8 4 273.5q0 39.3 14.4 81.2c12.8 36.7 59 126.7 107.2 125.2 25.2-.6 43-17.9 75.8-17.9 31.8 0 48.3 17.9 76.4 17.9 48.6-.7 90.4-82.5 102.6-119.3-65.2-30.7-61.7-90-61.7-91.9zm-56.6-164.2c27.3-32.4 24.8-61.9 24-72.5-24.1 1.4-52 16.4-67.9 34.9-17.5 19.8-27.8 44.3-25.6 71.9 26.1 2 49.9-11.4 69.5-34.3z"]},y.UTILS={getTime(){return(new Date).getTime()},compareThreshold(e,t,s,a){return Math.abs(e-t)>=a||Math.abs(e-s)>=a},compareThresholdRange(e,t,s,a){return s<=e&&e<=a||s<=t&&t<=a||e<=s&&a<=t},uidGenerator:E,deleteElement(e){e&&e.remove()},flushCss(e){e.offsetHeight},getControlPoints(e,t,s,a,n,i,l){var r=Math.sqrt(Math.pow(s-e,2)+Math.pow(a-t,2)),r=l*r/(r+Math.sqrt(Math.pow(n-s,2)+Math.pow(i-a,2))),l=l-r;return[s+r*(e-n),a+r*(t-i),s-l*(e-n),a-l*(t-i)]},drawSpline(e,t,s){e.save();for(var a=[],n=t.length,i=0;i<n-4;i+=2)a=a.concat(y.UTILS.getControlPoints(t[i],t[i+1],t[i+2],t[i+3],t[i+4],t[i+5],s));for(i=2;i<t.length-5;i+=2)e.beginPath(),e.moveTo(t[i],t[i+1]),e.bezierCurveTo(a[2*i-2],a[2*i-1],a[2*i],a[2*i+1],t[i+2],t[i+3]),e.stroke(),e.closePath();e.beginPath(),e.moveTo(t[0],t[1]),e.quadraticCurveTo(a[0],a[1],t[2],t[3]),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(t[n-2],t[n-1]),e.quadraticCurveTo(a[2*n-10],a[2*n-9],t[n-4],t[n-3]),e.stroke(),e.closePath(),e.restore()}};export{y as LX};